{"version":3,"sources":["Components/Database/Firebase.js","Components/Auth/Auth.jsx","Components/Navigation/NavigationBar.jsx","Components/Util/LoadingScreen.jsx","Components/Products/Catagory.jsx","Components/Database/FirebaseAction.js","Components/Products/SearchBox.jsx","Components/Products/ProductPage.jsx","Components/Products/ProductList.jsx","Components/Checkout/Basket.jsx","Components/Checkout/CheckoutSuccess.jsx","Components/Checkout/CheckoutCancel.jsx","Components/MainPage.jsx","Components/Auth/SignIn.jsx","Components/Navigation/PageNavigation.jsx","Components/Account/Account.jsx","Components/Products/Editor/ProductEditor.jsx","Components/Admin/Admin.jsx","Components/Admin/ViewOrder.jsx","index.jsx"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","props","state","currentUser","undefined","storeData","orderHistory","loadStoreData","bind","loadData","auth","onAuthStateChanged","user","setState","uid","then","userData","loadOrderHistory","this","data","firestore","collection","doc","get","mainData","where","docs","map","idData","id","index","Provider","value","children","Component","NavigationBar","status","basketAmount","getTotal","basket","JSON","parse","window","localStorage","getItem","total","x","length","parseInt","quantity","waitForContext","prevProps","prevState","snapshot","context","className","to","alt","src","StoreTitle","displayName","contextType","LoadingScreen","Catagory","keys","Object","vals","values","idkey","indexOf","splice","listKeys","listValue","key","type","name","onChange","e","handleSearch","htmlFor","FirebaseAction","exists","info","update","order","orderData","gt","token","uploadData","push","stringify","adminData","card","email","address","line1","address_line1","line2","address_line2","city","address_city","postcode","address_zip","created","FieldValue","serverTimestamp","paid","set","catch","error","alert","console","log","sort","a","b","event","ref","storage","file","target","files","meta","contentType","task","child","put","sendPasswordResetEmail","add","SearchBox","serverData","dataList","searchInput","createRef","runCheck","getProductList","catKey","catagoryData","element","searchterm","toLowerCase","catagorys","searchCatagory","filter","productName","includes","trueVals","num","split","some","r","checked","addBasketItem","setItem","handleCatagoryList","placeholder","search","image","displayPrice","onClick","addToBasket","ProductPage","redirect","openExpandedImage","getData","productPrice","open","des","productDescription","pos","getDescription","ProductList","match","params","stripePromise","loadStripe","Basket","checkoutText","storedItems","calculateTotal","deliveryPrice","grandTotal","confirm","replace","oldData","stripe","fetch","method","body","btoa","parseData","throughdata","getBasketData","response","json","session","redirectToCheckout","sessionId","result","message","text","item","toFixed","min","max","defaultValue","changeBasketItemQuantity","removeItem","role","handleClick","CheckoutSuccess","atob","location","setAdminData","CheckoutCancel","MainPage","style","background","ColumnBackgroundLeft","ColumnLinkLeft","ColumnImageLeft","ColumnAltLeft","ColumnBackgroundCenter","ColumnLinkCenter","ColumnImageCenter","ColumnAltCenter","ColumnBackgroundRight","ColumnLinkRight","ColumnImageRight","ColumnAltRight","SignIn","handleSignIn","preventDefault","elements","password","signInWithEmailAndPassword","onSubmit","PageNavigation","currentPage","maxPages","onPageChange","returnValue","prevPage","nextPage","Account","showPage","resetSent","orderStatus","processOrderHistory","resetPassword","currentOrder","currentOrderData","getProductInfo","sku","array","disabled","toDate","toDateString","index2","renderPanel","ProductEditor","changedData","isNaN","savedData","setProductInfo","replaceAll","endsWith","slice","substr","toString","setProductImage","getDownloadURL","url","saveChanges","uploadFile","html","handleChange","tagName","blankData","unitPerDeliveryCharge","addNewProduct","renderItem","renderSelector","Admin","getInfo","getAdminData","openOrders","odat","oldState","retData","oldArray","columnSettings","advanceOrder","saveSettings","pid","reason","setOrderRefunded","handleSettingsChange","href","dat2","advanceFullfillment","makeRefund","renderColumnSettings","ViewOrder","statusTitles","statusDescriptions","productInfo","getUserOrder","dateString","date","getMonth","getDate","getFullYear","itemData","MainApp","Auth","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8533ee70.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyD3EtMzgHnjYat2LbYjYGJi6goQ72UpqLQ\",\r\n\tauthDomain: \"storeexample-1c12e.firebaseapp.com\",\r\n\tdatabaseURL: \"https://storeexample-1c12e.firebaseio.com\",\r\n\tprojectId: \"storeexample-1c12e\",\r\n\tstorageBucket: \"storeexample-1c12e.appspot.com\",\r\n\tmessagingSenderId: \"113670337584\",\r\n\tappId: \"1:113670337584:web:837407a10474f3a3fea9f5\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React from \"react\";\r\nimport firebase from \"Components/Database/Firebase\";\r\n\r\nexport const AuthContext = React.createContext(null);\r\n\r\nclass AuthProvider extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentUser : undefined,\r\n\t\t\tstoreData : undefined,\r\n\t\t\torderHistory : undefined,\r\n\t\t};\r\n\r\n\t\tthis.loadStoreData = this.loadStoreData.bind(this);\r\n\t\tthis.loadData = this.loadData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tfirebase.auth().onAuthStateChanged(user =>{\r\n\t\t\tthis.setState({currentUser : user});\r\n\t\t\tif(user === null) return;\r\n\t\t\tthis.loadData(user.uid).then(userData =>{\r\n\t\t\t\tthis.setState({userData});\r\n\t\t\t});\r\n\t\t\tthis.loadOrderHistory(user.uid).then(orderHistory =>{\r\n\t\t\t\tthis.setState({orderHistory : orderHistory})\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.loadStoreData().then(data =>{\r\n\t\t\tthis.setState({storeData : data});\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tasync loadOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadStoreData(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadProductList(){\r\n\t\tconst data = await firebase.firestore.collection(\"productList\").get();\r\n\t\tconst mainData = data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={this.state}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AuthProvider;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass NavigationBar extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tbasketAmount : this.getTotal(),\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotal(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\")), total = 0;\r\n\r\n\t\tfor(let x=0; x<basket.length; x++)\ttotal += parseInt(basket[x].quantity);\r\n\t\treturn total;\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData &&\t this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\r\n\trender(){\r\n\t\tif(this.state.status === -1){\r\n\t\t\treturn <div className=\"navWrapper\">Loading...</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"navWrapper\">\r\n\t\t\t\t<Link className=\"navLink\" to=\"/\">\r\n\t\t\t\t\t<button className=\"navButtonHome\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Home</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Home Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/HomeAlt.svg?alt=media&token=d71028d0-a3a6-491f-8690-7193f5289cb5\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t\r\n\t\t\t\t<Link className=\"navLink\" to=\"/products/\">\r\n\t\t\t\t\t<button className=\"navButtonCatagories\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Products</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Product Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/ProductsAlt.svg?alt=media&token=686777dc-56a5-4e92-9f13-25121f7b5030\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<span className=\"navTitle\">{this.context.storeData[1].StoreTitle}</span>\r\n\t\t\t\t{\r\n\t\t\t\t\t(this.context.userData === undefined || this.context.userData === null )? \r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/signin\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">Sign in</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\talt=\"Sign In Navigation Button\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/account\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">{this.context.userData.displayName}'s account</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\t\talt=\"Account Navigation Button\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t<Link className=\"navLink\" to=\"/basket\">\r\n\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Basket ({this.state.basketAmount})</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \t\r\n\t\t\t\t\t\t\t\talt=\"Basket Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/BasketAlt.svg?alt=media&token=9c8a999c-0278-4419-b5ea-111a69866065\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\t\r\n\t}\r\n}\r\n\r\nexport default NavigationBar;","import React from 'react';\r\n\r\nclass LoadingScreen extends React.Component{\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"LoadingScreenWrapper\">\r\n\t\t\t\t<span className=\"LoadingScreenMessage\">Loading...</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingScreen;","import React from 'react';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass Catagory extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\r\n\t\t\tlet keys = Object.keys(this.context.storeData[0]);\r\n\t\t\tlet vals = Object.values(this.context.storeData[0]);\r\n\r\n\t\t\tlet idkey= keys.indexOf(\"id\");\r\n\t\t\tkeys.splice(idkey,1);\r\n\t\t\tvals.splice(idkey,1);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tlistKeys : keys,\r\n\t\t\t\tlistValue : vals,\r\n\t\t\t\tstatus : 1\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return (<div className=\"catWrapper\">Error</div>);\r\n\r\n\t\t\tcase 0: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"catWrapper\">\r\n\t\t\t\t\t<div className=\"catList\" >\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.keys(this.state.listKeys).map((data,index) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"catListTag\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={this.state.listKeys[index]} \r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"Catagorys\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"catCheck\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.props.handleSearch(e)}/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label \tclassName=\"catLabel\" htmlFor={this.state.listKeys[index]}>{this.state.listKeys[index]}</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Catagory;","import firebase from './Firebase';\r\n\r\nclass FirebaseAction{\r\n\r\n\tstatic async getProductInfo(id){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\tstatic async setProductInfo(id,info){\r\n\t\tfirebase.firestore().collection(\"productList\").doc(id).update(info);\r\n\t}\r\n\r\n\tstatic async getProductList(){\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async getUserData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tstatic async getUserOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\treturn data.docs.map(doc => doc.data());\r\n\t}\r\n\r\n\tstatic async getUserOrder(order){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").doc(order).get();\r\n\t\treturn data.data();\r\n\t}\r\n\r\n\tstatic async getStoreSettings(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async addOrderHistory(uid,orderData,gt,token){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<orderData.length; key++){\r\n\t\t\tuploadData.push(JSON.stringify({\r\n\t\t\t\t\"key\":orderData[key].id,\r\n\t\t\t\t\"quantity\" : orderData[key].quantity,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tconst adminData = {\r\n\t\t\tname : token.card.name,\r\n\t\t\t\r\n\t\t\temail : token.email,\r\n\r\n\t\t\taddress : {\r\n\t\t\t\tname : token.card.name,\r\n\t\t\t\tline1 : token.card.address_line1,\r\n\t\t\t\tline2 : token.card.address_line2,\r\n\t\t\t\tcity : token.card.address_city,\r\n\t\t\t\tpostcode : token.card.address_zip,\r\n\t\t\t},\r\n\r\n\t\t\tdata : uploadData,\r\n\t\t\tcreated : firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n\t\t\tstatus : 0,\r\n\r\n\t\t\tuid : uid,\r\n\t\t\ttoken : token.id,\r\n\r\n\t\t\tpaid : gt,\r\n\r\n\t\t};\r\n\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(token.id).set(adminData).catch((error) => {\r\n\t\t\twindow.alert(\"There was an issue placing this order, please contact support\");\r\n\t\t\tconsole.error(\"Unable to write to admin panel! (\"+error+\")\");\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async setOrderRefunded(id){\r\n\t\tawait firebase.firestore().collection(\"adminData\").doc(id).update({status : 4});\r\n\t}\r\n\r\n\tstatic async getAdminData(){\r\n\t\tconst adminData = await firebase.firestore().collection(\"adminData\").where(\"status\",\"<\",3).get().catch((error) => {alert(error); console.log(error)});\r\n\t\tconst mainData = adminData.docs.map(doc => doc.data());\r\n\t\tconst idData = adminData.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\tmainData.sort((a,b) => (a.created > b.created) ? 1 : ((b.created > a.created) ? -1 : 0));\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async setProductImage(id,event){\r\n\t\tconst ref = firebase.storage().ref();\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst meta = {contentType : file.type};\r\n\t\tconst name = id;\r\n\r\n\t\tconst task = ref.child(name).put(file,meta);\r\n\t\t\r\n\t\treturn await task;\r\n\t}\r\n\r\n\tstatic async advanceOrder(order){\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(order.id).update({\r\n\t\t\tstatus : (order.status + 1)\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\t\r\n\t}\r\n\r\n\tstatic async saveSettings(e){\r\n\t\tfirebase.firestore().collection(\"storeSettings\").doc(\"StoreSettings\").update(e)\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async resetPassword(e){\r\n\t\tawait firebase.auth().sendPasswordResetEmail(e);\r\n\t}\r\n\r\n\tstatic async setAdminData(data){\r\n\t\tfirebase.firestore().collection(\"adminData\").add({...data, created : firebase.firestore.FieldValue.serverTimestamp()}).catch(console.error);\r\n\t}\r\n}\r\n\r\nexport default FirebaseAction;","import React from 'react';\r\n\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport Catagory from 'Components/Products/Catagory';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass SearchBox extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {status : 0};\r\n\t\tthis.serverData = [];\r\n\t\tthis.dataList = [];\r\n\r\n\t\tthis.searchInput = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\trunCheck(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.serverData = data; \r\n\t\t\t\tthis.dataList = data;\r\n\t\t\t\r\n\t\t\t\tlet catagoryData = {};\r\n\t\t\t\tlet catKey;\r\n\r\n\t\t\t\tfor(catKey in this.context.storeData[0]){\r\n\t\t\t\t\tcatagoryData = {\r\n\t\t\t\t\t\t...catagoryData,\r\n\t\t\t\t\t\t[catKey] : false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({dataList : catagoryData, status : 1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsearch(element){\r\n\t\tthis.setState({status : 0});\r\n\t\tconst searchterm = element.target.value.toLowerCase();\r\n\r\n\t\tif(!this.state.catagorys){\r\n\t\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.searchCatagory();\r\n\t\t\tthis.dataList = this.dataList.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\tsearchCatagory(){\r\n\t\tthis.setState({status : 0});\r\n\r\n\t\tlet a = this;\r\n\r\n\t\tlet trueVals = Object.keys(this.state.dataList).filter(function(num){\r\n\t\t\treturn a.state.dataList[num];\r\n\t\t});\r\n\r\n\t\tif(trueVals.length === 0){\r\n\t\t\tthis.dataList = this.serverData;\r\n\t\t\tthis.setState({status : 1, catagorys : false});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\tlet prodCat = JSON.parse(data.Catagory).split(\"+\");\r\n\t\t\treturn prodCat.some(r=>trueVals.includes(r));\r\n\t\t});\r\n\t\t\r\n\t\tthis.setState({status : 1, catagorys : true});\r\n\t}\r\n\r\n\thandleCatagoryList(data){\r\n\t\tthis.setState({\r\n\t\t\tdataList : {\r\n\t\t\t\t...this.state.dataList,\r\n\t\t\t\t[data.target.id] : data.target.checked,\r\n\t\t\t}\r\n\t\t},()=>this.searchCatagory());\r\n\t}\r\n\r\n\taddToBasket(data){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket,data);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t}\r\n\r\n\taddBasketItem(basket,data){\r\n\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.props.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbasket.push(data);\r\n\t\tbasket[basket.length-1].quantity = 1;\r\n\t\treturn;\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"schWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"schContainer\">\r\n\t\t\t\t\t\t<div className=\"schLeft\">\r\n\t\t\t\t\t\t\t<Catagory handleSearch={(e) => this.handleCatagoryList(e)}/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"schRight\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"schInput\" placeholder=\"Search...\" onChange={(e)=>this.search(e)}/><br/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"schResult\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.dataList.map((data,index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sliWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/products/${data.id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={data.image} alt={data.productName}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h2>£{data.displayPrice}</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={()=>this.addToBasket(data)}>Buy Now</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBox;","import React from 'react'\r\nimport { Redirect} from \"react-router\";\r\nimport firebase from 'Components/Database/Firebase';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nexport default class ProductPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false};\r\n\t\tthis.openExpandedImage = this.openExpandedImage.bind(this);\r\n\t\tthis.addToBasket = this.addToBasket.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.props.id)\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\r\n\t\tthis.loadData().then(data => {\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.data.id = this.props.id;\r\n\t\t\tthis.data.quantity = 0;\r\n\t\t\tthis.data.displayPrice = this.data.productPrice / 100;\r\n\t\t\tthis.setState({status:1});\r\n\t\t});\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true});\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbasket.push(this.data);\r\n\t\tbasket[basket.length-1].quantity = parseInt(basket[basket.length-1].quantity) + 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\tasync loadData(){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(this.props.id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\topenExpandedImage(){\r\n\t\twindow.open(this.data.image);\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.data.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\r\n\t\tdes = des.map((data)=>{\r\n\t\t\tif(data === \"\"){\r\n\t\t\t\treturn (<span><br/></span>);\r\n\t\t\t} \r\n\t\t\treturn (<span>{data}</span>);\r\n\t\t});\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect)\treturn <Redirect to=\"/basket\" />\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\" onClick={()=>{return window.open(this.data.image)}}>\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\tClick to expand\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(this.data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t<h2>£{JSON.parse(this.data.displayPrice)}</h2>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.getDescription()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button>Buy Now</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React from 'react';\r\n\r\nimport SearchBox from 'Components/Products/SearchBox';\r\nimport ProductPage from 'Components/Products/ProductPage';\r\n\r\nclass ProductList extends React.Component{\r\n\trender(){\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn <SearchBox />\r\n\t\t}else{\r\n\t\t\treturn <ProductPage id={this.props.match.params.id}/>\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductList;","import React from 'react'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\t\r\nconst stripePromise = loadStripe('pk_test_51HHEl2HbWsI0wL0616xJL9FkVOSuvpDFAfYvYfwwmOv044YOH4npf2jEko9ISFcouW3Y5ETqkQMWxeizaDANXNTL0018qa39p8');\r\n\r\nclass Basket extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {checkoutText : \"Proceed to Checkout\", storedItems : JSON.parse(window.localStorage.getItem(\"basket\")),};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tcalculateTotal(){\r\n\t\tlet total = 0;\r\n\r\n\t\tfor(let a=0; a<this.state.storedItems.length; a++){\r\n\t\t\ttotal = total + (this.state.storedItems[a].productPrice * this.state.storedItems[a].quantity);\r\n\t\t\ttotal = total + (this.state.storedItems[a].deliveryPrice * this.state.storedItems[a].quantity);\r\n\t\t}\r\n\r\n\t\tthis.setState({grandTotal:total});\r\n\t}\r\n\r\n\tremoveItem(e){\r\n\t\tif(window.confirm(\"This will remove all of this item from your basket, are you sure?\")){\r\n\t\t\tlet data = this.state.storedItems;\r\n\r\n\t\t\tfor(let a=0; a<data.length; a++){\r\n\t\t\t\tif(data[a].id === e.target.id)\tdata.splice(a,1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({storedItems : data}, () => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\t\tthis.calculateTotal();\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBasketItemQuantity(e){\r\n\t\te.target.value = e.target.value.replace(\".\"\t,\"\");\r\n\t\te.target.value = e.target.value.replace(\",\",\"\");\r\n\t\te.target.value = e.target.value.replace(\" \",\"\");\r\n\r\n\r\n\t\tlet oldData = this.state.storedItems;\r\n\r\n\t\tfor(let a=0; a<oldData.length; a++){\r\n\t\t\tif(oldData[a].id === e.target.id){\r\n\t\t\t\toldData[a].quantity = e.target.value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({storedItems : oldData},() => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tgetBasketData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"key\":this.state.storedItems[key].id,\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tparseData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"name\" : JSON.parse(this.state.storedItems[key].productName),\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t\t\"price\" : this.state.storedItems[key].productPrice,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tasync handleClick(event){\r\n\t\tthis.setState({checkoutText : \"Please Wait...\"});\r\n\t\tconst stripe = await stripePromise;\r\n\t\tconst response = await fetch('https://www.bystuart.co.uk/store-example/checkout-session', { method: 'POST', body:JSON.stringify({\r\n\t\t\tuid : btoa(this.context.currentUser.uid),\r\n\t\t\tdata : btoa(this.parseData()),\r\n\t\t\tthroughdata : btoa(this.getBasketData()),\r\n\t\t})});\r\n\r\n\t\tconst session = await response.json();\r\n\t\tconsole.log(session.id);\r\n\t\tconst result = await stripe.redirectToCheckout({\r\n\t\t\tsessionId: session.id,\r\n\t\t});\r\n\r\n\t\tif (result.error) {\r\n\t\t\tthis.setState({checkoutText : \"Error: \"+result.error.message});\r\n\t\t\tconsole.error(response.text());\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"basketWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"basketContainer\">\r\n\t\t\t\t\t<div className=\"basketTopBar\">\r\n\t\t\t\t\t\tMy Basket\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketList\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.storedItems.map((item,index) => (\r\n\t\t\t\t\t\t\t\t<div className=\"basketListItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemImageCont\"><img className=\"basketListItemImage\" alt=\"Store Item\" src={item.image}/></div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemName\">{JSON.parse(item.productName)}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPrice\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.productPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceDelivery\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.deliveryPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemQuantity\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityInput\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.quantity} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.changeBasketItemQuantity(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemRemove\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityRemove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"&#10007;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => this.removeItem(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketBottomBar\">\r\n\t\t\t\t\t\tYour total comes to £{(this.state.grandTotal/100).toFixed(2)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className=\"basketCheckoutButton\" role=\"link\" onClick={(e)=>this.handleClick(e)}>\r\n\t\t\t\t\t\t\t{this.state.checkoutText}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Basket;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutSuccess extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t\tdata : JSON.parse(atob(this.props.location.search.split(\"=\")[1])),\r\n\t\t};\r\n\r\n\t\tFirebaseAction.setAdminData(this.state.data);\r\n\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tHello, {this.state.data.email}!<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tSince this is an example store, no actual payment was taken.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutSuccess;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutCancel extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t};\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tUnfortunately an error has occured or the action was cancelled.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutCancel;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\n\r\nclass MainPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {status : -1};\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData && this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <LoadingScreen />\r\n\t\t \r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"MainPage\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t<header></header>\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundLeft}} pos=\"left\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkLeft}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageLeft} alt={this.context.storeData[1].ColumnAltLeft}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section  style={{background:this.context.storeData[1].ColumnBackgroundCenter}} pos=\"middle\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkCenter}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageCenter} alt={this.context.storeData[1].ColumnAltCenter}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundRight}} pos=\"right\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkRight}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageRight} alt={this.context.storeData[1].ColumnAltRight}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport firebase from 'Components/Database/Firebase'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass SignIn extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t\tthis.handleSignIn = this.handleSignIn.bind(this);\r\n\t}\r\n\r\n\tasync handleSignIn(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {email,password} = event.target.elements; \r\n\t\ttry{\r\n\t\t\tawait firebase.auth().signInWithEmailAndPassword(email.value,password.value);\r\n\t\t\tthis.setState({redirect : true})\r\n\t\t}catch(error){\r\n\t\t\talert(error);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to=\"/\"/>\r\n\t\treturn (\r\n\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={this.handleSignIn}  className=\"SignInWrapper\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Email</h1>\r\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" placeholder=\"example@example.com\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Password</h1>\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"password\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\n\r\nclass PageNavigation extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage : 0,\r\n\t\t\tmaxPages : this.props.maxPages,\r\n\t\t};\r\n\t}\r\n\r\n\tprevPage(){\r\n\t\tif(this.state.currentPage - 1 >= 0){\r\n\t\t\tthis.setState({currentPage : this.state.currentPage - 1},\r\n\t\t\t() => {this.props.onPageChange(this.state.currentPage)});\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.state.currentPage + 1 < this.state.maxPages){\r\n\t\t\tthis.setState(\r\n\t\t\t\t{currentPage : this.state.currentPage + 1},\r\n\t\t\t\t()=>{this.props.onPageChange(this.state.currentPage)}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tlet returnValue = [];\r\n\r\n\t\treturnValue.push(<div key=\"leftCap\" onClick={()=>this.prevPage()} className=\"GlobalNavBallLeftCap\"></div>);\r\n\t\t\r\n\r\n\t\tfor(let a=0; a<this.state.maxPages; a++){\r\n\t\t\treturnValue.push(\r\n\t\t\t\t<div \tonClick={()=>this.setState({currentPage : a},() => {this.props.onPageChange(this.state.currentPage)})}\r\n\t\t\t\t\t\tkey={a} \r\n\t\t\t\t\t\tclassName={(a === this.state.currentPage ? \"GlobalNavBallFilled\" : \"GlobalNavBall\")}>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturnValue.push(<div key=\"rightCap\" onClick={() => this.nextPage()} className=\"GlobalNavBallRightCap\"></div>);\r\n\t\t\r\n\t\treturn (<div className=\"GlobalPageNavigation\">{returnValue}</div>);\r\n\t}\r\n}\r\n\r\nexport default PageNavigation;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Account extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tshowPage : 0,\r\n\r\n\t\t\tmaxPages : 2,\r\n\r\n\t\t\tresetSent : false,\r\n\t\t\torderHistory : undefined,\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.userData && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1){this.setState({orderHistory : [], status : -2},()=>this.processOrderHistory());}}\r\n\r\n\tasync resetPassword(){\r\n\t\tFirebaseAction.resetPassword(this.context.currentUser.email)\r\n\t\tthis.setState({resetSent : true});\r\n\t}\r\n\r\n\tasync processOrderHistory(){\r\n\t\tfor(let order=0; order<this.context.orderHistory.length; order++){\t\t\t\r\n\t\t\tlet currentOrder = [];\r\n\r\n\t\t\tlet currentOrderData = this.context.orderHistory[order];\r\n\t\t\t\r\n\t\t\tfor(let item=0; item<currentOrderData.data.length; item++){\r\n\t\t\t\tlet info = JSON.parse(currentOrderData.data[item]);\r\n\r\n\t\t\t\tawait FirebaseAction.getProductInfo(info.key).then((data) => {\r\n\t\t\t\t\tcurrentOrder.push({\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\tproductName : JSON.parse(data.productName),\r\n\t\t\t\t\t\tsku : JSON.parse(data.sku),\r\n\t\t\t\t\t\tproductDescription : JSON.parse(data.productDescription),\r\n\t\t\t\t\t\tCatagory : JSON.parse(data.Catagory),\r\n\t\t\t\t\t\tquantity : info.quantity,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet array = this.state.orderHistory;\r\n\t\t\tarray.push(currentOrder);\r\n\t\t\tthis.setState({orderHistory : array});\r\n\t\t}\r\n\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\t\t\tcase 0: default: \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t\t<div className=\"accPanelTitle\">Display Settings</div>\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accDisplayName\">Display Name</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accDisplayName\" \r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.userData.displayName}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accEmail\">Email</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accEmail\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.currentUser.email}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accResetPassword\">Password</label><br/>\r\n\t\t\t\t\t\t\t<button id=\"accResetPassword\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelButton\" \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.resetSent} \r\n\t\t\t\t\t\t\t\t\tonClick={() => this.resetPassword()}>Change Password</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\tcase 1:\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accPanel\" style={{\"justify-content\":\"initial\"}}>\r\n\t\t\t\t\t<div className=\"accPanelTitle\">Order History</div><br/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.context.orderHistory.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link key={index} className=\"accPanelItem\" to={\"/account/order/\"+data.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"accPanelItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"GlobalSpacer\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemPlaced\">Placed: {data.created.toDate().toDateString()}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderHistory[index].map((item,index2) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"accOHItemInfo\" key={index2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tItem #{index2+1} - {item.productName}({item.quantity})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemStatus\">Status: {this.state.orderStatus[data.status]}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemTotal\">Paid: £{data.paid/100}</span> \r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -3: default: return <span>Error!</span>;\r\n\r\n\t\tcase -1: case -2: return <LoadingScreen />\r\n\r\n\t\tcase 0: \r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t{this.renderPanel()}\r\n\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Account;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport firebase from 'Components/Database/Firebase';\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\n\r\nclass ProductEditor extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false, changedData : {}};\r\n\t\tthis.changedData = {};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tFirebaseAction.getProductInfo(this.props.match.params.id).then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.data.id = this.props.match.params.id;\r\n\t\t\t\t\r\n\t\t\t\tif(isNaN(this.data.productPrice)){\r\n\t\t\t\t\tconsole.error(\"data.productPrice was NaN, reset to 0\");\r\n\t\t\t\t\tthis.data.productPrice = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.displayPrice = parseInt(this.data.productPrice) / 100;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({changedData : this.data});\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsaveChanges(){\r\n\t\tthis.savedData = this.state.changedData;\r\n\t\tthis.savedData.productPrice = parseInt(JSON.parse(this.savedData.productPrice));\r\n\t\tthis.savedData.deliveryPrice = parseInt(JSON.parse(this.savedData.deliveryPrice));\r\n\t\tFirebaseAction.setProductInfo(this.props.match.params.id,this.savedData);\r\n\t}\r\n\r\n\thandleChange(element,name){\r\n\t\tlet data;\r\n\t\t\r\n\t\tif(name === \"productDescription\"){\r\n\t\t\tdata = element.target.value;\r\n\r\n\t\t\tdata = data.replaceAll(\"</span><span><br></span>\",\"\\n\\n\");\r\n\t\t\tdata = data.replaceAll(\"<span>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"</span>\",\"\\n\");\r\n\t\t\tdata = data.replaceAll(\"&nbsp;\",\" \");\r\n\r\n\t\t\tif(data.endsWith(\"\\n\")){\r\n\t\t\t\tdata = data.slice(0,-1);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}else if(name === \"productPrice\"){\r\n\t\t\tdata = element.target.value.substr(1);\r\n\t\t}else{\r\n\t\t\tdata = element.target.value;\r\n\t\t}\r\n\r\n\t\tconsole.log(\"[Saved] \"+JSON.stringify(data));\r\n\r\n\t\tthis.setState({\r\n\t\t\tchangedData : {\r\n\t\t\t\t...this.state.changedData,\r\n\t\t\t\t[name] : JSON.stringify(data),\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.state.changedData.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\t\tdes = des.map((data)=>{if(data === \"\"){return \"<span><br></span>\";} return \"<span>\"+data+\"</span>\";});\r\n\t\tdes = des.toString().replaceAll(\">,<\",\"><\");\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\tuploadFile(event){\r\n\r\n\t\tlet dat = FirebaseAction.setProductImage(this.props.match.params.id,event);\r\n\t\tdat.then(snapshot => snapshot.ref.getDownloadURL())\r\n\t\t\t.then((url) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangedData : {\r\n\t\t\t\t\t\t...this.state.changedData,\r\n\t\t\t\t\t\timage:url,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.data.image = this.state.changedData.image;\r\n\t\t\t\tthis.saveChanges();\r\n\t\t}).catch(console.error);\t\t\r\n\t}\r\n\r\n\trenderItem(){\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={(e)=>this.uploadFile(e)}/>\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productName)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productName\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h1\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={\"£\"+JSON.parse(this.state.changedData.productPrice)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productPrice\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h2\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\tpos=\"middle\"\r\n\t\t\t\t\t\t\t\t\t\thtml={this.getDescription()}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productDescription\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"section\"/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button onClick={()=>this.saveChanges()}>Save Changes</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync addNewProduct(){\r\n\t\tconst blankData = {\r\n\t\t\tproductName : \"\\\"\\\"\",\r\n\t\t\tproductDescription : \"\\\"\\\"\",\r\n\t\t\tCatagory : \"\\\"\\\"\",\r\n\t\t\tdeliveryPrice : 0,\r\n\t\t\tproductPrice : 0,\r\n\t\t\tsku : \"\\\"\\\"\",\r\n\t\t\timage : \"\\\"\\\"\",\r\n\t\t\tunitPerDeliveryCharge : 0,\r\n\t\t};\r\n\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").add(blankData);\r\n\t\tthis.setState({redirect : '/editor/'+data.id});\r\n\t}\r\n\r\n\trenderSelector(){\r\n\t\treturn (\r\n\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"productEditorPageWrapper\">\r\n\t\t\t\t\t<header>Edit specific product</header>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.data.map((data,index) => {\r\n\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\treturn (\t\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"productEditorListContainer\">\r\n\t\t\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<img src={data.image} />\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.setState({redirect : \"/editor/\"+data.id})}}>Edit</button>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.setState({redirect : \"/editor/\"+data.id})}}>Remove</button>\r\n\t\t\t\t\t\t\t\t\t</section>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</main>\r\n\t\t\t\t\t<footer>\r\n\t\t\t\t\t\t<button className=\"productEditorListAddButton\" onClick={() => this.addNewProduct()}>Add new item</button>\r\n\t\t\t\t\t</footer>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to={this.state.redirect} />\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn this.renderSelector();\r\n\t\t}else{\r\n\t\t\treturn this.renderItem();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductEditor;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Admin extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t\tstatus : -1,\r\n\r\n\t\t\tshowPage : 0,\r\n\t\t\tmaxPages : 2\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tasync getInfo(){\r\n\t\tif(\tthis.context !== undefined && this.context.currentUser !== undefined && this.context !== null && this.context.currentUser !== null && this.context.storeData !== undefined && this.context.storeData[0] !== undefined && this.context.storeData[1] !== undefined && this.state.status === -1){\r\n\t\t\tif(this.state.orderData !== undefined) return; \r\n\t\t}\r\n\r\n\t\tthis.setState({orderData : [], status : 0});\r\n\t\t\t\r\n\t\t\tawait FirebaseAction.getAdminData().then((data) => {\r\n\t\t\t\tthis.setState({openOrders : data},()=>{\r\n\r\n\t\t\t\t\tthis.state.openOrders.map(async (odat,index)=>{\r\n\t\t\t\t\t\tlet oldState = this.state.orderData;\r\n\t\t\t\t\t\toldState.push([]);\r\n\r\n\t\t\t\t\t\tthis.setState({orderData : oldState},()=>{\r\n\t\t\t\t\t\t\todat.data.map(async(order)=>{\r\n\t\t\t\t\t\t\t\tlet key = JSON.parse(order).key;\r\n\r\n\t\t\t\t\t\t\t\tawait FirebaseAction.getProductInfo(key).then((retData)=>{\r\n\t\t\t\t\t\t\t\t\tlet oldArray = this.state.orderData;\r\n\t\t\t\t\t\t\t\t\toldArray[index].push(retData);\r\n\t\t\t\t\t\t\t\t\tthis.setState({orderData : oldArray});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthis.setState({columnSettings : this.context.storeData[1], status : 1});\r\n\t}\r\n\t\r\n\tadvanceFullfillment(index){\r\n\t\tlet order = this.state.openOrders[index];\r\n\t\tif(order.status < 3){\r\n\t\t\tFirebaseAction.advanceOrder(order).then(() => {\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSettingsChange(e){\r\n\t\tthis.setState({\r\n\t\t\tcolumnSettings : {\r\n\t\t\t\t...this.state.columnSettings,\r\n\t\t\t\t[e.target.name] : e.target.value.replace(/\\n/g, '')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveSettings(){\r\n\t\tFirebaseAction.saveSettings(this.state.columnSettings);\r\n\t}\r\n\r\n\tasync makeRefund(id, pid){\r\n\t\tconst response = await fetch('http://localhost:4242/make-refund', { method: 'POST', body: btoa(pid) });\r\n\t\tconst data = await response.json();\r\n\r\n\t\tif(data.status === \"failed\"){\r\n\t\t\talert(\"Unable to refund, \"+data.reason);\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tFirebaseAction.setOrderRefunded(id).then(()=>{\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trenderColumnSettings(name){\r\n\t\treturn (\r\n\t\t\t<div className={\"admColumnSettings\"+name}>\r\n\t\t\t\t<span className=\"admColumnSettingsTitle\">{name} Column Settings</span><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"admColumnSettingImage\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnImage\"+name}>Image Link for {name} Column</label>\r\n\t\t\t\t\t<textarea \ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"admColumnSettingsInputLink\"\r\n\t\t\t\t\t\t\t\tname={\"ColumnImage\"+name}\r\n\t\t\t\t\t\t\t\tid={\"ColumnImage\"+name} \r\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnImage\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingAlt\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnAlt\"+name}>Alt text for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnAlt\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnAlt\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnAlt\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingLink\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnLink\"+name}>Link for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnLink\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnLink\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnLink\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingColor\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnBackground\"+name}>Background Color for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"color\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnBackground\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\r\n\t\t\tdefault: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 0: \r\n\t\t\t\tif(this.state.openOrders.length === 0){\r\n\t\t\t\t\treturn (<div className=\"admPanel\">No current open orders.</div>);\r\n\t\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.openOrders.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"admOI\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOITitle\">Order #{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIBio\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIBioTitle\">Recipient Information</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIName\">Name: {data.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIEmail\"><a href={\"mailto:\"+data.email}>Email: {data.email}</a></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIAddress\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIAddressTitle\">Shipping Address</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.line1}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{data.address.line2 !== null && <span className=\"admOIAddressLine\">{data.address.line2}</span>}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.city}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.postcode}</span><br/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderData[index].map((dat2)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"AdmOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{JSON.parse(dat2.productName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIStatus\"> \r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIStatusText\">Status: {this.state.orderStatus[data.status]}</span>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIAdvanceOrder\" disabled={data.status >= 3} onClick={() => this.advanceFullfillment(index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status >= 3 && <b>Completed Order</b>}\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status < 3 && <b>Advance to {this.state.orderStatus[data.status+1]}</b>}\r\n\t\t\t\t\t\t\t\t\t\t</button><br/>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIRefund\" onClick={()=>this.makeRefund(data.id, data.pid)}>Issue Refund</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t<div className=\"admPanelColumnSettings\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<label htmlFor=\"StoreTitle\">Store Title</label><br/>\r\n\t\t\t\t\t\t<input type=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tid=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.columnSettings.StoreTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"admColumnSettingsWrapper\">\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Left\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Center\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Right\")}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button onClick={()=>this.saveSettings()}>Save Changes</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: case 0: default: return (<LoadingScreen />);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t\t<div className=\"admWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\r\n\t\t\t\t\t\t{this.renderPanel()}\r\n\r\n\t\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass ViewOrder extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.statusTitles = [\r\n\t\t\t\"Placed\",\r\n\t\t\t\"Dispatched\",\r\n\t\t\t\"Out for delivery\",\r\n\t\t\t\"Complete\",\r\n\t\t\t\"Returned\"\r\n\t\t];\r\n\r\n\t\tthis.statusDescriptions = [\r\n\t\t\t\"Placed, in the system ready to be dispatched\",\r\n\t\t\t\"Dispatched, ready to be sent out for delivery\",\r\n\t\t\t\"Out for delivery, with our postal carrier\",\r\n\t\t\t\"Completed, order has been recieved\",\r\n\t\t\t\"Refunded, Sorry if there was a problem with your order\"\r\n\t\t];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tid : this.props.match.params.id,\r\n\t\t\tproductInfo : {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getUserOrder(this.state.id).then((data) => {\r\n\t\t\t\t\r\n\t\t\t\tif(data === undefined){\r\n\t\t\t\t\tthis.setState({status : -1});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet dateString = \"\";\r\n\t\t\t\t\tlet date = data.created.toDate();\r\n\r\n\t\t\t\t\tconst month = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\n\t\t\t\t\tdateString = month[date.getMonth()]+\" \"+date.getDate();\r\n\r\n\t\t\t\t\tif(date.getDate().toString().endsWith(\"1\")){\r\n\t\t\t\t\t\tdateString = dateString+\"st \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"2\")){\r\n\t\t\t\t\t\tdateString = dateString+\"nd \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"3\")){\r\n\t\t\t\t\t\tdateString = dateString+\"rd \";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdateString = dateString+\"th \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdateString = dateString + date.getFullYear();\r\n\r\n\t\t\t\t\tthis.setState({orderData : {...data,dateString : dateString}});\r\n\r\n\t\t\t\t\tfor(let a=0; a<data.data.length; a++){\r\n\t\t\t\t\t\tlet itemData = JSON.parse(data.data[a]);\r\n\r\n\t\t\t\t\t\tFirebaseAction.getProductInfo(itemData.key).then((info) => {\r\n\t\t\t\t\t\t\tlet productInfo = JSON.parse(JSON.stringify(this.state.productInfo));\r\n\t\t\t\t\t\t\tproductInfo = {\r\n\t\t\t\t\t\t\t\t...productInfo,\r\n\t\t\t\t\t\t\t\t[itemData.key] : {\r\n\t\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\t\tproductName : JSON.parse(info.productName),\r\n\t\t\t\t\t\t\t\t\tCatagory : JSON.parse(info.Catagory),\r\n\t\t\t\t\t\t\t\t\tproductDescription : JSON.parse(info.productDescription),\r\n\t\t\t\t\t\t\t\t\tsku : JSON.parse(info.sku),\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.setState({productInfo : productInfo},()=>{\r\n\t\t\t\t\t\t\t\tif(a === data.data.length-1){\r\n\t\t\t\t\t\t\t\t\tthis.setState({status : 1});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\r\n\t\t\tcase -1: default: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelError\">Error loading order information</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<LoadingScreen />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelTitle\">About your order placed <span>{this.state.orderData.dateString}</span></div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelStatus\">\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusBig\">Your order is {this.statusTitles[this.state.orderData.status]}</span><br/>\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusSmall\">{this.statusDescriptions[this.state.orderData.status]}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelShipping\">\r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Shipping Address</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.name}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.line1}</span><br/>\r\n\t\t\t\t\t\t{this.state.orderData.address.line2 !== null ? (<span>{this.state.orderData.address.line2}</span>) : <span></span>}<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.city}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.postcode\t}</span><br/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelItems\"> \r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Order Items</span>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.orderData.data.map((data,index) => {\r\n\t\t\t\t\t\t\t\tlet item = JSON.parse(data);\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"vopPanelOrderItem\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemTitle\">(x{item.quantity}) {this.state.productInfo[item.key].productName}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemPrice\">£{this.state.productInfo[item.key].displayPrice} + (£{(this.state.productInfo[item.key].deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\t\r\n\r\n\t\t\t\t\t<div className=\"vopPanelTotal\">\r\n\t\t\t\t\t\tOrder Total: £{(this.state.orderData.paid/100).toFixed(2)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ViewOrder;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport {HashRouter as Router, Route} from 'react-router-dom';\n\nimport firebase from 'Components/Database/Firebase';\nimport AuthProvider from 'Components/Auth/Auth'\n\nimport ProductList from 'Components/Products/ProductList';\nimport Basket from 'Components/Checkout/Basket';\nimport CheckoutSuccess from 'Components/Checkout/CheckoutSuccess';\nimport CheckoutCancel from 'Components/Checkout/CheckoutCancel';\nimport MainPage from 'Components/MainPage';\nimport SignIn from 'Components/Auth/SignIn';\nimport Account from 'Components/Account/Account';\nimport ProductEditor from 'Components/Products/Editor/ProductEditor';\nimport Admin from 'Components/Admin/Admin';\nimport ViewOrder from 'Components/Admin/ViewOrder';\n\nclass MainApp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.dataList = [];\n\t\tthis.state = {status : 0};\n\t\tif(window.localStorage.getItem(\"basket\") === null)\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({status : 0});\n\n\t\tthis.loadData().then(data => {\n\t\t\tthis.dataList = data;\n\t\t\tthis.setState({status : 1});\n\t\t});\n\t}\n\n\tasync loadData(){\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\n\t\tconst mainData = data.docs.map(doc => doc.data());\n\t\tconst idData = data.docs.map(doc => doc.id);\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\n\t\treturn mainData;\n\t}\n\n\trender(){\n\t\tif(this.state.status === 0 || this.context.storeData === null){\n\t\t\treturn <div className=\"Wrapper\">Loading data...</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<AuthProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/\" exact component={MainPage} />\n\t\t\t\t\t<Route path=\"/basket\" exact component={Basket} />\n\t\t\t\t\t<Route path=\"/success\" exact component={CheckoutSuccess} />\n\t\t\t\t\t<Route path=\"/cancel\" exact component={CheckoutCancel} />\n\t\t\t\t\t<Route path=\"/products/:id?\" exact component={ProductList}/>\n\t\t\t\t\t<Route path=\"/signin\" exact component={SignIn}/>\n\t\t\t\t\t<Route path=\"/account\" exact component={Account}/>\n\t\t\t\t\t<Route path=\"/editor/:id?\" exact component={ProductEditor} />\n\t\t\t\t\t<Route path=\"/admin\" exact component={Admin} />\n\t\t\t\t\t<Route path=\"/account/order/:id?\" component={ViewOrder} />\n\t\t\t\t</Router>\n\t\t\t</AuthProvider>\n\t\t);\n\t}\n}\n\nReactDOM.render(<MainApp/>,document.getElementById('root'));"],"sourceRoot":""}