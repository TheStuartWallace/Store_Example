{"version":3,"sources":["Components/Firebase.js","Components/Auth.js","Components/StoreListItem.js","Components/NavigationBar.js","Components/LoadingScreen.js","Components/Catagory.js","Components/FirebaseAction.js","Components/SearchBox.js","Components/StoreItemPage.js","Components/ProductList.js","Components/Basket.js","Components/CheckoutSuccess.js","Components/CheckoutCancel.js","Components/MainPage.js","Components/SignIn.js","Components/PageNavigation.js","Components/Account.js","Components/ProductEditor.js","Components/Admin.js","Components/ViewOrder.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","props","state","currentUser","undefined","storeData","orderHistory","loadStoreData","bind","loadData","auth","onAuthStateChanged","user","setState","uid","then","userData","loadOrderHistory","this","data","firestore","collection","doc","get","mainData","where","docs","map","idData","id","index","Provider","value","children","Component","StoreListItem","redirect","quantity","displayPrice","productPrice","basket","JSON","parse","window","localStorage","getItem","addBasketItem","setItem","stringify","a","length","console","log","parseInt","push","to","className","src","image","alt","productName","onClick","addToBasket","NavigationBar","status","basketAmount","getTotal","total","x","waitForContext","prevProps","prevState","snapshot","context","StoreTitle","displayName","contextType","LoadingScreen","Catagory","keys","Object","vals","values","idkey","indexOf","splice","listKeys","listValue","key","type","name","onChange","e","handleSearch","htmlFor","FirebaseAction","exists","info","update","order","orderData","gt","token","uploadData","adminData","card","email","address","line1","address_line1","line2","address_line2","city","address_city","postcode","address_zip","created","FieldValue","serverTimestamp","paid","set","catch","error","alert","sort","b","event","ref","storage","file","target","files","meta","contentType","task","child","put","sendPasswordResetEmail","add","SearchBox","serverData","dataList","searchInput","createRef","runCheck","getProductList","catKey","catagoryData","element","searchterm","toLowerCase","catagorys","searchCatagory","filter","includes","trueVals","num","split","some","r","checked","handleCatagoryList","placeholder","search","StoreItemPage","openExpandedImage","getData","open","contentEditable","productDescription","deliveryPrice","toFixed","ProductList","match","params","stripePromise","loadStripe","Basket","storedItems","calculateTotal","grandTotal","confirm","replace","oldData","stripe","fetch","method","body","btoa","parseData","throughdata","getBasketData","response","json","session","redirectToCheckout","sessionId","text","item","min","max","defaultValue","changeBasketItemQuantity","removeItem","role","handleClick","CheckoutSuccess","atob","location","setAdminData","CheckoutCancel","MainPage","ColumnLinkLeft","style","background","ColumnBackgroundLeft","ColumnImageLeft","ColumnAltLeft","ColumnLinkCenter","ColumnBackgroundCenter","ColumnImageCenter","ColumnAltCenter","ColumnLinkRight","ColumnBackgroundRight","ColumnImageRight","ColumnAltRight","SignIn","handleSignIn","preventDefault","elements","password","signInWithEmailAndPassword","onSubmit","PageNavigation","currentPage","maxPages","onPageChange","returnValue","prevPage","nextPage","Account","showPage","resetSent","orderStatus","processOrderHistory","resetPassword","currentOrder","currentOrderData","getProductInfo","sku","array","disabled","toDate","toDateString","index2","renderPanel","ProductEditor","changedData","isNaN","savedData","setProductInfo","replaceAll","setProductImage","getDownloadURL","url","saveChanges","html","handleChange","uploadFile","tagName","blankData","unitPerDeliveryCharge","addNewProduct","renderItem","renderSelector","Admin","getInfo","getAdminData","openOrders","odat","oldState","retData","oldArray","columnSettings","advanceOrder","saveSettings","pid","reason","setOrderRefunded","handleSettingsChange","href","dat2","advanceFullfillment","makeRefund","renderColumnSettings","ViewOrder","statusTitles","statusDescriptions","productInfo","getUserOrder","dateString","date","getMonth","getDate","toString","endsWith","getFullYear","itemData","MainApp","Auth","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d355d49c.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyD3EtMzgHnjYat2LbYjYGJi6goQ72UpqLQ\",\r\n\tauthDomain: \"storeexample-1c12e.firebaseapp.com\",\r\n\tdatabaseURL: \"https://storeexample-1c12e.firebaseio.com\",\r\n\tprojectId: \"storeexample-1c12e\",\r\n\tstorageBucket: \"storeexample-1c12e.appspot.com\",\r\n\tmessagingSenderId: \"113670337584\",\r\n\tappId: \"1:113670337584:web:837407a10474f3a3fea9f5\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React from \"react\";\r\nimport firebase from \"./Firebase\";\r\n\r\nexport const AuthContext = React.createContext(null);\r\n\r\nclass AuthProvider extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentUser : undefined,\r\n\t\t\tstoreData : undefined,\r\n\t\t\torderHistory : undefined,\r\n\t\t};\r\n\r\n\t\tthis.loadStoreData = this.loadStoreData.bind(this);\r\n\t\tthis.loadData = this.loadData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tfirebase.auth().onAuthStateChanged(user =>{\r\n\t\t\tthis.setState({currentUser : user});\r\n\t\t\tif(user === null) return;\r\n\t\t\tthis.loadData(user.uid).then(userData =>{\r\n\t\t\t\tthis.setState({userData});\r\n\t\t\t});\r\n\t\t\tthis.loadOrderHistory(user.uid).then(orderHistory =>{\r\n\t\t\t\tthis.setState({orderHistory : orderHistory})\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.loadStoreData().then(data =>{\r\n\t\t\tthis.setState({storeData : data});\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tasync loadOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadStoreData(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadProductList(){\r\n\t\tconst data = await firebase.firestore.collection(\"productList\").get();\r\n\t\tconst mainData = data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={this.state}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AuthProvider;"," import React from 'react';\r\n\r\nimport {Link, Redirect} from 'react-router-dom';\r\n\r\nclass StoreListItem extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {redirect : null};\r\n\t\tthis.props.data.quantity = 0;\r\n\t\tthis.props.data.displayPrice = (this.props.data.productPrice) / 100;\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true})\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.props.data.id){\r\n\t\t\t\t\tconsole.log(parseInt(basket[a].quantity) + 1);\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbasket.push(this.props.data);\r\n\t\tbasket[basket.length-1].quantity = 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect)\t\treturn <Redirect to=\"/basket\"/>\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"sliWrapper\">\r\n\t\t\t\t<Link to={`/products/${this.props.data.id}`} className=\"sli\">\r\n\t\t\t\t\t\t<img className=\"sliImage\" src={this.props.data.image} alt={this.props.data.productName}/>\r\n\t\t\t\t\t\t<div className=\"sliTitle\">{JSON.parse(this.props.data.productName)}</div>\r\n\t\t\t\t\t\t<div className=\"sliPrice\">£{this.props.data.displayPrice}</div>\r\n\t\t\t\t\t\t<button className=\"sliBuy\" onClick={()=>this.addToBasket()}>Buy Now</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default StoreListItem;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass NavigationBar extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tbasketAmount : this.getTotal(),\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotal(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\")), total = 0;\r\n\r\n\t\tfor(let x=0; x<basket.length; x++)\ttotal += parseInt(basket[x].quantity);\r\n\t\treturn total;\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\r\n\trender(){\r\n\t\tif(this.state.status === -1){\r\n\t\t\treturn <div className=\"navWrapper\">Loading...</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"navWrapper\">\r\n\t\t\t\t<Link className=\"navLink\" to=\"/\">\r\n\t\t\t\t\t<button className=\"navButtonHome\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Home</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Home Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/HomeAlt.svg?alt=media&token=d71028d0-a3a6-491f-8690-7193f5289cb5\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t\r\n\t\t\t\t<Link className=\"navLink\" to=\"/products/\">\r\n\t\t\t\t\t<button className=\"navButtonCatagories\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Products</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Product Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/ProductsAlt.svg?alt=media&token=686777dc-56a5-4e92-9f13-25121f7b5030\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<span className=\"navTitle\">{this.context.storeData[1].StoreTitle}</span>\r\n\t\t\t\t{\r\n\t\t\t\t\t(this.context.userData === undefined || this.context.userData === null )? \r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/signin\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">Sign in</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\talt=\"Sign In Navigation Button\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/account\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">{this.context.userData.displayName}'s account</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\t\talt=\"Account Navigation Button\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t<Link className=\"navLink\" to=\"/basket\">\r\n\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Basket ({this.state.basketAmount})</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \t\r\n\t\t\t\t\t\t\t\talt=\"Basket Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/BasketAlt.svg?alt=media&token=9c8a999c-0278-4419-b5ea-111a69866065\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\t\r\n\t}\r\n}\r\n\r\nexport default NavigationBar;","import React from 'react';\r\n\r\nclass LoadingScreen extends React.Component{\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"LoadingScreenWrapper\">\r\n\t\t\t\t<span className=\"LoadingScreenMessage\">Loading...</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingScreen;","import React from 'react';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass Catagory extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\r\n\t\t\tlet keys = Object.keys(this.context.storeData[0]);\r\n\t\t\tlet vals = Object.values(this.context.storeData[0]);\r\n\r\n\t\t\tlet idkey= keys.indexOf(\"id\");\r\n\t\t\tkeys.splice(idkey,1);\r\n\t\t\tvals.splice(idkey,1);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tlistKeys : keys,\r\n\t\t\t\tlistValue : vals,\r\n\t\t\t\tstatus : 1\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return (<div className=\"catWrapper\">Error</div>);\r\n\r\n\t\t\tcase 0: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"catWrapper\">\r\n\t\t\t\t\t<div className=\"catList\" >\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.keys(this.state.listKeys).map((data,index) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"catListTag\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={this.state.listKeys[index]} \r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"Catagorys\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"catCheck\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.props.handleSearch(e)}/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label \tclassName=\"catLabel\" htmlFor={this.state.listKeys[index]}>{this.state.listKeys[index]}</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Catagory;","import firebase from './Firebase';\r\n\r\nclass FirebaseAction{\r\n\r\n\tstatic async getProductInfo(id){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\tstatic async setProductInfo(id,info){\r\n\t\tfirebase.firestore().collection(\"productList\").doc(id).update(info);\r\n\t}\r\n\r\n\tstatic async getProductList(){\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async getUserData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tstatic async getUserOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\treturn data.docs.map(doc => doc.data());\r\n\t}\r\n\r\n\tstatic async getUserOrder(order){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").doc(order).get();\r\n\t\treturn data.data();\r\n\t}\r\n\r\n\tstatic async getStoreSettings(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async addOrderHistory(uid,orderData,gt,token){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<orderData.length; key++){\r\n\t\t\tuploadData.push(JSON.stringify({\r\n\t\t\t\t\"key\":orderData[key].id,\r\n\t\t\t\t\"quantity\" : orderData[key].quantity,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tconst adminData = {\r\n\t\t\tname : token.card.name,\r\n\t\t\t\r\n\t\t\temail : token.email,\r\n\r\n\t\t\taddress : {\r\n\t\t\t\tname : token.card.name,\r\n\t\t\t\tline1 : token.card.address_line1,\r\n\t\t\t\tline2 : token.card.address_line2,\r\n\t\t\t\tcity : token.card.address_city,\r\n\t\t\t\tpostcode : token.card.address_zip,\r\n\t\t\t},\r\n\r\n\t\t\tdata : uploadData,\r\n\t\t\tcreated : firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n\t\t\tstatus : 0,\r\n\r\n\t\t\tuid : uid,\r\n\t\t\ttoken : token.id,\r\n\r\n\t\t\tpaid : gt,\r\n\r\n\t\t};\r\n\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(token.id).set(adminData).catch((error) => {\r\n\t\t\twindow.alert(\"There was an issue placing this order, please contact support\");\r\n\t\t\tconsole.error(\"Unable to write to admin panel! (\"+error+\")\");\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async setOrderRefunded(id){\r\n\t\tawait firebase.firestore().collection(\"adminData\").doc(id).update({status : 4});\r\n\t}\r\n\r\n\tstatic async getAdminData(){\r\n\t\tconst adminData = await firebase.firestore().collection(\"adminData\").where(\"status\",\"<\",3).get().catch((error) => {alert(error); console.log(error)});\r\n\t\tconst mainData = adminData.docs.map(doc => doc.data());\r\n\t\tconst idData = adminData.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\tmainData.sort((a,b) => (a.created > b.created) ? 1 : ((b.created > a.created) ? -1 : 0));\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async setProductImage(id,event){\r\n\t\tconst ref = firebase.storage().ref();\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst meta = {contentType : file.type};\r\n\t\tconst name = id;\r\n\r\n\t\tconst task = ref.child(name).put(file,meta);\r\n\t\t\r\n\t\treturn await task;\r\n\t}\r\n\r\n\tstatic async advanceOrder(order){\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(order.id).update({\r\n\t\t\tstatus : (order.status + 1)\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\t\r\n\t}\r\n\r\n\tstatic async saveSettings(e){\r\n\t\tfirebase.firestore().collection(\"storeSettings\").doc(\"StoreSettings\").update(e)\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async resetPassword(e){\r\n\t\tawait firebase.auth().sendPasswordResetEmail(e);\r\n\t}\r\n\r\n\tstatic async setAdminData(data){\r\n\t\tfirebase.firestore().collection(\"adminData\").add({...data, created : firebase.firestore.FieldValue.serverTimestamp()}).catch(console.error);\r\n\t}\r\n}\r\n\r\nexport default FirebaseAction;","import React from 'react';\r\n\r\nimport StoreListItem from './StoreListItem';\r\nimport NavigationBar from './NavigationBar';\r\nimport Catagory from './Catagory';\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\n\r\nclass SearchBox extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {status : 0};\r\n\t\tthis.serverData = [];\r\n\t\tthis.dataList = [];\r\n\r\n\t\tthis.searchInput = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\trunCheck(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.serverData = data; \r\n\t\t\t\tthis.dataList = data;\r\n\t\t\t\r\n\t\t\t\tlet catagoryData = {};\r\n\t\t\t\tlet catKey;\r\n\r\n\t\t\t\tfor(catKey in this.context.storeData[0]){\r\n\t\t\t\t\tcatagoryData = {\r\n\t\t\t\t\t\t...catagoryData,\r\n\t\t\t\t\t\t[catKey] : false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({dataList : catagoryData, status : 1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsearch(element){\r\n\t\tthis.setState({status : 0});\r\n\t\tconst searchterm = element.target.value.toLowerCase();\r\n\r\n\t\tif(!this.state.catagorys){\r\n\t\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.searchCatagory();\r\n\t\t\tthis.dataList = this.dataList.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\tsearchCatagory(){\r\n\t\tthis.setState({status : 0});\r\n\r\n\t\tlet a = this;\r\n\r\n\t\tlet trueVals = Object.keys(this.state.dataList).filter(function(num){\r\n\t\t\treturn a.state.dataList[num];\r\n\t\t});\r\n\r\n\t\tif(trueVals.length === 0){\r\n\t\t\tthis.dataList = this.serverData;\r\n\t\t\tthis.setState({status : 1, catagorys : false});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\tlet prodCat = JSON.parse(data.Catagory).split(\"+\");\r\n\t\t\treturn prodCat.some(r=>trueVals.includes(r));\r\n\t\t});\r\n\t\t\r\n\t\tthis.setState({status : 1, catagorys : true});\r\n\t}\r\n\r\n\thandleCatagoryList(data){\r\n\t\tthis.setState({\r\n\t\t\tdataList : {\r\n\t\t\t\t...this.state.dataList,\r\n\t\t\t\t[data.target.id] : data.target.checked,\r\n\t\t\t}\r\n\t\t},()=>this.searchCatagory());\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"schWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"schContainer\">\r\n\t\t\t\t\t\t<div className=\"schLeft\">\r\n\t\t\t\t\t\t\t<Catagory handleSearch={(e) => this.handleCatagoryList(e)}/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"schRight\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"schInput\" placeholder=\"Search...\" onChange={(e)=>this.search(e)}/><br/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"schResult\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.dataList.map((data,index) => (\r\n\t\t\t\t\t\t\t\t\t<StoreListItem key={index} data={data} />\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBox;","import React from 'react'\r\nimport { Redirect} from \"react-router\";\r\nimport firebase from './Firebase';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass StoreItemPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false};\r\n\t\tthis.openExpandedImage = this.openExpandedImage.bind(this);\r\n\t\tthis.addToBasket = this.addToBasket.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.props.id)\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\r\n\t\tthis.loadData().then(data => {\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.data.id = this.props.id;\r\n\t\t\tthis.data.quantity = 0;\r\n\t\t\tthis.data.displayPrice = this.data.productPrice / 100;\r\n\t\t\tconsole.log(this.data);\r\n\t\t\tthis.setState({status:1});\r\n\t\t});\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true});\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbasket.push(this.data);\r\n\t\tbasket[basket.length-1].quantity = parseInt(basket[basket.length-1].quantity) + 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\tasync loadData(){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(this.props.id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\topenExpandedImage(){\r\n\t\twindow.open(this.data.image);\r\n\t}\r\n\r\n\trender(){\r\n\t\tconsole.log(this.data);\r\n\t\tif(this.state.redirect)\treturn <Redirect to=\"/basket\" />\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPageWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t\t<div className=\"sipLeft\">\r\n\t\t\t\t\t\t\t\t<div contentEditable=\"true\" className=\"sipName\">{JSON.parse(this.data.productName)}</div><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<img \tonClick={()=>window.open(this.data.image,'popup','scrollbars=no')} \t\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sipImage\" \r\n\t\t\t\t\t\t\t\t\t\tsrc={this.data.image} \r\n\t\t\t\t\t\t\t\t\t\talt={`${this.data.productName}`} />\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"sipRight\">\r\n\t\t\t\t\t\t\t\t<div className=\"sipInfo\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipDesc\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tJSON.parse(this.data.productDescription).split(\"\\n\").map((data,index) =>(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{data}<br/></span>\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sipBoxPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipPrice\">£{this.data.displayPrice}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipItemPP\">(£{(this.data.deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"sipBuyButton\" onClick={this.addToBasket}>Add to basket</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default StoreItemPage;","import React from 'react';\r\n\r\nimport SearchBox from './SearchBox';\r\nimport StoreItemPage from './StoreItemPage';\r\n\r\nclass ProductList extends React.Component{\r\n\trender(){\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn <SearchBox />\r\n\t\t}else{\r\n\t\t\treturn <StoreItemPage id={this.props.match.params.id}/>\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductList;","import React from 'react'\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\t\r\nconst stripePromise = loadStripe('pk_test_51HHEl2HbWsI0wL0616xJL9FkVOSuvpDFAfYvYfwwmOv044YOH4npf2jEko9ISFcouW3Y5ETqkQMWxeizaDANXNTL0018qa39p8');\r\n\r\nclass Basket extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {storedItems : JSON.parse(window.localStorage.getItem(\"basket\")),};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tcalculateTotal(){\r\n\t\tlet total = 0;\r\n\r\n\t\tfor(let a=0; a<this.state.storedItems.length; a++){\r\n\t\t\ttotal = total + (this.state.storedItems[a].productPrice * this.state.storedItems[a].quantity);\r\n\t\t\ttotal = total + (this.state.storedItems[a].deliveryPrice * this.state.storedItems[a].quantity);\r\n\t\t}\r\n\r\n\t\tthis.setState({grandTotal:total});\r\n\t}\r\n\r\n\tremoveItem(e){\r\n\t\tif(window.confirm(\"This will remove all of this item from your basket, are you sure?\")){\r\n\t\t\tlet data = this.state.storedItems;\r\n\r\n\t\t\tfor(let a=0; a<data.length; a++){\r\n\t\t\t\tif(data[a].id === e.target.id)\tdata.splice(a,1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({storedItems : data}, () => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\t\tthis.calculateTotal();\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBasketItemQuantity(e){\r\n\t\te.target.value = e.target.value.replace(\".\"\t,\"\");\r\n\t\te.target.value = e.target.value.replace(\",\",\"\");\r\n\t\te.target.value = e.target.value.replace(\" \",\"\");\r\n\r\n\r\n\t\tlet oldData = this.state.storedItems;\r\n\r\n\t\tfor(let a=0; a<oldData.length; a++){\r\n\t\t\tif(oldData[a].id === e.target.id){\r\n\t\t\t\toldData[a].quantity = e.target.value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({storedItems : oldData},() => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tgetBasketData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"key\":this.state.storedItems[key].id,\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tparseData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"name\" : JSON.parse(this.state.storedItems[key].productName),\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t\t\"price\" : this.state.storedItems[key].productPrice,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tasync handleClick(event){\r\n\t\tconst stripe = await stripePromise;\r\n\t\tconst response = await fetch('http://www.bystuart.co.uk/store-example/checkout-session', { method: 'POST', body:JSON.stringify({\r\n\t\t\tuid : btoa(this.context.currentUser.uid),\r\n\t\t\tdata : btoa(this.parseData()),\r\n\t\t\tthroughdata : btoa(this.getBasketData()),\r\n\t\t})});\r\n\r\n\t\tconst session = await response.json();\r\n\t\tconsole.log(session.id);\r\n\t\tconst result = await stripe.redirectToCheckout({\r\n\t\t\tsessionId: session.id,\r\n\t\t});\r\n\r\n\t\tif (result.error) {\r\n\t\t\tconsole.error(response.text());\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"basketWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"basketContainer\">\r\n\t\t\t\t\t<div className=\"basketTopBar\">\r\n\t\t\t\t\t\tMy Basket\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketList\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.storedItems.map((item,index) => (\r\n\t\t\t\t\t\t\t\t<div className=\"basketListItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemImageCont\"><img className=\"basketListItemImage\" alt=\"Store Item\" src={item.image}/></div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemName\">{JSON.parse(item.productName)}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPrice\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.productPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceDelivery\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.deliveryPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemQuantity\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityInput\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.quantity} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.changeBasketItemQuantity(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemRemove\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityRemove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"&#10007;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => this.removeItem(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketBottomBar\">\r\n\t\t\t\t\t\tYour total comes to £{(this.state.grandTotal/100).toFixed(2)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className=\"basketCheckoutButton\" role=\"link\" onClick={(e)=>this.handleClick(e)}>\r\n\t\t\t\t\t\t\tProceed to Checkout\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Basket;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport FirebaseAction from './FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth'\r\n\r\nclass CheckoutSuccess extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t\tdata : JSON.parse(atob(this.props.location.search.split(\"=\")[1])),\r\n\t\t};\r\n\r\n\t\tFirebaseAction.setAdminData(this.state.data);\r\n\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tHello, {this.state.data.email}!<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tSince this is an example store, no actual payment was taken.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutSuccess;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth'\r\n\r\nclass CheckoutCancel extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t};\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tUnfortunately an error has occured or the action was cancelled.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutCancel;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport {AuthContext} from './Auth';\r\n\r\n\r\nclass MainPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {status : -1};\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <LoadingScreen />\r\n\t\t \r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t<div className=\"MainPageColumnWrapper\">\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkLeft} className=\"MainPageColumnLeft\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundLeft}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageLeft} alt={this.context.storeData[1].ColumnAltLeft}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkCenter} className=\"MainPageColumnCenter\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundCenter}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageCenter} alt={this.context.storeData[1].ColumnAltCenter}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkRight} className=\"MainPageColumnRight\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundRight}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageRight} alt={this.context.storeData[1].ColumnAltRight}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport firebase from './Firebase'\r\nimport NavigationBar from './NavigationBar';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass SignIn extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t\tthis.handleSignIn = this.handleSignIn.bind(this);\r\n\t}\r\n\r\n\tasync handleSignIn(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {email,password} = event.target.elements; \r\n\t\ttry{\r\n\t\t\tawait firebase.auth().signInWithEmailAndPassword(email.value,password.value);\r\n\t\t\tthis.setState({redirect : true})\r\n\t\t}catch(error){\r\n\t\t\talert(error);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to=\"/\"/>\r\n\t\treturn (\r\n\t\t\t<div className=\"SignInWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={this.handleSignIn}>\r\n\t\t\t\t\t<label>Email<br/><input type=\"email\" name=\"email\" placeholder=\"example@example.com\"/></label><br/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<label>Password<br/><input type=\"password\" name=\"password\" placeholder=\"password\"/></label><br/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\n\r\nclass PageNavigation extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage : 0,\r\n\t\t\tmaxPages : this.props.maxPages,\r\n\t\t};\r\n\t}\r\n\r\n\tprevPage(){\r\n\t\tif(this.state.currentPage - 1 >= 0){\r\n\t\t\tthis.setState({currentPage : this.state.currentPage - 1},\r\n\t\t\t() => {this.props.onPageChange(this.state.currentPage)});\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.state.currentPage + 1 < this.state.maxPages){\r\n\t\t\tthis.setState(\r\n\t\t\t\t{currentPage : this.state.currentPage + 1},\r\n\t\t\t\t()=>{this.props.onPageChange(this.state.currentPage)}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tlet returnValue = [];\r\n\r\n\t\treturnValue.push(<div key=\"leftCap\" onClick={()=>this.prevPage()} className=\"GlobalNavBallLeftCap\"></div>);\r\n\t\t\r\n\r\n\t\tfor(let a=0; a<this.state.maxPages; a++){\r\n\t\t\treturnValue.push(\r\n\t\t\t\t<div \tonClick={()=>this.setState({currentPage : a},() => {this.props.onPageChange(this.state.currentPage)})}\r\n\t\t\t\t\t\tkey={a} \r\n\t\t\t\t\t\tclassName={(a === this.state.currentPage ? \"GlobalNavBallFilled\" : \"GlobalNavBall\")}>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturnValue.push(<div key=\"rightCap\" onClick={() => this.nextPage()} className=\"GlobalNavBallRightCap\"></div>);\r\n\t\t\r\n\t\treturn (<div className=\"GlobalPageNavigation\">{returnValue}</div>);\r\n\t}\r\n}\r\n\r\nexport default PageNavigation;","import React from 'react';\r\n\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport PageNavigation from './PageNavigation';\r\n\r\nclass Account extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tshowPage : 0,\r\n\r\n\t\t\tmaxPages : 2,\r\n\r\n\t\t\tresetSent : false,\r\n\t\t\torderHistory : undefined,\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.userData && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1){this.setState({orderHistory : [], status : -2},()=>this.processOrderHistory());}}\r\n\r\n\tasync resetPassword(){\r\n\t\tFirebaseAction.resetPassword(this.context.currentUser.email)\r\n\t\tthis.setState({resetSent : true});\r\n\t}\r\n\r\n\tasync processOrderHistory(){\r\n\t\tfor(let order=0; order<this.context.orderHistory.length; order++){\t\t\t\r\n\t\t\tlet currentOrder = [];\r\n\r\n\t\t\tlet currentOrderData = this.context.orderHistory[order];\r\n\t\t\t\r\n\t\t\tfor(let item=0; item<currentOrderData.data.length; item++){\r\n\t\t\t\tlet info = JSON.parse(currentOrderData.data[item]);\r\n\r\n\t\t\t\tawait FirebaseAction.getProductInfo(info.key).then((data) => {\r\n\t\t\t\t\tcurrentOrder.push({\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\tproductName : JSON.parse(data.productName),\r\n\t\t\t\t\t\tsku : JSON.parse(data.sku),\r\n\t\t\t\t\t\tproductDescription : JSON.parse(data.productDescription),\r\n\t\t\t\t\t\tCatagory : JSON.parse(data.Catagory),\r\n\t\t\t\t\t\tquantity : info.quantity,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet array = this.state.orderHistory;\r\n\t\t\tarray.push(currentOrder);\r\n\t\t\tthis.setState({orderHistory : array});\r\n\t\t}\r\n\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\t\t\tcase 0: default: \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t\t<div className=\"accPanelTitle\">Display Settings</div>\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accDisplayName\">Display Name</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accDisplayName\" \r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.userData.displayName}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accEmail\">Email</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accEmail\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.currentUser.email}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accResetPassword\">Password</label><br/>\r\n\t\t\t\t\t\t\t<button id=\"accResetPassword\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelButton\" \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.resetSent} \r\n\t\t\t\t\t\t\t\t\tonClick={() => this.resetPassword()}>Change Password</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\tcase 1:\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t<div className=\"accPanelTitle\">Order History</div><br/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.context.orderHistory.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link key={index} className=\"accPanelItem\" to={\"/account/order/\"+data.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"accPanelItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"GlobalSpacer\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemPlaced\">Placed: {data.created.toDate().toDateString()}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderHistory[index].map((item,index2) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"accOHItemInfo\" key={index2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tItem #{index2+1} - {item.productName}({item.quantity})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemStatus\">Status: {this.state.orderStatus[data.status]}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemTotal\">Paid: £{data.paid/100}</span> \r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -3: default: return <span>Error!</span>;\r\n\r\n\t\tcase -1: case -2: return <LoadingScreen />\r\n\r\n\t\tcase 0: \r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t{this.renderPanel()}\r\n\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Account;","import React from 'react';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport firebase from './Firebase';\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\n\r\nclass ProductEditor extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false, changedData : {}};\r\n\t\tthis.changedData = {};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tFirebaseAction.getProductInfo(this.props.match.params.id).then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.data.id = this.props.match.params.id;\r\n\t\t\t\t\r\n\t\t\t\tif(isNaN(this.data.productPrice)){\r\n\t\t\t\t\tconsole.error(\"data.productPrice was NaN, reset to 0\");\r\n\t\t\t\t\tthis.data.productPrice = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.displayPrice = parseInt(this.data.productPrice) / 100;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({changedData : this.data});\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsaveChanges(){\r\n\t\tthis.savedData = this.state.changedData;\r\n\t\tthis.savedData.productPrice = parseInt(JSON.parse(this.savedData.productPrice));\r\n\t\tthis.savedData.deliveryPrice = parseInt(JSON.parse(this.savedData.deliveryPrice));\r\n\t\tFirebaseAction.setProductInfo(this.props.match.params.id,this.savedData);\r\n\t}\r\n\r\n\thandleChange(element,name){\r\n\t\tlet data;\r\n\r\n\t\tif(name === \"productDescription\"){\r\n\t\t\tdata = element.target.value;\r\n\t\t\tdata = data.replaceAll(\"<div>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"</div>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"<br>\",\"\\n\");\r\n\t\t}else{\r\n\t\t\tdata = element.target.value;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tchangedData : {\r\n\t\t\t\t...this.state.changedData,\r\n\t\t\t\t[name] : JSON.stringify(data),\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tuploadFile(event){\r\n\r\n\t\tlet dat = FirebaseAction.setProductImage(this.props.match.params.id,event);\r\n\t\tdat.then(snapshot => snapshot.ref.getDownloadURL())\r\n\t\t\t.then((url) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangedData : {\r\n\t\t\t\t\t\t...this.state.changedData,\r\n\t\t\t\t\t\timage:url,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.data.image = this.state.changedData.image;\r\n\t\t\t\tthis.saveChanges();\r\n\t\t}).catch(console.error);\t\t\r\n\t}\r\n\r\n\trenderItem(){\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPageWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t\t<div className=\"sipLeft\">\r\n\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productName)} \r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"productName\")}\r\n\t\t\t\t\t\t\t\t\tclassName=\"sipName\"/><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<img \tonClick={()=>window.open(this.state.changedData.image,'popup','scrollbars=no')} \t\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sipImage\" \r\n\t\t\t\t\t\t\t\t\t\tsrc={this.state.changedData.image} \r\n\t\t\t\t\t\t\t\t\t\talt={`${this.state.changedData.productName}`} />\r\n\r\n\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.uploadFile(e)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"sipRight\">\r\n\t\t\t\t\t\t\t\t<div className=\"sipInfo\">\r\n\t\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"pedDesc\" \r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleChange(e,\"productDescription\")}\r\n\t\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productDescription).replaceAll(\"\\n\",\"<br>\")}/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sipBoxPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t£<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml={\"\"+JSON.parse(this.state.changedData.productPrice)} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"productPrice\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"span\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipItemPP\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t(£\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml={\"\"+JSON.parse(this.state.changedData.deliveryPrice)} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"deliveryPrice\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"span\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\tP&P)</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"sipBuyButton\" onClick={()=>this.saveChanges()}>Save Changes</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync addNewProduct(){\r\n\t\tconst blankData = {\r\n\t\t\tproductName : \"\\\"\\\"\",\r\n\t\t\tproductDescription : \"\\\"\\\"\",\r\n\t\t\tCatagory : \"\\\"\\\"\",\r\n\t\t\tdeliveryPrice : 0,\r\n\t\t\tproductPrice : 0,\r\n\t\t\tsku : \"\\\"\\\"\",\r\n\t\t\timage : \"\\\"\\\"\",\r\n\t\t\tunitPerDeliveryCharge : 0,\r\n\t\t};\r\n\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").add(blankData);\r\n\t\treturn <Redirect to={`/editor/${data.id}`} />\r\n\t}\r\n\r\n\trenderSelector(){\r\n\t\treturn (\r\n\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"productEditorPageWrapper\">\r\n\t\t\t\t\t<span className=\"productEditorListTitle\">Edit specific product</span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.data.map((data,index) => (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"productEditorListContainer\">\r\n\t\t\t\t\t\t\t\t\t<Link key={index} to={`/editor/${data.id}`}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"productEditorListName\">{data.productName}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"productEditorListID\">[{data.id}]</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<button className=\"productEditorListAddButton\" onClick={() => this.addNewProduct()}>Add new item</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn this.renderSelector();\r\n\t\t}else{\r\n\t\t\treturn this.renderItem();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductEditor;","import React from 'react';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport PageNavigation from './PageNavigation';\r\n\r\nclass Admin extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t\tstatus : -1,\r\n\r\n\t\t\tshowPage : 0,\r\n\t\t\tmaxPages : 2\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tasync getInfo(){\r\n\t\tif(\tthis.context !== undefined && this.context.currentUser !== undefined && this.context !== null && this.context.currentUser !== null && this.context.storeData !== undefined && this.context.storeData[0] !== undefined && this.context.storeData[1] !== undefined && this.state.status === -1){\r\n\t\t\tif(this.state.orderData !== undefined) return; \r\n\t\t}\r\n\r\n\t\tthis.setState({orderData : [], status : 0});\r\n\t\t\t\r\n\t\t\tawait FirebaseAction.getAdminData().then((data) => {\r\n\t\t\t\tthis.setState({openOrders : data},()=>{\r\n\r\n\t\t\t\t\tthis.state.openOrders.map(async (odat,index)=>{\r\n\t\t\t\t\t\tlet oldState = this.state.orderData;\r\n\t\t\t\t\t\toldState.push([]);\r\n\r\n\t\t\t\t\t\tthis.setState({orderData : oldState},()=>{\r\n\t\t\t\t\t\t\todat.data.map(async(order)=>{\r\n\t\t\t\t\t\t\t\tlet key = JSON.parse(order).key;\r\n\r\n\t\t\t\t\t\t\t\tawait FirebaseAction.getProductInfo(key).then((retData)=>{\r\n\t\t\t\t\t\t\t\t\tlet oldArray = this.state.orderData;\r\n\t\t\t\t\t\t\t\t\toldArray[index].push(retData);\r\n\t\t\t\t\t\t\t\t\tthis.setState({orderData : oldArray});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthis.setState({columnSettings : this.context.storeData[1], status : 1});\r\n\t}\r\n\t\r\n\tadvanceFullfillment(index){\r\n\t\tlet order = this.state.openOrders[index];\r\n\t\tif(order.status < 3){\r\n\t\t\tFirebaseAction.advanceOrder(order).then(() => {\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSettingsChange(e){\r\n\t\tthis.setState({\r\n\t\t\tcolumnSettings : {\r\n\t\t\t\t...this.state.columnSettings,\r\n\t\t\t\t[e.target.name] : e.target.value.replace(/\\n/g, '')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveSettings(){\r\n\t\tFirebaseAction.saveSettings(this.state.columnSettings);\r\n\t}\r\n\r\n\tasync makeRefund(id, pid){\r\n\t\tconst response = await fetch('http://localhost:4242/make-refund', { method: 'POST', body: btoa(pid) });\r\n\t\tconst data = await response.json();\r\n\r\n\t\tif(data.status === \"failed\"){\r\n\t\t\talert(\"Unable to refund, \"+data.reason);\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tFirebaseAction.setOrderRefunded(id).then(()=>{\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trenderColumnSettings(name){\r\n\t\treturn (\r\n\t\t\t<div className={\"admColumnSettings\"+name}>\r\n\t\t\t\t<span className=\"admColumnSettingsTitle\">{name} Column Settings</span><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"admColumnSettingImage\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnImage\"+name}>Image Link for {name} Column</label>\r\n\t\t\t\t\t<textarea \ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"admColumnSettingsInputLink\"\r\n\t\t\t\t\t\t\t\tname={\"ColumnImage\"+name}\r\n\t\t\t\t\t\t\t\tid={\"ColumnImage\"+name} \r\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnImage\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingAlt\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnAlt\"+name}>Alt text for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnAlt\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnAlt\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnAlt\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingLink\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnLink\"+name}>Link for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnLink\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnLink\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnLink\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingColor\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnBackground\"+name}>Background Color for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"color\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnBackground\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\r\n\t\t\tdefault: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 0: \r\n\t\t\t\tif(this.state.openOrders.length === 0){\r\n\t\t\t\t\treturn (<div className=\"admPanel\">No current open orders.</div>);\r\n\t\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.openOrders.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"admOI\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOITitle\">Order #{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIBio\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIBioTitle\">Recipient Information</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIName\">Name: {data.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIEmail\"><a href={\"mailto:\"+data.email}>Email: {data.email}</a></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIAddress\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIAddressTitle\">Shipping Address</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.line1}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{data.address.line2 !== null && <span className=\"admOIAddressLine\">{data.address.line2}</span>}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.city}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.postcode}</span><br/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderData[index].map((dat2)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"AdmOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{JSON.parse(dat2.productName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIStatus\"> \r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIStatusText\">Status: {this.state.orderStatus[data.status]}</span>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIAdvanceOrder\" disabled={data.status >= 3} onClick={() => this.advanceFullfillment(index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status >= 3 && <b>Completed Order</b>}\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status < 3 && <b>Advance to {this.state.orderStatus[data.status+1]}</b>}\r\n\t\t\t\t\t\t\t\t\t\t</button><br/>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIRefund\" onClick={()=>this.makeRefund(data.id, data.pid)}>Issue Refund</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t<div className=\"admPanelColumnSettings\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<label htmlFor=\"StoreTitle\">Store Title</label><br/>\r\n\t\t\t\t\t\t<input type=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tid=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.columnSettings.StoreTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"admColumnSettingsWrapper\">\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Left\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Center\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Right\")}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button onClick={()=>this.saveSettings()}>Save Changes</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: case 0: default: return (<LoadingScreen />);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t\t<div className=\"admWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\r\n\t\t\t\t\t\t{this.renderPanel()}\r\n\r\n\t\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\n\r\nimport FirebaseAction from './FirebaseAction';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass ViewOrder extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.statusTitles = [\r\n\t\t\t\"Placed\",\r\n\t\t\t\"Dispatched\",\r\n\t\t\t\"Out for delivery\",\r\n\t\t\t\"Complete\",\r\n\t\t\t\"Returned\"\r\n\t\t];\r\n\r\n\t\tthis.statusDescriptions = [\r\n\t\t\t\"Placed, in the system ready to be dispatched\",\r\n\t\t\t\"Dispatched, ready to be sent out for delivery\",\r\n\t\t\t\"Out for delivery, with our postal carrier\",\r\n\t\t\t\"Completed, order has been recieved\",\r\n\t\t\t\"Refunded, Sorry if there was a problem with your order\"\r\n\t\t];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tid : this.props.match.params.id,\r\n\t\t\tproductInfo : {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getUserOrder(this.state.id).then((data) => {\r\n\t\t\t\t\r\n\t\t\t\tif(data === undefined){\r\n\t\t\t\t\tthis.setState({status : -1});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet dateString = \"\";\r\n\t\t\t\t\tlet date = data.created.toDate();\r\n\r\n\t\t\t\t\tconst month = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\n\t\t\t\t\tdateString = month[date.getMonth()]+\" \"+date.getDate();\r\n\r\n\t\t\t\t\tif(date.getDate().toString().endsWith(\"1\")){\r\n\t\t\t\t\t\tdateString = dateString+\"st \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"2\")){\r\n\t\t\t\t\t\tdateString = dateString+\"nd \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"3\")){\r\n\t\t\t\t\t\tdateString = dateString+\"rd \";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdateString = dateString+\"th \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdateString = dateString + date.getFullYear();\r\n\r\n\t\t\t\t\tthis.setState({orderData : {...data,dateString : dateString}});\r\n\r\n\t\t\t\t\tfor(let a=0; a<data.data.length; a++){\r\n\t\t\t\t\t\tlet itemData = JSON.parse(data.data[a]);\r\n\r\n\t\t\t\t\t\tFirebaseAction.getProductInfo(itemData.key).then((info) => {\r\n\t\t\t\t\t\t\tlet productInfo = JSON.parse(JSON.stringify(this.state.productInfo));\r\n\t\t\t\t\t\t\tproductInfo = {\r\n\t\t\t\t\t\t\t\t...productInfo,\r\n\t\t\t\t\t\t\t\t[itemData.key] : {\r\n\t\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\t\tproductName : JSON.parse(info.productName),\r\n\t\t\t\t\t\t\t\t\tCatagory : JSON.parse(info.Catagory),\r\n\t\t\t\t\t\t\t\t\tproductDescription : JSON.parse(info.productDescription),\r\n\t\t\t\t\t\t\t\t\tsku : JSON.parse(info.sku),\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.setState({productInfo : productInfo},()=>{\r\n\t\t\t\t\t\t\t\tif(a === data.data.length-1){\r\n\t\t\t\t\t\t\t\t\tthis.setState({status : 1});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\r\n\t\t\tcase -1: default: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelError\">Error loading order information</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<LoadingScreen />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelTitle\">About your order placed <span>{this.state.orderData.dateString}</span></div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelStatus\">\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusBig\">Your order is {this.statusTitles[this.state.orderData.status]}</span><br/>\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusSmall\">{this.statusDescriptions[this.state.orderData.status]}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelShipping\">\r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Shipping Address</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.name}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.line1}</span><br/>\r\n\t\t\t\t\t\t{this.state.orderData.address.line2 !== null ? (<span>{this.state.orderData.address.line2}</span>) : <span></span>}<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.city}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.postcode\t}</span><br/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelItems\"> \r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Order Items</span>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.orderData.data.map((data,index) => {\r\n\t\t\t\t\t\t\t\tlet item = JSON.parse(data);\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"vopPanelOrderItem\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemTitle\">(x{item.quantity}) {this.state.productInfo[item.key].productName}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemPrice\">£{this.state.productInfo[item.key].displayPrice} + (£{(this.state.productInfo[item.key].deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\t\r\n\r\n\t\t\t\t\t<div className=\"vopPanelTotal\">\r\n\t\t\t\t\t\tOrder Total: £{(this.state.orderData.paid/100).toFixed(2)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ViewOrder;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {HashRouter as Router, Route} from 'react-router-dom';\n\nimport firebase from './Components/Firebase';\nimport AuthProvider from './Components/Auth'\n\nimport ProductList from './Components/ProductList';\nimport Basket from './Components/Basket';\nimport CheckoutSuccess from './Components/CheckoutSuccess';\nimport CheckoutCancel from './Components/CheckoutCancel';\nimport MainPage from './Components/MainPage';\nimport SignIn from './Components/SignIn';\nimport Account from './Components/Account';\nimport ProductEditor from './Components/ProductEditor';\nimport Admin from './Components/Admin';\nimport ViewOrder from './Components/ViewOrder';\n\nclass MainApp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.dataList = [];\n\t\tthis.state = {status : 0};\n\t\tif(window.localStorage.getItem(\"basket\") === null)\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({status : 0});\n\n\t\tthis.loadData().then(data => {\n\t\t\tthis.dataList = data;\n\t\t\tthis.setState({status : 1});\n\t\t});\n\t}\n\n\tasync loadData(){\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\n\t\tconst mainData = data.docs.map(doc => doc.data());\n\t\tconst idData = data.docs.map(doc => doc.id);\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\n\t\treturn mainData;\n\t}\n\n\trender(){\n\t\tif(this.state.status === 0 || this.context.storeData === null){\n\t\t\treturn <div className=\"Wrapper\">Loading data...</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<AuthProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/\" exact component={MainPage} />\n\t\t\t\t\t<Route path=\"/basket\" exact component={Basket} />\n\t\t\t\t\t<Route path=\"/success\" exact component={CheckoutSuccess} />\n\t\t\t\t\t<Route path=\"/cancel\" exact component={CheckoutCancel} />\n\t\t\t\t\t<Route path=\"/products/:id?\" exact component={ProductList}/>\n\t\t\t\t\t<Route path=\"/signin\" exact component={SignIn}/>\n\t\t\t\t\t<Route path=\"/account\" exact component={Account}/>\n\t\t\t\t\t<Route path=\"/editor/:id?\" exact component={ProductEditor} />\n\t\t\t\t\t<Route path=\"/admin\" exact component={Admin} />\n\t\t\t\t\t<Route path=\"/account/order/:id?\" component={ViewOrder} />\n\t\t\t\t</Router>\n\t\t\t</AuthProvider>\n\t\t);\n\t}\n}\n\nReactDOM.render(<MainApp/>,document.getElementById('root'));"],"sourceRoot":""}