{"version":3,"sources":["Components/Database/Firebase.js","Components/Auth/Auth.jsx","Components/Navigation/NavigationBar.jsx","Components/Util/LoadingScreen.jsx","Components/Products/Catagory.jsx","Components/Database/FirebaseAction.js","Components/Products/SearchBox.jsx","Components/Products/ProductPage.jsx","Components/Products/ProductList.jsx","Components/Checkout/Basket.jsx","Components/Checkout/CheckoutSuccess.jsx","Components/Checkout/CheckoutCancel.jsx","Components/MainPage.jsx","Components/Auth/SignIn.jsx","Components/Navigation/PageNavigation.jsx","Components/Account/Account.jsx","Components/Products/Editor/ProductEditor.jsx","Components/Admin/Admin.jsx","Components/Admin/ViewOrder.jsx","index.jsx"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","props","state","currentUser","undefined","storeData","orderHistory","loadStoreData","bind","loadData","auth","onAuthStateChanged","user","setState","uid","then","userData","loadOrderHistory","this","data","firestore","collection","doc","get","mainData","where","docs","map","idData","id","index","Provider","value","children","Component","NavigationBar","status","basketAmount","getTotal","basket","JSON","parse","window","localStorage","getItem","total","x","length","parseInt","quantity","waitForContext","prevProps","prevState","snapshot","context","className","to","alt","src","StoreTitle","displayName","contextType","LoadingScreen","Catagory","keys","Object","vals","values","idkey","indexOf","splice","listKeys","listValue","key","type","name","onChange","e","handleSearch","htmlFor","FirebaseAction","exists","info","update","delete","catch","console","error","order","orderData","gt","token","uploadData","push","stringify","adminData","card","email","address","line1","address_line1","line2","address_line2","city","address_city","postcode","address_zip","created","FieldValue","serverTimestamp","paid","set","alert","log","sort","a","b","event","ref","storage","file","target","files","meta","contentType","task","child","put","sendPasswordResetEmail","add","SearchBox","serverData","dataList","searchInput","createRef","runCheck","getProductList","catKey","catagoryData","element","searchterm","toLowerCase","catagorys","searchCatagory","filter","productName","includes","trueVals","num","split","some","r","checked","addBasketItem","setItem","handleCatagoryList","placeholder","search","image","displayPrice","onClick","addToBasket","ProductPage","redirect","openExpandedImage","getData","productPrice","open","des","productDescription","pos","getDescription","ProductList","match","params","stripePromise","loadStripe","Basket","checkoutText","storedItems","calculateTotal","deliveryPrice","grandTotal","confirm","replace","oldData","stripe","fetch","method","body","btoa","parseData","throughdata","getBasketData","response","json","session","redirectToCheckout","sessionId","result","message","text","item","toFixed","min","max","defaultValue","changeBasketItemQuantity","removeItem","role","handleClick","CheckoutSuccess","atob","location","setAdminData","CheckoutCancel","MainPage","style","background","ColumnBackgroundLeft","ColumnLinkLeft","ColumnImageLeft","ColumnAltLeft","ColumnBackgroundCenter","ColumnLinkCenter","ColumnImageCenter","ColumnAltCenter","ColumnBackgroundRight","ColumnLinkRight","ColumnImageRight","ColumnAltRight","SignIn","handleSignIn","preventDefault","elements","password","signInWithEmailAndPassword","onSubmit","PageNavigation","currentPage","maxPages","onPageChange","returnValue","prevPage","nextPage","Account","showPage","resetSent","orderStatus","processOrderHistory","resetPassword","currentOrder","currentOrderData","getProductInfo","sku","array","disabled","toDate","toDateString","index2","renderPanel","ProductEditor","changedData","isNaN","savedData","setProductInfo","replaceAll","endsWith","slice","substr","toString","setProductImage","getDownloadURL","url","saveChanges","uploadFile","html","handleChange","tagName","blankData","unitPerDeliveryCharge","removeProduct","addNewProduct","renderItem","renderSelector","Admin","getInfo","getAdminData","openOrders","odat","oldState","retData","oldArray","columnSettings","advanceOrder","saveSettings","pid","reason","setOrderRefunded","handleSettingsChange","href","dat2","advanceFullfillment","makeRefund","renderColumnSettings","ViewOrder","statusTitles","statusDescriptions","productInfo","getUserOrder","dateString","date","getMonth","getDate","getFullYear","itemData","MainApp","Auth","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.41dce9b7.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyD3EtMzgHnjYat2LbYjYGJi6goQ72UpqLQ\",\r\n\tauthDomain: \"storeexample-1c12e.firebaseapp.com\",\r\n\tdatabaseURL: \"https://storeexample-1c12e.firebaseio.com\",\r\n\tprojectId: \"storeexample-1c12e\",\r\n\tstorageBucket: \"storeexample-1c12e.appspot.com\",\r\n\tmessagingSenderId: \"113670337584\",\r\n\tappId: \"1:113670337584:web:837407a10474f3a3fea9f5\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React from \"react\";\r\nimport firebase from \"Components/Database/Firebase\";\r\n\r\nexport const AuthContext = React.createContext(null);\r\n\r\nclass AuthProvider extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentUser : undefined,\r\n\t\t\tstoreData : undefined,\r\n\t\t\torderHistory : undefined,\r\n\t\t};\r\n\r\n\t\tthis.loadStoreData = this.loadStoreData.bind(this);\r\n\t\tthis.loadData = this.loadData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tfirebase.auth().onAuthStateChanged(user =>{\r\n\t\t\tthis.setState({currentUser : user});\r\n\t\t\tif(user === null) return;\r\n\t\t\tthis.loadData(user.uid).then(userData =>{\r\n\t\t\t\tthis.setState({userData});\r\n\t\t\t});\r\n\t\t\tthis.loadOrderHistory(user.uid).then(orderHistory =>{\r\n\t\t\t\tthis.setState({orderHistory : orderHistory})\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.loadStoreData().then(data =>{\r\n\t\t\tthis.setState({storeData : data});\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tasync loadOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadStoreData(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadProductList(){\r\n\t\tconst data = await firebase.firestore.collection(\"productList\").get();\r\n\t\tconst mainData = data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={this.state}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AuthProvider;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass NavigationBar extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tbasketAmount : this.getTotal(),\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotal(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\")), total = 0;\r\n\r\n\t\tfor(let x=0; x<basket.length; x++)\ttotal += parseInt(basket[x].quantity);\r\n\t\treturn total;\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData &&\t this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\r\n\trender(){\r\n\t\tif(this.state.status === -1){\r\n\t\t\treturn <div className=\"navWrapper\">Loading...</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"navWrapper\">\r\n\t\t\t\t<Link className=\"navLink\" to=\"/\">\r\n\t\t\t\t\t<button className=\"navButtonHome\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Home</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Home Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/HomeAlt.svg?alt=media&token=d71028d0-a3a6-491f-8690-7193f5289cb5\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t\r\n\t\t\t\t<Link className=\"navLink\" to=\"/products/\">\r\n\t\t\t\t\t<button className=\"navButtonCatagories\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Products</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Product Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/ProductsAlt.svg?alt=media&token=686777dc-56a5-4e92-9f13-25121f7b5030\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<span className=\"navTitle\">{this.context.storeData[1].StoreTitle}</span>\r\n\t\t\t\t{\r\n\t\t\t\t\t(this.context.userData === undefined || this.context.userData === null )? \r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/signin\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">Sign in</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\talt=\"Sign In Navigation Button\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/account\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">{this.context.userData.displayName}'s account</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\t\talt=\"Account Navigation Button\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t<Link className=\"navLink\" to=\"/basket\">\r\n\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Basket ({this.state.basketAmount})</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \t\r\n\t\t\t\t\t\t\t\talt=\"Basket Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/BasketAlt.svg?alt=media&token=9c8a999c-0278-4419-b5ea-111a69866065\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\t\r\n\t}\r\n}\r\n\r\nexport default NavigationBar;","import React from 'react';\r\n\r\nclass LoadingScreen extends React.Component{\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"LoadingScreenWrapper\">\r\n\t\t\t\t<span className=\"LoadingScreenMessage\">Loading...</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingScreen;","import React from 'react';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass Catagory extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\r\n\t\t\tlet keys = Object.keys(this.context.storeData[0]);\r\n\t\t\tlet vals = Object.values(this.context.storeData[0]);\r\n\r\n\t\t\tlet idkey= keys.indexOf(\"id\");\r\n\t\t\tkeys.splice(idkey,1);\r\n\t\t\tvals.splice(idkey,1);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tlistKeys : keys,\r\n\t\t\t\tlistValue : vals,\r\n\t\t\t\tstatus : 1\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return (<div className=\"catWrapper\">Error</div>);\r\n\r\n\t\t\tcase 0: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"catWrapper\">\r\n\t\t\t\t\t<div className=\"catList\" >\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.keys(this.state.listKeys).map((data,index) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"catListTag\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={this.state.listKeys[index]} \r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"Catagorys\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"catCheck\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.props.handleSearch(e)}/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label \tclassName=\"catLabel\" htmlFor={this.state.listKeys[index]}>{this.state.listKeys[index]}</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Catagory;","import firebase from './Firebase';\r\n\r\nclass FirebaseAction{\r\n\r\n\tstatic async getProductInfo(id){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\tstatic async setProductInfo(id,info){\r\n\t\tfirebase.firestore().collection(\"productList\").doc(id).update(info);\r\n\t}\r\n\r\n\tstatic async getProductList(){\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async removeProduct(id){\r\n\t\treturn await firebase.firestore().collection(\"productList\").doc(id).delete().catch(console.error);\r\n\r\n\t}\r\n\r\n\tstatic async getUserData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tstatic async getUserOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\treturn data.docs.map(doc => doc.data());\r\n\t}\r\n\r\n\tstatic async getUserOrder(order){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").doc(order).get();\r\n\t\treturn data.data();\r\n\t}\r\n\r\n\tstatic async getStoreSettings(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async addOrderHistory(uid,orderData,gt,token){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<orderData.length; key++){\r\n\t\t\tuploadData.push(JSON.stringify({\r\n\t\t\t\t\"key\":orderData[key].id,\r\n\t\t\t\t\"quantity\" : orderData[key].quantity,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tconst adminData = {\r\n\t\t\tname : token.card.name,\r\n\t\t\t\r\n\t\t\temail : token.email,\r\n\r\n\t\t\taddress : {\r\n\t\t\t\tname : token.card.name,\r\n\t\t\t\tline1 : token.card.address_line1,\r\n\t\t\t\tline2 : token.card.address_line2,\r\n\t\t\t\tcity : token.card.address_city,\r\n\t\t\t\tpostcode : token.card.address_zip,\r\n\t\t\t},\r\n\r\n\t\t\tdata : uploadData,\r\n\t\t\tcreated : firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n\t\t\tstatus : 0,\r\n\r\n\t\t\tuid : uid,\r\n\t\t\ttoken : token.id,\r\n\r\n\t\t\tpaid : gt,\r\n\r\n\t\t};\r\n\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(token.id).set(adminData).catch((error) => {\r\n\t\t\twindow.alert(\"There was an issue placing this order, please contact support\");\r\n\t\t\tconsole.error(\"Unable to write to admin panel! (\"+error+\")\");\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async setOrderRefunded(id){\r\n\t\tawait firebase.firestore().collection(\"adminData\").doc(id).update({status : 4});\r\n\t}\r\n\r\n\tstatic async getAdminData(){\r\n\t\tconst adminData = await firebase.firestore().collection(\"adminData\").where(\"status\",\"<\",3).get().catch((error) => {alert(error); console.log(error)});\r\n\t\tconst mainData = adminData.docs.map(doc => doc.data());\r\n\t\tconst idData = adminData.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\tmainData.sort((a,b) => (a.created > b.created) ? 1 : ((b.created > a.created) ? -1 : 0));\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async setProductImage(id,event){\r\n\t\tconst ref = firebase.storage().ref();\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst meta = {contentType : file.type};\r\n\t\tconst name = id;\r\n\r\n\t\tconst task = ref.child(name).put(file,meta);\r\n\t\t\r\n\t\treturn await task;\r\n\t}\r\n\r\n\tstatic async advanceOrder(order){\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(order.id).update({\r\n\t\t\tstatus : (order.status + 1)\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\t\r\n\t}\r\n\r\n\tstatic async saveSettings(e){\r\n\t\tfirebase.firestore().collection(\"storeSettings\").doc(\"StoreSettings\").update(e)\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async resetPassword(e){\r\n\t\tawait firebase.auth().sendPasswordResetEmail(e);\r\n\t}\r\n\r\n\tstatic async setAdminData(data){\r\n\t\tfirebase.firestore().collection(\"adminData\").add({...data, created : firebase.firestore.FieldValue.serverTimestamp()}).catch(console.error);\r\n\t}\r\n}\r\n\r\nexport default FirebaseAction;","import React from 'react';\r\n\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport Catagory from 'Components/Products/Catagory';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass SearchBox extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {status : 0};\r\n\t\tthis.serverData = [];\r\n\t\tthis.dataList = [];\r\n\r\n\t\tthis.searchInput = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\trunCheck(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.serverData = data; \r\n\t\t\t\tthis.dataList = data;\r\n\t\t\t\r\n\t\t\t\tlet catagoryData = {};\r\n\t\t\t\tlet catKey;\r\n\r\n\t\t\t\tfor(catKey in this.context.storeData[0]){\r\n\t\t\t\t\tcatagoryData = {\r\n\t\t\t\t\t\t...catagoryData,\r\n\t\t\t\t\t\t[catKey] : false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({dataList : catagoryData, status : 1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsearch(element){\r\n\t\tthis.setState({status : 0});\r\n\t\tconst searchterm = element.target.value.toLowerCase();\r\n\r\n\t\tif(!this.state.catagorys){\r\n\t\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.searchCatagory();\r\n\t\t\tthis.dataList = this.dataList.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\tsearchCatagory(){\r\n\t\tthis.setState({status : 0});\r\n\r\n\t\tlet a = this;\r\n\r\n\t\tlet trueVals = Object.keys(this.state.dataList).filter(function(num){\r\n\t\t\treturn a.state.dataList[num];\r\n\t\t});\r\n\r\n\t\tif(trueVals.length === 0){\r\n\t\t\tthis.dataList = this.serverData;\r\n\t\t\tthis.setState({status : 1, catagorys : false});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\tlet prodCat = JSON.parse(data.Catagory).split(\"+\");\r\n\t\t\treturn prodCat.some(r=>trueVals.includes(r));\r\n\t\t});\r\n\t\t\r\n\t\tthis.setState({status : 1, catagorys : true});\r\n\t}\r\n\r\n\thandleCatagoryList(data){\r\n\t\tthis.setState({\r\n\t\t\tdataList : {\r\n\t\t\t\t...this.state.dataList,\r\n\t\t\t\t[data.target.id] : data.target.checked,\r\n\t\t\t}\r\n\t\t},()=>this.searchCatagory());\r\n\t}\r\n\r\n\taddToBasket(data){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket,data);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t}\r\n\r\n\taddBasketItem(basket,data){\r\n\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.props.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbasket.push(data);\r\n\t\tbasket[basket.length-1].quantity = 1;\r\n\t\treturn;\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"schWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"schContainer\">\r\n\t\t\t\t\t\t<div className=\"schLeft\">\r\n\t\t\t\t\t\t\t<Catagory handleSearch={(e) => this.handleCatagoryList(e)}/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"schRight\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"schInput\" placeholder=\"Search...\" onChange={(e)=>this.search(e)}/><br/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"schResult\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.dataList.map((data,index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sliWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/products/${data.id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={data.image} alt={data.productName}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h2>{data.displayPrice}</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={()=>this.addToBasket(data)}>Buy Now</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBox;","import React from 'react'\r\nimport { Redirect} from \"react-router\";\r\nimport firebase from 'Components/Database/Firebase';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nexport default class ProductPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false};\r\n\t\tthis.openExpandedImage = this.openExpandedImage.bind(this);\r\n\t\tthis.addToBasket = this.addToBasket.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.props.id)\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\r\n\t\tthis.loadData().then(data => {\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.data.id = this.props.id;\r\n\t\t\tthis.data.quantity = 0;\r\n\t\t\tthis.data.displayPrice = this.data.productPrice / 100;\r\n\t\t\tthis.setState({status:1});\r\n\t\t});\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true});\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbasket.push(this.data);\r\n\t\tbasket[basket.length-1].quantity = parseInt(basket[basket.length-1].quantity) + 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\tasync loadData(){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(this.props.id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\topenExpandedImage(){\r\n\t\twindow.open(this.data.image);\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.data.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\r\n\t\tdes = des.map((data)=>{\r\n\t\t\tif(data === \"\"){\r\n\t\t\t\treturn (<span><br/></span>);\r\n\t\t\t} \r\n\t\t\treturn (<span>{data}</span>);\r\n\t\t});\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect)\treturn <Redirect to=\"/basket\" />\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\" onClick={()=>{return window.open(this.data.image)}}>\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\tClick to expand\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(this.data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t<h2>{JSON.parse(this.data.displayPrice)}</h2>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.getDescription()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button>Buy Now</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React from 'react';\r\n\r\nimport SearchBox from 'Components/Products/SearchBox';\r\nimport ProductPage from 'Components/Products/ProductPage';\r\n\r\nclass ProductList extends React.Component{\r\n\trender(){\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn <SearchBox />\r\n\t\t}else{\r\n\t\t\treturn <ProductPage id={this.props.match.params.id}/>\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductList;","import React from 'react'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\t\r\nconst stripePromise = loadStripe('pk_test_51HHEl2HbWsI0wL0616xJL9FkVOSuvpDFAfYvYfwwmOv044YOH4npf2jEko9ISFcouW3Y5ETqkQMWxeizaDANXNTL0018qa39p8');\r\n\r\nclass Basket extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {checkoutText : \"Proceed to Checkout\", storedItems : JSON.parse(window.localStorage.getItem(\"basket\")),};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tcalculateTotal(){\r\n\t\tlet total = 0;\r\n\r\n\t\tfor(let a=0; a<this.state.storedItems.length; a++){\r\n\t\t\ttotal = total + (this.state.storedItems[a].productPrice * this.state.storedItems[a].quantity);\r\n\t\t\ttotal = total + (this.state.storedItems[a].deliveryPrice * this.state.storedItems[a].quantity);\r\n\t\t}\r\n\r\n\t\tthis.setState({grandTotal:total});\r\n\t}\r\n\r\n\tremoveItem(e){\r\n\t\tif(window.confirm(\"This will remove all of this item from your basket, are you sure?\")){\r\n\t\t\tlet data = this.state.storedItems;\r\n\r\n\t\t\tfor(let a=0; a<data.length; a++){\r\n\t\t\t\tif(data[a].id === e.target.id)\tdata.splice(a,1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({storedItems : data}, () => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\t\tthis.calculateTotal();\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBasketItemQuantity(e){\r\n\t\te.target.value = e.target.value.replace(\".\"\t,\"\");\r\n\t\te.target.value = e.target.value.replace(\",\",\"\");\r\n\t\te.target.value = e.target.value.replace(\" \",\"\");\r\n\r\n\r\n\t\tlet oldData = this.state.storedItems;\r\n\r\n\t\tfor(let a=0; a<oldData.length; a++){\r\n\t\t\tif(oldData[a].id === e.target.id){\r\n\t\t\t\toldData[a].quantity = e.target.value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({storedItems : oldData},() => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tgetBasketData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"key\":this.state.storedItems[key].id,\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tparseData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"name\" : JSON.parse(this.state.storedItems[key].productName),\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t\t\"price\" : this.state.storedItems[key].productPrice,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tasync handleClick(event){\r\n\t\tthis.setState({checkoutText : \"Please Wait...\"});\r\n\t\tconst stripe = await stripePromise;\r\n\t\tconst response = await fetch('https://www.bystuart.co.uk/store-example/checkout-session', { method: 'POST', body:JSON.stringify({\r\n\t\t\tuid : btoa(this.context.currentUser.uid),\r\n\t\t\tdata : btoa(this.parseData()),\r\n\t\t\tthroughdata : btoa(this.getBasketData()),\r\n\t\t})});\r\n\r\n\t\tconst session = await response.json();\r\n\t\tconsole.log(session.id);\r\n\t\tconst result = await stripe.redirectToCheckout({\r\n\t\t\tsessionId: session.id,\r\n\t\t});\r\n\r\n\t\tif (result.error) {\r\n\t\t\tthis.setState({checkoutText : \"Error: \"+result.error.message});\r\n\t\t\tconsole.error(response.text());\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"basketWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"basketContainer\">\r\n\t\t\t\t\t<div className=\"basketTopBar\">\r\n\t\t\t\t\t\tMy Basket\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketList\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.storedItems.map((item,index) => (\r\n\t\t\t\t\t\t\t\t<div className=\"basketListItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemImageCont\"><img className=\"basketListItemImage\" alt=\"Store Item\" src={item.image}/></div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemName\">{JSON.parse(item.productName)}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPrice\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t{((item.productPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceDelivery\">\r\n\t\t\t\t\t\t\t\t\t\t\t{((item.deliveryPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemQuantity\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityInput\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.quantity} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.changeBasketItemQuantity(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemRemove\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityRemove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"&#10007;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => this.removeItem(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketBottomBar\">\r\n\t\t\t\t\t\tYour total comes to {(this.state.grandTotal/100).toFixed(2)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className=\"basketCheckoutButton\" role=\"link\" onClick={(e)=>this.handleClick(e)}>\r\n\t\t\t\t\t\t\t{this.state.checkoutText}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Basket;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutSuccess extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t\tdata : JSON.parse(atob(this.props.location.search.split(\"=\")[1])),\r\n\t\t};\r\n\r\n\t\tFirebaseAction.setAdminData(this.state.data);\r\n\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tHello, {this.state.data.email}!<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tSince this is an example store, no actual payment was taken.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutSuccess;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutCancel extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t};\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tUnfortunately an error has occured or the action was cancelled.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutCancel;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\n\r\nclass MainPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {status : -1};\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData && this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <LoadingScreen />\r\n\t\t \r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"MainPage\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t<header></header>\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundLeft}} pos=\"left\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkLeft}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageLeft} alt={this.context.storeData[1].ColumnAltLeft}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section  style={{background:this.context.storeData[1].ColumnBackgroundCenter}} pos=\"middle\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkCenter}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageCenter} alt={this.context.storeData[1].ColumnAltCenter}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundRight}} pos=\"right\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkRight}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageRight} alt={this.context.storeData[1].ColumnAltRight}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport firebase from 'Components/Database/Firebase'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass SignIn extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t\tthis.handleSignIn = this.handleSignIn.bind(this);\r\n\t}\r\n\r\n\tasync handleSignIn(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {email,password} = event.target.elements; \r\n\t\ttry{\r\n\t\t\tawait firebase.auth().signInWithEmailAndPassword(email.value,password.value);\r\n\t\t\tthis.setState({redirect : true})\r\n\t\t}catch(error){\r\n\t\t\talert(error);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to=\"/\"/>\r\n\t\treturn (\r\n\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={this.handleSignIn}  className=\"SignInWrapper\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Email</h1>\r\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" placeholder=\"example@example.com\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Password</h1>\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"password\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\n\r\nclass PageNavigation extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage : 0,\r\n\t\t\tmaxPages : this.props.maxPages,\r\n\t\t};\r\n\t}\r\n\r\n\tprevPage(){\r\n\t\tif(this.state.currentPage - 1 >= 0){\r\n\t\t\tthis.setState({currentPage : this.state.currentPage - 1},\r\n\t\t\t() => {this.props.onPageChange(this.state.currentPage)});\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.state.currentPage + 1 < this.state.maxPages){\r\n\t\t\tthis.setState(\r\n\t\t\t\t{currentPage : this.state.currentPage + 1},\r\n\t\t\t\t()=>{this.props.onPageChange(this.state.currentPage)}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tlet returnValue = [];\r\n\r\n\t\treturnValue.push(<div key=\"leftCap\" onClick={()=>this.prevPage()} className=\"GlobalNavBallLeftCap\"></div>);\r\n\t\t\r\n\r\n\t\tfor(let a=0; a<this.state.maxPages; a++){\r\n\t\t\treturnValue.push(\r\n\t\t\t\t<div \tonClick={()=>this.setState({currentPage : a},() => {this.props.onPageChange(this.state.currentPage)})}\r\n\t\t\t\t\t\tkey={a} \r\n\t\t\t\t\t\tclassName={(a === this.state.currentPage ? \"GlobalNavBallFilled\" : \"GlobalNavBall\")}>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturnValue.push(<div key=\"rightCap\" onClick={() => this.nextPage()} className=\"GlobalNavBallRightCap\"></div>);\r\n\t\t\r\n\t\treturn (<div className=\"GlobalPageNavigation\">{returnValue}</div>);\r\n\t}\r\n}\r\n\r\nexport default PageNavigation;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Account extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tshowPage : 0,\r\n\r\n\t\t\tmaxPages : 2,\r\n\r\n\t\t\tresetSent : false,\r\n\t\t\torderHistory : undefined,\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.userData && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1){this.setState({orderHistory : [], status : -2},()=>this.processOrderHistory());}}\r\n\r\n\tasync resetPassword(){\r\n\t\tFirebaseAction.resetPassword(this.context.currentUser.email)\r\n\t\tthis.setState({resetSent : true});\r\n\t}\r\n\r\n\tasync processOrderHistory(){\r\n\t\tfor(let order=0; order<this.context.orderHistory.length; order++){\t\t\t\r\n\t\t\tlet currentOrder = [];\r\n\r\n\t\t\tlet currentOrderData = this.context.orderHistory[order];\r\n\t\t\t\r\n\t\t\tfor(let item=0; item<currentOrderData.data.length; item++){\r\n\t\t\t\tlet info = JSON.parse(currentOrderData.data[item]);\r\n\r\n\t\t\t\tawait FirebaseAction.getProductInfo(info.key).then((data) => {\r\n\t\t\t\t\tcurrentOrder.push({\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\tproductName : JSON.parse(data.productName),\r\n\t\t\t\t\t\tsku : JSON.parse(data.sku),\r\n\t\t\t\t\t\tproductDescription : JSON.parse(data.productDescription),\r\n\t\t\t\t\t\tCatagory : JSON.parse(data.Catagory),\r\n\t\t\t\t\t\tquantity : info.quantity,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet array = this.state.orderHistory;\r\n\t\t\tarray.push(currentOrder);\r\n\t\t\tthis.setState({orderHistory : array});\r\n\t\t}\r\n\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\t\t\tcase 0: default: \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t\t<div className=\"accPanelTitle\">Display Settings</div>\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accDisplayName\">Display Name</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accDisplayName\" \r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.userData.displayName}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accEmail\">Email</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accEmail\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.currentUser.email}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accResetPassword\">Password</label><br/>\r\n\t\t\t\t\t\t\t<button id=\"accResetPassword\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelButton\" \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.resetSent} \r\n\t\t\t\t\t\t\t\t\tonClick={() => this.resetPassword()}>Change Password</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\tcase 1:\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accPanel\" style={{\"justify-content\":\"initial\"}}>\r\n\t\t\t\t\t<div className=\"accPanelTitle\">Order History</div><br/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.context.orderHistory.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link key={index} className=\"accPanelItem\" to={\"/account/order/\"+data.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"accPanelItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"GlobalSpacer\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemPlaced\">Placed: {data.created.toDate().toDateString()}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderHistory[index].map((item,index2) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"accOHItemInfo\" key={index2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tItem #{index2+1} - {item.productName}({item.quantity})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemStatus\">Status: {this.state.orderStatus[data.status]}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemTotal\">Paid: {data.paid/100}</span> \r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -3: default: return <span>Error!</span>;\r\n\r\n\t\tcase -1: case -2: return <LoadingScreen />\r\n\r\n\t\tcase 0: \r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t{this.renderPanel()}\r\n\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Account;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport firebase from 'Components/Database/Firebase';\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\n\r\nclass ProductEditor extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false, changedData : {}};\r\n\t\tthis.changedData = {};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tFirebaseAction.getProductInfo(this.props.match.params.id).then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.data.id = this.props.match.params.id;\r\n\t\t\t\t\r\n\t\t\t\tif(isNaN(this.data.productPrice)){\r\n\t\t\t\t\tconsole.error(\"data.productPrice was NaN, reset to 0\");\r\n\t\t\t\t\tthis.data.productPrice = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.displayPrice = parseInt(this.data.productPrice) / 100;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({changedData : this.data});\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsaveChanges(){\r\n\t\tthis.savedData = this.state.changedData;\r\n\t\tthis.savedData.productPrice = parseInt(JSON.parse(this.savedData.productPrice));\r\n\t\tthis.savedData.deliveryPrice = parseInt(JSON.parse(this.savedData.deliveryPrice));\r\n\t\tFirebaseAction.setProductInfo(this.props.match.params.id,this.savedData);\r\n\t}\r\n\r\n\thandleChange(element,name){\r\n\t\tlet data;\r\n\t\t\r\n\t\tif(name === \"productDescription\"){\r\n\t\t\tdata = element.target.value;\r\n\r\n\t\t\tdata = data.replaceAll(\"</span><span><br></span>\",\"\\n\\n\");\r\n\t\t\tdata = data.replaceAll(\"<span>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"</span>\",\"\\n\");\r\n\t\t\tdata = data.replaceAll(\"&nbsp;\",\" \");\r\n\r\n\t\t\tif(data.endsWith(\"\\n\")){\r\n\t\t\t\tdata = data.slice(0,-1);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}else if(name === \"productPrice\"){\r\n\t\t\tdata = element.target.value.substr(1);\r\n\t\t}else{\r\n\t\t\tdata = element.target.value;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tchangedData : {\r\n\t\t\t\t...this.state.changedData,\r\n\t\t\t\t[name] : JSON.stringify(data),\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.state.changedData.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\t\tdes = des.map((data)=>{if(data === \"\"){return \"<span><br></span>\";} return \"<span>\"+data+\"</span>\";});\r\n\t\tdes = des.toString().replaceAll(\">,<\",\"><\");\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\tuploadFile(event){\r\n\r\n\t\tlet dat = FirebaseAction.setProductImage(this.props.match.params.id,event);\r\n\t\tdat.then(snapshot => snapshot.ref.getDownloadURL())\r\n\t\t\t.then((url) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangedData : {\r\n\t\t\t\t\t\t...this.state.changedData,\r\n\t\t\t\t\t\timage:url,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.data.image = this.state.changedData.image;\r\n\t\t\t\tthis.saveChanges();\r\n\t\t}).catch(console.error);\t\t\r\n\t}\r\n\r\n\trenderItem(){\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={(e)=>this.uploadFile(e)}/>\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productName)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productName\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h1\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={\"\"+JSON.parse(this.state.changedData.productPrice)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productPrice\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h2\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\tpos=\"middle\"\r\n\t\t\t\t\t\t\t\t\t\thtml={this.getDescription()}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productDescription\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"section\"/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button onClick={()=>this.saveChanges()}>Save Changes</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync addNewProduct(){\r\n\t\tconst blankData = {\r\n\t\t\tproductName : \"\\\"\\\"\",\r\n\t\t\tproductDescription : \"\\\"\\\"\",\r\n\t\t\tCatagory : \"\\\"\\\"\",\r\n\t\t\tdeliveryPrice : 0,\r\n\t\t\tproductPrice : 0,\r\n\t\t\tsku : \"\\\"\\\"\",\r\n\t\t\timage : \"\\\"\\\"\",\r\n\t\t\tunitPerDeliveryCharge : 0,\r\n\t\t};\r\n\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").add(blankData);\r\n\t\tthis.setState({redirect : '/editor/'+data.id});\r\n\t}\r\n\r\n\tremoveItem(id){\r\n\t\tif(window.confirm(\"This action cannot be undone, are you sure?\")){\r\n\t\t\tFirebaseAction.removeProduct(id);\r\n\t\t}\r\n\t}\r\n\r\n\trenderSelector(){\r\n\t\treturn (\r\n\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"productEditorPageWrapper\">\r\n\t\t\t\t\t<header>Edit specific product</header>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.data.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\t\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"productEditorListContainer\">\r\n\t\t\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<img src={data.image} />\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.setState({redirect : \"/editor/\"+data.id})}}>Edit</button>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.removeItem(data.id)}}>Remove</button>\r\n\t\t\t\t\t\t\t\t\t</section>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</main>\r\n\t\t\t\t\t<footer>\r\n\t\t\t\t\t\t<button className=\"productEditorListAddButton\" onClick={() => this.addNewProduct()}>Add new item</button>\r\n\t\t\t\t\t</footer>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to={this.state.redirect} />\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn this.renderSelector();\r\n\t\t}else{\r\n\t\t\treturn this.renderItem();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductEditor;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Admin extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t\tstatus : -1,\r\n\r\n\t\t\tshowPage : 0,\r\n\t\t\tmaxPages : 2\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tasync getInfo(){\r\n\t\tif(\tthis.context !== undefined && this.context.currentUser !== undefined && this.context !== null && this.context.currentUser !== null && this.context.storeData !== undefined && this.context.storeData[0] !== undefined && this.context.storeData[1] !== undefined && this.state.status === -1){\r\n\t\t\tif(this.state.orderData !== undefined) return; \r\n\t\t}\r\n\r\n\t\tthis.setState({orderData : [], status : 0});\r\n\t\t\t\r\n\t\t\tawait FirebaseAction.getAdminData().then((data) => {\r\n\t\t\t\tthis.setState({openOrders : data},()=>{\r\n\r\n\t\t\t\t\tthis.state.openOrders.map(async (odat,index)=>{\r\n\t\t\t\t\t\tlet oldState = this.state.orderData;\r\n\t\t\t\t\t\toldState.push([]);\r\n\r\n\t\t\t\t\t\tthis.setState({orderData : oldState},()=>{\r\n\t\t\t\t\t\t\todat.data.map(async(order)=>{\r\n\t\t\t\t\t\t\t\tlet key = JSON.parse(order).key;\r\n\r\n\t\t\t\t\t\t\t\tawait FirebaseAction.getProductInfo(key).then((retData)=>{\r\n\t\t\t\t\t\t\t\t\tlet oldArray = this.state.orderData;\r\n\t\t\t\t\t\t\t\t\toldArray[index].push(retData);\r\n\t\t\t\t\t\t\t\t\tthis.setState({orderData : oldArray});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthis.setState({columnSettings : this.context.storeData[1], status : 1});\r\n\t}\r\n\t\r\n\tadvanceFullfillment(index){\r\n\t\tlet order = this.state.openOrders[index];\r\n\t\tif(order.status < 3){\r\n\t\t\tFirebaseAction.advanceOrder(order).then(() => {\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSettingsChange(e){\r\n\t\tthis.setState({\r\n\t\t\tcolumnSettings : {\r\n\t\t\t\t...this.state.columnSettings,\r\n\t\t\t\t[e.target.name] : e.target.value.replace(/\\n/g, '')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveSettings(){\r\n\t\tFirebaseAction.saveSettings(this.state.columnSettings);\r\n\t}\r\n\r\n\tasync makeRefund(id, pid){\r\n\t\tconst response = await fetch('http://localhost:4242/make-refund', { method: 'POST', body: btoa(pid) });\r\n\t\tconst data = await response.json();\r\n\r\n\t\tif(data.status === \"failed\"){\r\n\t\t\talert(\"Unable to refund, \"+data.reason);\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tFirebaseAction.setOrderRefunded(id).then(()=>{\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trenderColumnSettings(name){\r\n\t\treturn (\r\n\t\t\t<div className={\"admColumnSettings\"+name}>\r\n\t\t\t\t<span className=\"admColumnSettingsTitle\">{name} Column Settings</span><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"admColumnSettingImage\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnImage\"+name}>Image Link for {name} Column</label>\r\n\t\t\t\t\t<textarea \ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"admColumnSettingsInputLink\"\r\n\t\t\t\t\t\t\t\tname={\"ColumnImage\"+name}\r\n\t\t\t\t\t\t\t\tid={\"ColumnImage\"+name} \r\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnImage\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingAlt\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnAlt\"+name}>Alt text for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnAlt\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnAlt\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnAlt\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingLink\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnLink\"+name}>Link for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnLink\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnLink\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnLink\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingColor\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnBackground\"+name}>Background Color for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"color\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnBackground\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\r\n\t\t\tdefault: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 0: \r\n\t\t\t\tif(this.state.openOrders.length === 0){\r\n\t\t\t\t\treturn (<div className=\"admPanel\">No current open orders.</div>);\r\n\t\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.openOrders.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"admOI\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOITitle\">Order #{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIBio\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIBioTitle\">Recipient Information</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIName\">Name: {data.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIEmail\"><a href={\"mailto:\"+data.email}>Email: {data.email}</a></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIAddress\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIAddressTitle\">Shipping Address</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.line1}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{data.address.line2 !== null && <span className=\"admOIAddressLine\">{data.address.line2}</span>}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.city}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.postcode}</span><br/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderData[index].map((dat2)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"AdmOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{JSON.parse(dat2.productName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIStatus\"> \r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIStatusText\">Status: {this.state.orderStatus[data.status]}</span>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIAdvanceOrder\" disabled={data.status >= 3} onClick={() => this.advanceFullfillment(index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status >= 3 && <b>Completed Order</b>}\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status < 3 && <b>Advance to {this.state.orderStatus[data.status+1]}</b>}\r\n\t\t\t\t\t\t\t\t\t\t</button><br/>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIRefund\" onClick={()=>this.makeRefund(data.id, data.pid)}>Issue Refund</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t<div className=\"admPanelColumnSettings\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<label htmlFor=\"StoreTitle\">Store Title</label><br/>\r\n\t\t\t\t\t\t<input type=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tid=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.columnSettings.StoreTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"admColumnSettingsWrapper\">\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Left\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Center\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Right\")}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button onClick={()=>this.saveSettings()}>Save Changes</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: case 0: default: return (<LoadingScreen />);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t\t<div className=\"admWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\r\n\t\t\t\t\t\t{this.renderPanel()}\r\n\r\n\t\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass ViewOrder extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.statusTitles = [\r\n\t\t\t\"Placed\",\r\n\t\t\t\"Dispatched\",\r\n\t\t\t\"Out for delivery\",\r\n\t\t\t\"Complete\",\r\n\t\t\t\"Returned\"\r\n\t\t];\r\n\r\n\t\tthis.statusDescriptions = [\r\n\t\t\t\"Placed, in the system ready to be dispatched\",\r\n\t\t\t\"Dispatched, ready to be sent out for delivery\",\r\n\t\t\t\"Out for delivery, with our postal carrier\",\r\n\t\t\t\"Completed, order has been recieved\",\r\n\t\t\t\"Refunded, Sorry if there was a problem with your order\"\r\n\t\t];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tid : this.props.match.params.id,\r\n\t\t\tproductInfo : {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getUserOrder(this.state.id).then((data) => {\r\n\t\t\t\t\r\n\t\t\t\tif(data === undefined){\r\n\t\t\t\t\tthis.setState({status : -1});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet dateString = \"\";\r\n\t\t\t\t\tlet date = data.created.toDate();\r\n\r\n\t\t\t\t\tconst month = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\n\t\t\t\t\tdateString = month[date.getMonth()]+\" \"+date.getDate();\r\n\r\n\t\t\t\t\tif(date.getDate().toString().endsWith(\"1\")){\r\n\t\t\t\t\t\tdateString = dateString+\"st \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"2\")){\r\n\t\t\t\t\t\tdateString = dateString+\"nd \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"3\")){\r\n\t\t\t\t\t\tdateString = dateString+\"rd \";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdateString = dateString+\"th \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdateString = dateString + date.getFullYear();\r\n\r\n\t\t\t\t\tthis.setState({orderData : {...data,dateString : dateString}});\r\n\r\n\t\t\t\t\tfor(let a=0; a<data.data.length; a++){\r\n\t\t\t\t\t\tlet itemData = JSON.parse(data.data[a]);\r\n\r\n\t\t\t\t\t\tFirebaseAction.getProductInfo(itemData.key).then((info) => {\r\n\t\t\t\t\t\t\tlet productInfo = JSON.parse(JSON.stringify(this.state.productInfo));\r\n\t\t\t\t\t\t\tproductInfo = {\r\n\t\t\t\t\t\t\t\t...productInfo,\r\n\t\t\t\t\t\t\t\t[itemData.key] : {\r\n\t\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\t\tproductName : JSON.parse(info.productName),\r\n\t\t\t\t\t\t\t\t\tCatagory : JSON.parse(info.Catagory),\r\n\t\t\t\t\t\t\t\t\tproductDescription : JSON.parse(info.productDescription),\r\n\t\t\t\t\t\t\t\t\tsku : JSON.parse(info.sku),\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.setState({productInfo : productInfo},()=>{\r\n\t\t\t\t\t\t\t\tif(a === data.data.length-1){\r\n\t\t\t\t\t\t\t\t\tthis.setState({status : 1});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\r\n\t\t\tcase -1: default: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelError\">Error loading order information</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<LoadingScreen />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelTitle\">About your order placed <span>{this.state.orderData.dateString}</span></div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelStatus\">\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusBig\">Your order is {this.statusTitles[this.state.orderData.status]}</span><br/>\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusSmall\">{this.statusDescriptions[this.state.orderData.status]}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelShipping\">\r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Shipping Address</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.name}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.line1}</span><br/>\r\n\t\t\t\t\t\t{this.state.orderData.address.line2 !== null ? (<span>{this.state.orderData.address.line2}</span>) : <span></span>}<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.city}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.postcode\t}</span><br/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelItems\"> \r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Order Items</span>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.orderData.data.map((data,index) => {\r\n\t\t\t\t\t\t\t\tlet item = JSON.parse(data);\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"vopPanelOrderItem\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemTitle\">(x{item.quantity}) {this.state.productInfo[item.key].productName}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemPrice\">{this.state.productInfo[item.key].displayPrice} + ({(this.state.productInfo[item.key].deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\t\r\n\r\n\t\t\t\t\t<div className=\"vopPanelTotal\">\r\n\t\t\t\t\t\tOrder Total: {(this.state.orderData.paid/100).toFixed(2)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ViewOrder;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport {HashRouter as Router, Route} from 'react-router-dom';\n\nimport firebase from 'Components/Database/Firebase';\nimport AuthProvider from 'Components/Auth/Auth'\n\nimport ProductList from 'Components/Products/ProductList';\nimport Basket from 'Components/Checkout/Basket';\nimport CheckoutSuccess from 'Components/Checkout/CheckoutSuccess';\nimport CheckoutCancel from 'Components/Checkout/CheckoutCancel';\nimport MainPage from 'Components/MainPage';\nimport SignIn from 'Components/Auth/SignIn';\nimport Account from 'Components/Account/Account';\nimport ProductEditor from 'Components/Products/Editor/ProductEditor';\nimport Admin from 'Components/Admin/Admin';\nimport ViewOrder from 'Components/Admin/ViewOrder';\n\nclass MainApp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.dataList = [];\n\t\tthis.state = {status : 0};\n\t\tif(window.localStorage.getItem(\"basket\") === null)\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({status : 0});\n\n\t\tthis.loadData().then(data => {\n\t\t\tthis.dataList = data;\n\t\t\tthis.setState({status : 1});\n\t\t});\n\t}\n\n\tasync loadData(){\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\n\t\tconst mainData = data.docs.map(doc => doc.data());\n\t\tconst idData = data.docs.map(doc => doc.id);\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\n\t\treturn mainData;\n\t}\n\n\trender(){\n\t\tif(this.state.status === 0 || this.context.storeData === null){\n\t\t\treturn <div className=\"Wrapper\">Loading data...</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<AuthProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/\" exact component={MainPage} />\n\t\t\t\t\t<Route path=\"/basket\" exact component={Basket} />\n\t\t\t\t\t<Route path=\"/success\" exact component={CheckoutSuccess} />\n\t\t\t\t\t<Route path=\"/cancel\" exact component={CheckoutCancel} />\n\t\t\t\t\t<Route path=\"/products/:id?\" exact component={ProductList}/>\n\t\t\t\t\t<Route path=\"/signin\" exact component={SignIn}/>\n\t\t\t\t\t<Route path=\"/account\" exact component={Account}/>\n\t\t\t\t\t<Route path=\"/editor/:id?\" exact component={ProductEditor} />\n\t\t\t\t\t<Route path=\"/admin\" exact component={Admin} />\n\t\t\t\t\t<Route path=\"/account/order/:id?\" component={ViewOrder} />\n\t\t\t\t</Router>\n\t\t\t</AuthProvider>\n\t\t);\n\t}\n}\n\nReactDOM.render(<MainApp/>,document.getElementById('root'));"],"sourceRoot":""}