{"version":3,"sources":["Components/Database/Firebase.js","Components/Auth/Auth.jsx","Components/Navigation/NavigationBar.jsx","Components/Util/LoadingScreen.jsx","Components/Products/Catagory.jsx","Components/Database/FirebaseAction.js","Components/Products/SearchBox.jsx","Components/Products/ProductPage.jsx","Components/Products/ProductList.jsx","Components/Checkout/Basket.jsx","Components/Checkout/CheckoutSuccess.jsx","Components/Checkout/CheckoutCancel.jsx","Components/MainPage.jsx","Components/Auth/SignIn.jsx","Components/Auth/SignUp.jsx","Components/Navigation/PageNavigation.jsx","Components/Account/Account.jsx","Components/Products/Editor/ProductEditor.jsx","Components/Admin/Admin.jsx","Components/Admin/ViewOrder.jsx","index.jsx"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","props","state","currentUser","undefined","storeData","orderHistory","loadStoreData","bind","loadData","auth","onAuthStateChanged","user","setState","uid","then","userData","loadOrderHistory","catch","console","error","this","data","firestore","collection","doc","get","mainData","where","docs","map","idData","id","index","Provider","value","children","Component","NavigationBar","status","basketAmount","getTotal","basket","JSON","parse","window","localStorage","getItem","total","x","length","parseInt","quantity","waitForContext","prevProps","prevState","snapshot","context","className","to","alt","src","StoreTitle","displayName","contextType","LoadingScreen","Catagory","keys","Object","vals","values","idkey","indexOf","splice","listKeys","listValue","key","type","name","onChange","e","handleSearch","htmlFor","FirebaseAction","exists","info","update","delete","order","orderData","gt","token","uploadData","push","stringify","adminData","card","email","address","line1","address_line1","line2","address_line2","city","address_city","postcode","address_zip","created","FieldValue","serverTimestamp","paid","set","alert","log","sort","a","b","event","ref","storage","file","target","files","meta","contentType","task","child","put","sendPasswordResetEmail","add","display","password","createUserWithEmailAndPassword","isAdmin","signInWithEmailAndPassword","SearchBox","serverData","dataList","searchInput","createRef","runCheck","getProductList","catKey","catagoryData","element","searchterm","toLowerCase","catagorys","searchCatagory","filter","productName","includes","trueVals","num","split","some","r","checked","addBasketItem","setItem","handleCatagoryList","placeholder","search","image","displayPrice","onClick","addToBasket","ProductPage","redirect","openExpandedImage","getData","productPrice","open","des","productDescription","pos","getDescription","ProductList","match","params","stripePromise","loadStripe","Basket","checkoutText","storedItems","calculateTotal","deliveryPrice","grandTotal","confirm","replace","oldData","stripe","fetch","method","body","btoa","parseData","throughdata","getBasketData","response","json","session","redirectToCheckout","sessionId","result","message","text","item","toFixed","min","max","defaultValue","changeBasketItemQuantity","removeItem","role","handleClick","CheckoutSuccess","atob","location","setAdminData","CheckoutCancel","MainPage","style","background","ColumnBackgroundLeft","ColumnLinkLeft","ColumnImageLeft","ColumnAltLeft","ColumnBackgroundCenter","ColumnLinkCenter","ColumnImageCenter","ColumnAltCenter","ColumnBackgroundRight","ColumnLinkRight","ColumnImageRight","ColumnAltRight","SignIn","preventDefault","elements","signIn","onSubmit","handleSignIn","flag","code","SignUp","createUser","handleSignUp","required","PageNavigation","currentPage","maxPages","onPageChange","returnValue","prevPage","nextPage","Account","showPage","resetSent","orderStatus","processOrderHistory","resetPassword","currentOrder","currentOrderData","getProductInfo","sku","array","disabled","toDate","toDateString","index2","renderPanel","ProductEditor","changedData","isNaN","savedData","setProductInfo","replaceAll","endsWith","slice","substr","toString","setProductImage","getDownloadURL","url","saveChanges","uploadFile","html","handleChange","tagName","blankData","unitPerDeliveryCharge","removeProduct","addNewProduct","renderItem","renderSelector","Admin","getInfo","getAdminData","openOrders","odat","oldState","retData","oldArray","columnSettings","advanceOrder","saveSettings","pid","reason","setOrderRefunded","handleSettingsChange","href","dat2","advanceFullfillment","makeRefund","renderColumnSettings","ViewOrder","statusTitles","statusDescriptions","productInfo","getUserOrder","dateString","date","getMonth","getDate","getFullYear","itemData","MainApp","Auth","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b2972279.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyD3EtMzgHnjYat2LbYjYGJi6goQ72UpqLQ\",\r\n\tauthDomain: \"storeexample-1c12e.firebaseapp.com\",\r\n\tdatabaseURL: \"https://storeexample-1c12e.firebaseio.com\",\r\n\tprojectId: \"storeexample-1c12e\",\r\n\tstorageBucket: \"storeexample-1c12e.appspot.com\",\r\n\tmessagingSenderId: \"113670337584\",\r\n\tappId: \"1:113670337584:web:837407a10474f3a3fea9f5\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React from \"react\";\r\nimport firebase from \"Components/Database/Firebase\";\r\n\r\nexport const AuthContext = React.createContext(null);\r\n\r\nclass AuthProvider extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentUser : undefined,\r\n\t\t\tstoreData : undefined,\r\n\t\t\torderHistory : undefined,\r\n\t\t};\r\n\r\n\t\tthis.loadStoreData = this.loadStoreData.bind(this);\r\n\t\tthis.loadData = this.loadData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tfirebase.auth().onAuthStateChanged(user =>{\r\n\t\t\tthis.setState({currentUser : user});\r\n\t\t\tif(user === null) return;\r\n\r\n\t\t\tthis.loadData(user.uid).then(userData =>{\r\n\t\t\t\tthis.setState({userData});\r\n\t\t\t});\r\n\r\n\t\t\tthis.loadOrderHistory(user.uid).then(orderHistory =>{\r\n\t\t\t\tthis.setState({orderHistory : orderHistory})\r\n\t\t\t}).catch(console.error);\r\n\t\t});\r\n\r\n\t\tthis.loadStoreData().then(data =>{\r\n\t\t\tthis.setState({storeData : data});\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tasync loadOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadStoreData(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadProductList(){\r\n\t\tconst data = await firebase.firestore.collection(\"productList\").get();\r\n\t\tconst mainData = data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={this.state}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AuthProvider;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass NavigationBar extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tbasketAmount : this.getTotal(),\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotal(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\")), total = 0;\r\n\r\n\t\tfor(let x=0; x<basket.length; x++)\ttotal += parseInt(basket[x].quantity);\r\n\t\treturn total;\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData &&\t this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\r\n\trender(){\r\n\t\tif(this.state.status === -1){\r\n\t\t\treturn <div className=\"navWrapper\">Loading...</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"navWrapper\">\r\n\t\t\t\t<Link className=\"navLink\" to=\"/\">\r\n\t\t\t\t\t<button className=\"navButtonHome\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Home</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Home Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/HomeAlt.svg?alt=media&token=d71028d0-a3a6-491f-8690-7193f5289cb5\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t\r\n\t\t\t\t<Link className=\"navLink\" to=\"/products/\">\r\n\t\t\t\t\t<button className=\"navButtonCatagories\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Products</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Product Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/ProductsAlt.svg?alt=media&token=686777dc-56a5-4e92-9f13-25121f7b5030\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<span className=\"navTitle\">{this.context.storeData[1].StoreTitle}</span>\r\n\t\t\t\t{\r\n\t\t\t\t\t(this.context.userData === undefined || this.context.userData === null )? \r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/signin\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">Sign in</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\talt=\"Sign In Navigation Button\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/account\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">{this.context.userData.displayName}'s account</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\t\talt=\"Account Navigation Button\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t<Link className=\"navLink\" to=\"/basket\">\r\n\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Basket ({this.state.basketAmount})</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \t\r\n\t\t\t\t\t\t\t\talt=\"Basket Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/BasketAlt.svg?alt=media&token=9c8a999c-0278-4419-b5ea-111a69866065\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\t\r\n\t}\r\n}\r\n\r\nexport default NavigationBar;","import React from 'react';\r\n\r\nclass LoadingScreen extends React.Component{\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"LoadingScreenWrapper\">\r\n\t\t\t\t<span className=\"LoadingScreenMessage\">Loading...</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingScreen;","import React from 'react';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass Catagory extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\r\n\t\t\tlet keys = Object.keys(this.context.storeData[0]);\r\n\t\t\tlet vals = Object.values(this.context.storeData[0]);\r\n\r\n\t\t\tlet idkey= keys.indexOf(\"id\");\r\n\t\t\tkeys.splice(idkey,1);\r\n\t\t\tvals.splice(idkey,1);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tlistKeys : keys,\r\n\t\t\t\tlistValue : vals,\r\n\t\t\t\tstatus : 1\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return (<div className=\"catWrapper\">Error</div>);\r\n\r\n\t\t\tcase 0: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"catWrapper\">\r\n\t\t\t\t\t<div className=\"catList\" >\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.keys(this.state.listKeys).map((data,index) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"catListTag\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={this.state.listKeys[index]} \r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"Catagorys\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"catCheck\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.props.handleSearch(e)}/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label \tclassName=\"catLabel\" htmlFor={this.state.listKeys[index]}>{this.state.listKeys[index]}</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Catagory;","import firebase from './Firebase';\r\n\r\nclass FirebaseAction{\r\n\r\n\tstatic async getProductInfo(id){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\tstatic async setProductInfo(id,info){\r\n\t\tfirebase.firestore().collection(\"productList\").doc(id).update(info);\r\n\t}\r\n\r\n\tstatic async getProductList(){\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async removeProduct(id){\r\n\t\treturn await firebase.firestore().collection(\"productList\").doc(id).delete().catch(console.error);\r\n\r\n\t}\r\n\r\n\tstatic async getUserData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tstatic async getUserOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\treturn data.docs.map(doc => doc.data());\r\n\t}\r\n\r\n\tstatic async getUserOrder(order){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").doc(order).get();\r\n\t\treturn data.data();\r\n\t}\r\n\r\n\tstatic async getStoreSettings(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async addOrderHistory(uid,orderData,gt,token){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<orderData.length; key++){\r\n\t\t\tuploadData.push(JSON.stringify({\r\n\t\t\t\t\"key\":orderData[key].id,\r\n\t\t\t\t\"quantity\" : orderData[key].quantity,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tconst adminData = {\r\n\t\t\tname : token.card.name,\r\n\t\t\t\r\n\t\t\temail : token.email,\r\n\r\n\t\t\taddress : {\r\n\t\t\t\tname : token.card.name,\r\n\t\t\t\tline1 : token.card.address_line1,\r\n\t\t\t\tline2 : token.card.address_line2,\r\n\t\t\t\tcity : token.card.address_city,\r\n\t\t\t\tpostcode : token.card.address_zip,\r\n\t\t\t},\r\n\r\n\t\t\tdata : uploadData,\r\n\t\t\tcreated : firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n\t\t\tstatus : 0,\r\n\r\n\t\t\tuid : uid,\r\n\t\t\ttoken : token.id,\r\n\r\n\t\t\tpaid : gt,\r\n\r\n\t\t};\r\n\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(token.id).set(adminData).catch((error) => {\r\n\t\t\twindow.alert(\"There was an issue placing this order, please contact support\");\r\n\t\t\tconsole.error(\"Unable to write to admin panel! (\"+error+\")\");\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async setOrderRefunded(id){\r\n\t\tawait firebase.firestore().collection(\"adminData\").doc(id).update({status : 4});\r\n\t}\r\n\r\n\tstatic async getAdminData(){\r\n\t\tconst adminData = await firebase.firestore().collection(\"adminData\").where(\"status\",\"<\",3).get().catch((error) => {alert(error); console.log(error)});\r\n\t\tconst mainData = adminData.docs.map(doc => doc.data());\r\n\t\tconst idData = adminData.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\tmainData.sort((a,b) => (a.created > b.created) ? 1 : ((b.created > a.created) ? -1 : 0));\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async setProductImage(id,event){\r\n\t\tconst ref = firebase.storage().ref();\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst meta = {contentType : file.type};\r\n\t\tconst name = id;\r\n\r\n\t\tconst task = ref.child(name).put(file,meta);\r\n\t\t\r\n\t\treturn await task;\r\n\t}\r\n\r\n\tstatic async advanceOrder(order){\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(order.id).update({\r\n\t\t\tstatus : (order.status + 1)\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\t\r\n\t}\r\n\r\n\tstatic async saveSettings(e){\r\n\t\tfirebase.firestore().collection(\"storeSettings\").doc(\"StoreSettings\").update(e)\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async resetPassword(e){\r\n\t\tawait firebase.auth().sendPasswordResetEmail(e);\r\n\t}\r\n\r\n\tstatic async setAdminData(data){\r\n\t\tfirebase.firestore().collection(\"adminData\").add({...data, created : firebase.firestore.FieldValue.serverTimestamp()}).catch(console.error);\r\n\t}\r\n\r\n\tstatic async createUser(display,email,password){\r\n\t\treturn await firebase.auth().createUserWithEmailAndPassword(email, password).then(data=>{\r\n\t\t\tfirebase.firestore().collection(\"userData\").doc(data.user.uid).set({\r\n\t\t\t\tdisplayName : display,\r\n\t\t\t\tisAdmin : false,\r\n\t\t\t}).catch((error)=>{\r\n\r\n\t\t\t\treturn error;\r\n\t\t\t});\r\n\r\n\t\t\treturn data.user.uid;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async signIn(email,password){\r\n\t\treturn await firebase.auth().signInWithEmailAndPassword(email,password).then(data=>{\r\n\t\t\treturn data.user.uid;\r\n\t\t}).catch((error)=>{return error});\r\n\t}\r\n}\r\n\r\nexport default FirebaseAction;","import React from 'react';\r\n\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport Catagory from 'Components/Products/Catagory';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass SearchBox extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {status : 0};\r\n\t\tthis.serverData = [];\r\n\t\tthis.dataList = [];\r\n\r\n\t\tthis.searchInput = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\trunCheck(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.serverData = data; \r\n\t\t\t\tthis.dataList = data;\r\n\t\t\t\r\n\t\t\t\tlet catagoryData = {};\r\n\t\t\t\tlet catKey;\r\n\r\n\t\t\t\tfor(catKey in this.context.storeData[0]){\r\n\t\t\t\t\tcatagoryData = {\r\n\t\t\t\t\t\t...catagoryData,\r\n\t\t\t\t\t\t[catKey] : false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({dataList : catagoryData, status : 1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsearch(element){\r\n\t\tthis.setState({status : 0});\r\n\t\tconst searchterm = element.target.value.toLowerCase();\r\n\r\n\t\tif(!this.state.catagorys){\r\n\t\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.searchCatagory();\r\n\t\t\tthis.dataList = this.dataList.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\tsearchCatagory(){\r\n\t\tthis.setState({status : 0});\r\n\r\n\t\tlet a = this;\r\n\r\n\t\tlet trueVals = Object.keys(this.state.dataList).filter(function(num){\r\n\t\t\treturn a.state.dataList[num];\r\n\t\t});\r\n\r\n\t\tif(trueVals.length === 0){\r\n\t\t\tthis.dataList = this.serverData;\r\n\t\t\tthis.setState({status : 1, catagorys : false});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\tlet prodCat = JSON.parse(data.Catagory).split(\"+\");\r\n\t\t\treturn prodCat.some(r=>trueVals.includes(r));\r\n\t\t});\r\n\t\t\r\n\t\tthis.setState({status : 1, catagorys : true});\r\n\t}\r\n\r\n\thandleCatagoryList(data){\r\n\t\tthis.setState({\r\n\t\t\tdataList : {\r\n\t\t\t\t...this.state.dataList,\r\n\t\t\t\t[data.target.id] : data.target.checked,\r\n\t\t\t}\r\n\t\t},()=>this.searchCatagory());\r\n\t}\r\n\r\n\taddToBasket(data){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket,data);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t}\r\n\r\n\taddBasketItem(basket,data){\r\n\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.props.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbasket.push(data);\r\n\t\tbasket[basket.length-1].quantity = 1;\r\n\t\treturn;\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"schWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"schContainer\">\r\n\t\t\t\t\t\t<div className=\"schLeft\">\r\n\t\t\t\t\t\t\t<Catagory handleSearch={(e) => this.handleCatagoryList(e)}/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"schRight\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"schInput\" placeholder=\"Search...\" onChange={(e)=>this.search(e)}/><br/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"schResult\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.dataList.map((data,index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sliWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/products/${data.id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={data.image} alt={data.productName}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h2>£{data.displayPrice}</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={()=>this.addToBasket(data)}>Buy Now</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBox;","import React from 'react'\r\nimport { Redirect} from \"react-router\";\r\nimport firebase from 'Components/Database/Firebase';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nexport default class ProductPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false};\r\n\t\tthis.openExpandedImage = this.openExpandedImage.bind(this);\r\n\t\tthis.addToBasket = this.addToBasket.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.props.id)\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\r\n\t\tthis.loadData().then(data => {\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.data.id = this.props.id;\r\n\t\t\tthis.data.quantity = 0;\r\n\t\t\tthis.data.displayPrice = this.data.productPrice / 100;\r\n\t\t\tthis.setState({status:1});\r\n\t\t});\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true});\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbasket.push(this.data);\r\n\t\tbasket[basket.length-1].quantity = parseInt(basket[basket.length-1].quantity) + 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\tasync loadData(){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(this.props.id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\topenExpandedImage(){\r\n\t\twindow.open(this.data.image);\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.data.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\r\n\t\tdes = des.map((data)=>{\r\n\t\t\tif(data === \"\"){\r\n\t\t\t\treturn (<span><br/></span>);\r\n\t\t\t} \r\n\t\t\treturn (<span>{data}</span>);\r\n\t\t});\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect)\treturn <Redirect to=\"/basket\" />\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\" onClick={()=>{return window.open(this.data.image)}}>\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\tClick to expand\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(this.data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t<h2>£{JSON.parse(this.data.displayPrice)}</h2>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.getDescription()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button onClick={(e)=>this.addToBasket()}>Buy Now</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React from 'react';\r\n\r\nimport SearchBox from 'Components/Products/SearchBox';\r\nimport ProductPage from 'Components/Products/ProductPage';\r\n\r\nclass ProductList extends React.Component{\r\n\trender(){\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn <SearchBox />\r\n\t\t}else{\r\n\t\t\treturn <ProductPage id={this.props.match.params.id}/>\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductList;","import React from 'react'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\t\r\nconst stripePromise = loadStripe('pk_test_51HHEl2HbWsI0wL0616xJL9FkVOSuvpDFAfYvYfwwmOv044YOH4npf2jEko9ISFcouW3Y5ETqkQMWxeizaDANXNTL0018qa39p8');\r\n\r\nclass Basket extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {checkoutText : \"Proceed to Checkout\", storedItems : JSON.parse(window.localStorage.getItem(\"basket\")),};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tcalculateTotal(){\r\n\t\tlet total = 0;\r\n\r\n\t\tfor(let a=0; a<this.state.storedItems.length; a++){\r\n\t\t\ttotal = total + (this.state.storedItems[a].productPrice * this.state.storedItems[a].quantity);\r\n\t\t\ttotal = total + (this.state.storedItems[a].deliveryPrice * this.state.storedItems[a].quantity);\r\n\t\t}\r\n\r\n\t\tthis.setState({grandTotal:total});\r\n\t}\r\n\r\n\tremoveItem(e){\r\n\t\tif(window.confirm(\"This will remove all of this item from your basket, are you sure?\")){\r\n\t\t\tlet data = this.state.storedItems;\r\n\r\n\t\t\tfor(let a=0; a<data.length; a++){\r\n\t\t\t\tif(data[a].id === e.target.id)\tdata.splice(a,1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({storedItems : data}, () => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\t\tthis.calculateTotal();\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBasketItemQuantity(e){\r\n\t\te.target.value = e.target.value.replace(\".\"\t,\"\");\r\n\t\te.target.value = e.target.value.replace(\",\",\"\");\r\n\t\te.target.value = e.target.value.replace(\" \",\"\");\r\n\r\n\r\n\t\tlet oldData = this.state.storedItems;\r\n\r\n\t\tfor(let a=0; a<oldData.length; a++){\r\n\t\t\tif(oldData[a].id === e.target.id){\r\n\t\t\t\toldData[a].quantity = e.target.value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({storedItems : oldData},() => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tgetBasketData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"key\":this.state.storedItems[key].id,\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tparseData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"name\" : JSON.parse(this.state.storedItems[key].productName),\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t\t\"price\" : this.state.storedItems[key].productPrice,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tasync handleClick(event){\r\n\t\tthis.setState({checkoutText : \"Please Wait...\"});\r\n\t\tconst stripe = await stripePromise;\r\n\t\tconst response = await fetch('https://www.bystuart.co.uk/store-example/checkout-session', { method: 'POST', body:JSON.stringify({\r\n\t\t\tuid : btoa(this.context.currentUser.uid),\r\n\t\t\tdata : btoa(this.parseData()),\r\n\t\t\tthroughdata : btoa(this.getBasketData()),\r\n\t\t})});\r\n\r\n\t\tconst session = await response.json();\r\n\t\tconsole.log(session.id);\r\n\t\tconst result = await stripe.redirectToCheckout({\r\n\t\t\tsessionId: session.id,\r\n\t\t});\r\n\r\n\t\tif (result.error) {\r\n\t\t\tthis.setState({checkoutText : \"Error: \"+result.error.message});\r\n\t\t\tconsole.error(response.text());\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"basketWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"basketContainer\">\r\n\t\t\t\t\t<div className=\"basketTopBar\">\r\n\t\t\t\t\t\tMy Basket\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketList\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.storedItems.map((item,index) => (\r\n\t\t\t\t\t\t\t\t<div className=\"basketListItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemImageCont\"><img className=\"basketListItemImage\" alt=\"Store Item\" src={item.image}/></div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemName\">{JSON.parse(item.productName)}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPrice\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.productPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceDelivery\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.deliveryPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemQuantity\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityInput\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.quantity} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.changeBasketItemQuantity(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemRemove\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityRemove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"&#10007;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => this.removeItem(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketBottomBar\">\r\n\t\t\t\t\t\tYour total comes to £{(this.state.grandTotal/100).toFixed(2)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className=\"basketCheckoutButton\" role=\"link\" onClick={(e)=>this.handleClick(e)}>\r\n\t\t\t\t\t\t\t{this.state.checkoutText}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Basket;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutSuccess extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t\tdata : JSON.parse(atob(this.props.location.search.split(\"=\")[1])),\r\n\t\t};\r\n\r\n\t\tFirebaseAction.setAdminData(this.state.data);\r\n\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tHello, {this.state.data.email}!<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tSince this is an example store, no actual payment was taken.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutSuccess;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth'\r\n\r\nclass CheckoutCancel extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t};\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tUnfortunately an error has occured or the action was cancelled.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutCancel;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\n\r\nclass MainPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {status : -1};\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.storeData && this.state.status === -1)\tthis.setState({status : 0});}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <LoadingScreen />\r\n\t\t \r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"MainPage\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t<header></header>\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundLeft}} pos=\"left\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkLeft}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageLeft} alt={this.context.storeData[1].ColumnAltLeft}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section  style={{background:this.context.storeData[1].ColumnBackgroundCenter}} pos=\"middle\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkCenter}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageCenter} alt={this.context.storeData[1].ColumnAltCenter}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t<section style={{background:this.context.storeData[1].ColumnBackgroundRight}} pos=\"right\">\r\n\t\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkRight}>\r\n\t\t\t\t\t\t\t\t<img src={this.context.storeData[1].ColumnImageRight} alt={this.context.storeData[1].ColumnAltRight}/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {Redirect, Link} from 'react-router-dom';\r\n\r\nclass SignIn extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t}\r\n\r\n\thandleSignIn(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {email,password} = event.target.elements; \r\n\t\t\r\n\t\tFirebaseAction.signIn(email.value,password.value).then(data=>{\r\n\t\t\tif(data.message){\r\n\t\t\t\tthis.setState({error : data});\r\n\t\t\t}else{\r\n\t\t\t\tthis.setState({redirect : true});\r\n\t\t\t}\r\n\t\t}).catch((error)=>{this.setState({error : error})});\r\n\t\t\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to={this.state.redirect}/>\r\n\t\treturn (\r\n\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={(e)=>this.handleSignIn(e)}  className=\"SignInWrapper\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Email</h1>\r\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" placeholder=\"example@example.com\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Password</h1>\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"password\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div flag=\"error\" style={{\"display\":(this.state.error ? \"initial\" : \"none\")}}>\r\n\t\t\t\t\t\t{\tthis.state.error?.code === \"auth/user-not-found\" ? \r\n\t\t\t\t\t\t\t\t<h3><Link to=\"/signup\">\r\n\t\t\t\t\t\t\t\t\tNo Account found, Sign up instead?\r\n\t\t\t\t\t\t\t\t</Link></h3>\r\n\t\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t\t<h3>Error: {this.state.error?.message}</h3> \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t\t\t\t<h4 onClick={()=>{this.setState({redirect : \"/signup\"})}}>Create Account</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction'\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass SignUp extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t}\r\n\r\n\thandleSignUp(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {display,email,password} = event.target.elements;\r\n\r\n\t\tFirebaseAction.createUser(display.value,email.value,password.value).then((data)=>{\r\n\t\t\tthis.setState({redirect : \"/\"});\r\n\t\t}).catch((error)=>{this.setState({error : error})});\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to=\"/\"/>\r\n\t\treturn (\r\n\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={(e)=>{this.handleSignUp(e)}}  className=\"SignInWrapper\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Display Name</h1>\r\n\t\t\t\t\t\t<input type=\"text\" name=\"display\" placeholder=\"Jane Doe\" required/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Email</h1>\r\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" placeholder=\"example@example.com\" required/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1>Password</h1>\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"password\" required/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div flag=\"error\" style={{\"display\":(this.state.error ? \"initial\" : \"none\")}}>\r\n\t\t\t\t\t\t<h3>Error: {this.state.error?.message}</h3\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\">Create Account</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignUp;","import React from 'react';\r\n\r\nclass PageNavigation extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage : 0,\r\n\t\t\tmaxPages : this.props.maxPages,\r\n\t\t};\r\n\t}\r\n\r\n\tprevPage(){\r\n\t\tif(this.state.currentPage - 1 >= 0){\r\n\t\t\tthis.setState({currentPage : this.state.currentPage - 1},\r\n\t\t\t() => {this.props.onPageChange(this.state.currentPage)});\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.state.currentPage + 1 < this.state.maxPages){\r\n\t\t\tthis.setState(\r\n\t\t\t\t{currentPage : this.state.currentPage + 1},\r\n\t\t\t\t()=>{this.props.onPageChange(this.state.currentPage)}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tlet returnValue = [];\r\n\r\n\t\treturnValue.push(<div key=\"leftCap\" onClick={()=>this.prevPage()} className=\"GlobalNavBallLeftCap\"></div>);\r\n\t\t\r\n\r\n\t\tfor(let a=0; a<this.state.maxPages; a++){\r\n\t\t\treturnValue.push(\r\n\t\t\t\t<div \tonClick={()=>this.setState({currentPage : a},() => {this.props.onPageChange(this.state.currentPage)})}\r\n\t\t\t\t\t\tkey={a} \r\n\t\t\t\t\t\tclassName={(a === this.state.currentPage ? \"GlobalNavBallFilled\" : \"GlobalNavBall\")}>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturnValue.push(<div key=\"rightCap\" onClick={() => this.nextPage()} className=\"GlobalNavBallRightCap\"></div>);\r\n\t\t\r\n\t\treturn (<div className=\"GlobalPageNavigation\">{returnValue}</div>);\r\n\t}\r\n}\r\n\r\nexport default PageNavigation;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Account extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t\tshowPage : 0,\r\n\r\n\t\t\tmaxPages : 2,\r\n\r\n\t\t\tresetSent : false,\r\n\t\t\torderHistory : undefined,\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){this.waitForContext();\t}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\t\tthis.waitForContext();\t}\r\n\twaitForContext(){if(this.context && this.context.userData && this.context.currentUser && this.context.storeData && this.context.orderHistory && this.state.status === -1){this.setState({orderHistory : [], status : -2},()=>this.processOrderHistory());}}\r\n\r\n\tasync resetPassword(){\r\n\t\tFirebaseAction.resetPassword(this.context.currentUser.email)\r\n\t\tthis.setState({resetSent : true});\r\n\t}\r\n\r\n\tasync processOrderHistory(){\r\n\t\tfor(let order=0; order<this.context.orderHistory.length; order++){\t\t\t\r\n\t\t\tlet currentOrder = [];\r\n\r\n\t\t\tlet currentOrderData = this.context.orderHistory[order];\r\n\t\t\t\r\n\t\t\tfor(let item=0; item<currentOrderData.data.length; item++){\r\n\t\t\t\tlet info = JSON.parse(currentOrderData.data[item]);\r\n\r\n\t\t\t\tawait FirebaseAction.getProductInfo(info.key).then((data) => {\r\n\t\t\t\t\tcurrentOrder.push({\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\tproductName : JSON.parse(data.productName),\r\n\t\t\t\t\t\tsku : JSON.parse(data.sku),\r\n\t\t\t\t\t\tproductDescription : JSON.parse(data.productDescription),\r\n\t\t\t\t\t\tCatagory : JSON.parse(data.Catagory),\r\n\t\t\t\t\t\tquantity : info.quantity,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet array = this.state.orderHistory;\r\n\t\t\tarray.push(currentOrder);\r\n\t\t\tthis.setState({orderHistory : array});\r\n\t\t}\r\n\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\t\t\tcase 0: default: \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t\t<div className=\"accPanelTitle\">Display Settings</div>\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accDisplayName\">Display Name</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accDisplayName\" \r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.userData.displayName}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accEmail\">Email</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accEmail\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.currentUser.email}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accResetPassword\">Password</label><br/>\r\n\t\t\t\t\t\t\t<button id=\"accResetPassword\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelButton\" \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.resetSent} \r\n\t\t\t\t\t\t\t\t\tonClick={() => this.resetPassword()}>Change Password</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\tcase 1:\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accPanel\" style={{\"justify-content\":\"initial\"}}>\r\n\t\t\t\t\t<div className=\"accPanelTitle\">Order History</div><br/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.context.orderHistory.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link key={index} className=\"accPanelItem\" to={\"/account/order/\"+data.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"accPanelItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"GlobalSpacer\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemPlaced\">Placed: {data.created.toDate().toDateString()}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderHistory[index].map((item,index2) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"accOHItemInfo\" key={index2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tItem #{index2+1} - {item.productName}({item.quantity})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemStatus\">Status: {this.state.orderStatus[data.status]}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemTotal\">Paid: £{data.paid/100}</span> \r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -3: default: return <span>Error!</span>;\r\n\r\n\t\tcase -1: case -2: return <LoadingScreen />\r\n\r\n\t\tcase 0: \r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t{this.renderPanel()}\r\n\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Account;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport firebase from 'Components/Database/Firebase';\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\n\r\nclass ProductEditor extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false, changedData : {}};\r\n\t\tthis.changedData = {};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tFirebaseAction.getProductInfo(this.props.match.params.id).then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.data.id = this.props.match.params.id;\r\n\t\t\t\t\r\n\t\t\t\tif(isNaN(this.data.productPrice)){\r\n\t\t\t\t\tconsole.error(\"data.productPrice was NaN, reset to 0\");\r\n\t\t\t\t\tthis.data.productPrice = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.displayPrice = parseInt(this.data.productPrice) / 100;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({changedData : this.data});\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsaveChanges(){\r\n\t\tthis.savedData = this.state.changedData;\r\n\t\tthis.savedData.productPrice = parseInt(JSON.parse(this.savedData.productPrice));\r\n\t\tthis.savedData.deliveryPrice = parseInt(JSON.parse(this.savedData.deliveryPrice));\r\n\t\tFirebaseAction.setProductInfo(this.props.match.params.id,this.savedData);\r\n\t}\r\n\r\n\thandleChange(element,name){\r\n\t\tlet data;\r\n\t\t\r\n\t\tif(name === \"productDescription\"){\r\n\t\t\tdata = element.target.value;\r\n\r\n\t\t\tdata = data.replaceAll(\"</span><span><br></span>\",\"\\n\\n\");\r\n\t\t\tdata = data.replaceAll(\"<span>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"</span>\",\"\\n\");\r\n\t\t\tdata = data.replaceAll(\"&nbsp;\",\" \");\r\n\r\n\t\t\tif(data.endsWith(\"\\n\")){\r\n\t\t\t\tdata = data.slice(0,-1);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}else if(name === \"productPrice\"){\r\n\t\t\tdata = element.target.value.substr(1);\r\n\t\t}else{\r\n\t\t\tdata = element.target.value;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tchangedData : {\r\n\t\t\t\t...this.state.changedData,\r\n\t\t\t\t[name] : JSON.stringify(data),\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDescription(){\r\n\t\tlet des = this.state.changedData.productDescription;\r\n\r\n\t\tdes = JSON.parse(des);\r\n\t\tdes = des.split(\"\\n\");\r\n\t\tdes = des.map((data)=>{if(data === \"\"){return \"<span><br></span>\";} return \"<span>\"+data+\"</span>\";});\r\n\t\tdes = des.toString().replaceAll(\">,<\",\"><\");\r\n\r\n\t\treturn des;\r\n\t}\r\n\r\n\tuploadFile(event){\r\n\r\n\t\tlet dat = FirebaseAction.setProductImage(this.props.match.params.id,event);\r\n\t\tdat.then(snapshot => snapshot.ref.getDownloadURL())\r\n\t\t\t.then((url) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangedData : {\r\n\t\t\t\t\t\t...this.state.changedData,\r\n\t\t\t\t\t\timage:url,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.data.image = this.state.changedData.image;\r\n\t\t\t\tthis.saveChanges();\r\n\t\t}).catch(console.error);\t\t\r\n\t}\r\n\r\n\trenderItem(){\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<main>\r\n\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t<img src={this.data.image} />\r\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={(e)=>this.uploadFile(e)}/>\r\n\t\t\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t<section pos=\"top\">\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productName)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productName\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h1\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<ContentEditable\r\n\t\t\t\t\t\t\t\t\t\thtml={\"£\"+JSON.parse(this.state.changedData.productPrice)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productPrice\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"h2\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\tpos=\"middle\"\r\n\t\t\t\t\t\t\t\t\t\thtml={this.getDescription()}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>{this.handleChange(e,\"productDescription\")}}\r\n\t\t\t\t\t\t\t\t\t\ttagName=\"section\"/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<section pos=\"bottom\">\r\n\t\t\t\t\t\t\t\t\t<button onClick={()=>this.saveChanges()}>Save Changes</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync addNewProduct(){\r\n\t\tconst blankData = {\r\n\t\t\tproductName : \"\\\"\\\"\",\r\n\t\t\tproductDescription : \"\\\"\\\"\",\r\n\t\t\tCatagory : \"\\\"\\\"\",\r\n\t\t\tdeliveryPrice : 0,\r\n\t\t\tproductPrice : 0,\r\n\t\t\tsku : \"\\\"\\\"\",\r\n\t\t\timage : \"\\\"\\\"\",\r\n\t\t\tunitPerDeliveryCharge : 0,\r\n\t\t};\r\n\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").add(blankData);\r\n\t\tthis.setState({redirect : '/editor/'+data.id});\r\n\t}\r\n\r\n\tremoveItem(id){\r\n\t\tif(window.confirm(\"This action cannot be undone, are you sure?\")){\r\n\t\t\tFirebaseAction.removeProduct(id);\r\n\t\t}\r\n\t}\r\n\r\n\trenderSelector(){\r\n\t\treturn (\r\n\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"productEditorPageWrapper\">\r\n\t\t\t\t\t<header>Edit specific product</header>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.data.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\t\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"productEditorListContainer\">\r\n\t\t\t\t\t\t\t\t\t<section pos=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<img src={data.image} />\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"middle\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>{JSON.parse(data.productName)}</h1>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<section pos=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.setState({redirect : \"/editor/\"+data.id})}}>Edit</button>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>{this.removeItem(data.id)}}>Remove</button>\r\n\t\t\t\t\t\t\t\t\t</section>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</main>\r\n\t\t\t\t\t<footer>\r\n\t\t\t\t\t\t<button className=\"productEditorListAddButton\" onClick={() => this.addNewProduct()}>Add new item</button>\r\n\t\t\t\t\t</footer>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to={this.state.redirect} />\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn this.renderSelector();\r\n\t\t}else{\r\n\t\t\treturn this.renderItem();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductEditor;","import React from 'react';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport PageNavigation from 'Components/Navigation/PageNavigation';\r\n\r\nclass Admin extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t\tstatus : -1,\r\n\r\n\t\t\tshowPage : 0,\r\n\t\t\tmaxPages : 2\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tasync getInfo(){\r\n\t\tif(\tthis.context !== undefined && this.context.currentUser !== undefined && this.context !== null && this.context.currentUser !== null && this.context.storeData !== undefined && this.context.storeData[0] !== undefined && this.context.storeData[1] !== undefined && this.state.status === -1){\r\n\t\t\tif(this.state.orderData !== undefined) return; \r\n\t\t}\r\n\r\n\t\tthis.setState({orderData : [], status : 0});\r\n\t\t\t\r\n\t\t\tawait FirebaseAction.getAdminData().then((data) => {\r\n\t\t\t\tthis.setState({openOrders : data},()=>{\r\n\r\n\t\t\t\t\tthis.state.openOrders.map(async (odat,index)=>{\r\n\t\t\t\t\t\tlet oldState = this.state.orderData;\r\n\t\t\t\t\t\toldState.push([]);\r\n\r\n\t\t\t\t\t\tthis.setState({orderData : oldState},()=>{\r\n\t\t\t\t\t\t\todat.data.map(async(order)=>{\r\n\t\t\t\t\t\t\t\tlet key = JSON.parse(order).key;\r\n\r\n\t\t\t\t\t\t\t\tawait FirebaseAction.getProductInfo(key).then((retData)=>{\r\n\t\t\t\t\t\t\t\t\tlet oldArray = this.state.orderData;\r\n\t\t\t\t\t\t\t\t\toldArray[index].push(retData);\r\n\t\t\t\t\t\t\t\t\tthis.setState({orderData : oldArray});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthis.setState({columnSettings : this.context.storeData[1], status : 1});\r\n\t}\r\n\t\r\n\tadvanceFullfillment(index){\r\n\t\tlet order = this.state.openOrders[index];\r\n\t\tif(order.status < 3){\r\n\t\t\tFirebaseAction.advanceOrder(order).then(() => {\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSettingsChange(e){\r\n\t\tthis.setState({\r\n\t\t\tcolumnSettings : {\r\n\t\t\t\t...this.state.columnSettings,\r\n\t\t\t\t[e.target.name] : e.target.value.replace(/\\n/g, '')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveSettings(){\r\n\t\tFirebaseAction.saveSettings(this.state.columnSettings);\r\n\t}\r\n\r\n\tasync makeRefund(id, pid){\r\n\t\tconst response = await fetch('http://localhost:4242/make-refund', { method: 'POST', body: btoa(pid) });\r\n\t\tconst data = await response.json();\r\n\r\n\t\tif(data.status === \"failed\"){\r\n\t\t\talert(\"Unable to refund, \"+data.reason);\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tFirebaseAction.setOrderRefunded(id).then(()=>{\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trenderColumnSettings(name){\r\n\t\treturn (\r\n\t\t\t<div className={\"admColumnSettings\"+name}>\r\n\t\t\t\t<span className=\"admColumnSettingsTitle\">{name} Column Settings</span><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"admColumnSettingImage\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnImage\"+name}>Image Link for {name} Column</label>\r\n\t\t\t\t\t<textarea \ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"admColumnSettingsInputLink\"\r\n\t\t\t\t\t\t\t\tname={\"ColumnImage\"+name}\r\n\t\t\t\t\t\t\t\tid={\"ColumnImage\"+name} \r\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnImage\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingAlt\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnAlt\"+name}>Alt text for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnAlt\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnAlt\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnAlt\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingLink\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnLink\"+name}>Link for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnLink\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnLink\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnLink\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingColor\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnBackground\"+name}>Background Color for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"color\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnBackground\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\r\n\t\t\tdefault: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 0: \r\n\t\t\t\tif(this.state.openOrders.length === 0){\r\n\t\t\t\t\treturn (<div className=\"admPanel\">No current open orders.</div>);\r\n\t\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.openOrders.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"admOI\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOITitle\">Order #{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIBio\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIBioTitle\">Recipient Information</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIName\">Name: {data.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIEmail\"><a href={\"mailto:\"+data.email}>Email: {data.email}</a></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIAddress\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIAddressTitle\">Shipping Address</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.line1}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{data.address.line2 !== null && <span className=\"admOIAddressLine\">{data.address.line2}</span>}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.city}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.postcode}</span><br/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderData[index].map((dat2)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"AdmOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{JSON.parse(dat2.productName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIStatus\"> \r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIStatusText\">Status: {this.state.orderStatus[data.status]}</span>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIAdvanceOrder\" disabled={data.status >= 3} onClick={() => this.advanceFullfillment(index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status >= 3 && <b>Completed Order</b>}\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status < 3 && <b>Advance to {this.state.orderStatus[data.status+1]}</b>}\r\n\t\t\t\t\t\t\t\t\t\t</button><br/>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIRefund\" onClick={()=>this.makeRefund(data.id, data.pid)}>Issue Refund</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t<div className=\"admPanelColumnSettings\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<label htmlFor=\"StoreTitle\">Store Title</label><br/>\r\n\t\t\t\t\t\t<input type=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tid=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.columnSettings.StoreTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"admColumnSettingsWrapper\">\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Left\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Center\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Right\")}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button onClick={()=>this.saveSettings()}>Save Changes</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: case 0: default: return (<LoadingScreen />);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t\t<div className=\"admWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\r\n\t\t\t\t\t\t{this.renderPanel()}\r\n\r\n\t\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\n\r\nimport FirebaseAction from 'Components/Database/FirebaseAction';\r\nimport LoadingScreen from 'Components/Util/LoadingScreen';\r\nimport NavigationBar from 'Components/Navigation/NavigationBar';\r\nimport {AuthContext} from 'Components/Auth/Auth';\r\n\r\nclass ViewOrder extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.statusTitles = [\r\n\t\t\t\"Placed\",\r\n\t\t\t\"Dispatched\",\r\n\t\t\t\"Out for delivery\",\r\n\t\t\t\"Complete\",\r\n\t\t\t\"Returned\"\r\n\t\t];\r\n\r\n\t\tthis.statusDescriptions = [\r\n\t\t\t\"Placed, in the system ready to be dispatched\",\r\n\t\t\t\"Dispatched, ready to be sent out for delivery\",\r\n\t\t\t\"Out for delivery, with our postal carrier\",\r\n\t\t\t\"Completed, order has been recieved\",\r\n\t\t\t\"Refunded, Sorry if there was a problem with your order\"\r\n\t\t];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tid : this.props.match.params.id,\r\n\t\t\tproductInfo : {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getUserOrder(this.state.id).then((data) => {\r\n\t\t\t\t\r\n\t\t\t\tif(data === undefined){\r\n\t\t\t\t\tthis.setState({status : -1});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet dateString = \"\";\r\n\t\t\t\t\tlet date = data.created.toDate();\r\n\r\n\t\t\t\t\tconst month = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\n\t\t\t\t\tdateString = month[date.getMonth()]+\" \"+date.getDate();\r\n\r\n\t\t\t\t\tif(date.getDate().toString().endsWith(\"1\")){\r\n\t\t\t\t\t\tdateString = dateString+\"st \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"2\")){\r\n\t\t\t\t\t\tdateString = dateString+\"nd \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"3\")){\r\n\t\t\t\t\t\tdateString = dateString+\"rd \";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdateString = dateString+\"th \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdateString = dateString + date.getFullYear();\r\n\r\n\t\t\t\t\tthis.setState({orderData : {...data,dateString : dateString}});\r\n\r\n\t\t\t\t\tfor(let a=0; a<data.data.length; a++){\r\n\t\t\t\t\t\tlet itemData = JSON.parse(data.data[a]);\r\n\r\n\t\t\t\t\t\tFirebaseAction.getProductInfo(itemData.key).then((info) => {\r\n\t\t\t\t\t\t\tlet productInfo = JSON.parse(JSON.stringify(this.state.productInfo));\r\n\t\t\t\t\t\t\tproductInfo = {\r\n\t\t\t\t\t\t\t\t...productInfo,\r\n\t\t\t\t\t\t\t\t[itemData.key] : {\r\n\t\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\t\tproductName : JSON.parse(info.productName),\r\n\t\t\t\t\t\t\t\t\tCatagory : JSON.parse(info.Catagory),\r\n\t\t\t\t\t\t\t\t\tproductDescription : JSON.parse(info.productDescription),\r\n\t\t\t\t\t\t\t\t\tsku : JSON.parse(info.sku),\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.setState({productInfo : productInfo},()=>{\r\n\t\t\t\t\t\t\t\tif(a === data.data.length-1){\r\n\t\t\t\t\t\t\t\t\tthis.setState({status : 1});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\r\n\t\t\tcase -1: default: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelError\">Error loading order information</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<LoadingScreen />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelTitle\">About your order placed <span>{this.state.orderData.dateString}</span></div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelStatus\">\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusBig\">Your order is {this.statusTitles[this.state.orderData.status]}</span><br/>\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusSmall\">{this.statusDescriptions[this.state.orderData.status]}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelShipping\">\r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Shipping Address</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.name}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.line1}</span><br/>\r\n\t\t\t\t\t\t{this.state.orderData.address.line2 !== null ? (<span>{this.state.orderData.address.line2}</span>) : <span></span>}<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.city}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.postcode\t}</span><br/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelItems\"> \r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Order Items</span>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.orderData.data.map((data,index) => {\r\n\t\t\t\t\t\t\t\tlet item = JSON.parse(data);\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"vopPanelOrderItem\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemTitle\">(x{item.quantity}) {this.state.productInfo[item.key].productName}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemPrice\">£{this.state.productInfo[item.key].displayPrice} + (£{(this.state.productInfo[item.key].deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\t\r\n\r\n\t\t\t\t\t<div className=\"vopPanelTotal\">\r\n\t\t\t\t\t\tOrder Total: £{(this.state.orderData.paid/100).toFixed(2)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ViewOrder;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport {HashRouter as Router, Route} from 'react-router-dom';\n\nimport firebase from 'Components/Database/Firebase';\nimport AuthProvider from 'Components/Auth/Auth'\n\nimport ProductList from 'Components/Products/ProductList';\nimport Basket from 'Components/Checkout/Basket';\nimport CheckoutSuccess from 'Components/Checkout/CheckoutSuccess';\nimport CheckoutCancel from 'Components/Checkout/CheckoutCancel';\nimport MainPage from 'Components/MainPage';\nimport SignIn from 'Components/Auth/SignIn';\nimport SignUp from 'Components/Auth/SignUp';\nimport Account from 'Components/Account/Account';\nimport ProductEditor from 'Components/Products/Editor/ProductEditor';\nimport Admin from 'Components/Admin/Admin';\nimport ViewOrder from 'Components/Admin/ViewOrder';\n\nclass MainApp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.dataList = [];\n\t\tthis.state = {status : 0};\n\t\tif(window.localStorage.getItem(\"basket\") === null)\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({status : 0});\n\n\t\tthis.loadData().then(data => {\n\t\t\tthis.dataList = data;\n\t\t\tthis.setState({status : 1});\n\t\t});\n\t}\n\n\tasync loadData(){\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\n\t\tconst mainData = data.docs.map(doc => doc.data());\n\t\tconst idData = data.docs.map(doc => doc.id);\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\n\t\treturn mainData;\n\t}\n\n\trender(){\n\t\tif(this.state.status === 0 || this.context.storeData === null){\n\t\t\treturn <div className=\"Wrapper\">Loading data...</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<AuthProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/\" exact component={MainPage} />\n\t\t\t\t\t<Route path=\"/basket\" exact component={Basket} />\n\t\t\t\t\t<Route path=\"/success\" exact component={CheckoutSuccess} />\n\t\t\t\t\t<Route path=\"/cancel\" exact component={CheckoutCancel} />\n\t\t\t\t\t<Route path=\"/products/:id?\" exact component={ProductList}/>\n\t\t\t\t\t<Route path=\"/signin\" exact component={SignIn}/>\n\t\t\t\t\t<Route path=\"/signup\" exact component={SignUp}/>\n\t\t\t\t\t<Route path=\"/account\" exact component={Account}/>\n\t\t\t\t\t<Route path=\"/editor/:id?\" exact component={ProductEditor} />\n\t\t\t\t\t<Route path=\"/admin\" exact component={Admin} />\n\t\t\t\t\t<Route path=\"/account/order/:id?\" component={ViewOrder} />\n\t\t\t\t</Router>\n\t\t\t</AuthProvider>\n\t\t);\n\t}\n}\n\nReactDOM.render(<MainApp/>,document.getElementById('root'));"],"sourceRoot":""}