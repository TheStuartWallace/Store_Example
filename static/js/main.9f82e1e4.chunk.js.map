{"version":3,"sources":["Components/Firebase.js","Components/Auth.js","Components/StoreListItem.js","Components/NavigationBar.js","Components/LoadingScreen.js","Components/Catagory.js","Components/FirebaseAction.js","Components/SearchBox.js","Components/StoreItemPage.js","Components/ProductList.js","Components/Basket.js","Components/CheckoutSuccess.js","Components/CheckoutCancel.js","Components/MainPage.js","Components/SignIn.js","Components/PageNavigation.js","Components/Account.js","Components/ProductEditor.js","Components/Admin.js","Components/ViewOrder.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","props","state","currentUser","undefined","storeData","orderHistory","loadStoreData","bind","loadData","auth","onAuthStateChanged","user","setState","uid","then","userData","loadOrderHistory","this","data","firestore","collection","doc","get","mainData","where","docs","map","idData","id","index","Provider","value","children","Component","StoreListItem","redirect","quantity","displayPrice","productPrice","basket","JSON","parse","window","localStorage","getItem","addBasketItem","setItem","stringify","a","length","console","log","parseInt","push","to","className","src","image","alt","productName","onClick","addToBasket","NavigationBar","status","basketAmount","getTotal","total","x","context","StoreTitle","displayName","contextType","LoadingScreen","Catagory","keys","Object","vals","values","idkey","indexOf","splice","listKeys","listValue","key","type","name","onChange","e","handleSearch","htmlFor","FirebaseAction","exists","info","update","order","orderData","gt","token","uploadData","adminData","card","email","address","line1","address_line1","line2","address_line2","city","address_city","postcode","address_zip","created","FieldValue","serverTimestamp","paid","set","catch","error","alert","sort","b","event","ref","storage","file","target","files","meta","contentType","task","child","put","sendPasswordResetEmail","SearchBox","serverData","dataList","searchInput","createRef","runCheck","getProductList","catKey","catagoryData","element","searchterm","toLowerCase","catagorys","searchCatagory","filter","includes","trueVals","num","split","some","r","checked","handleCatagoryList","placeholder","search","StoreItemPage","openExpandedImage","getData","open","contentEditable","productDescription","deliveryPrice","toFixed","ProductList","match","params","stripePromise","loadStripe","Basket","storedItems","calculateTotal","grandTotal","confirm","replace","oldData","stripe","fetch","method","body","btoa","parseData","throughdata","getBasketData","response","json","session","redirectToCheckout","sessionId","text","item","min","max","defaultValue","changeBasketItemQuantity","removeItem","role","handleClick","CheckoutSuccess","atob","location","CheckoutCancel","MainPage","ColumnLinkLeft","style","background","ColumnBackgroundLeft","ColumnImageLeft","ColumnAltLeft","ColumnLinkCenter","ColumnBackgroundCenter","ColumnImageCenter","ColumnAltCenter","ColumnLinkRight","ColumnBackgroundRight","ColumnImageRight","ColumnAltRight","SignIn","handleSignIn","preventDefault","elements","password","signInWithEmailAndPassword","onSubmit","PageNavigation","currentPage","maxPages","onPageChange","returnValue","prevPage","nextPage","Account","showPage","resetSent","orderStatus","processOrderHistory","resetPassword","currentOrder","currentOrderData","getProductInfo","sku","array","disabled","class","toDate","toDateString","index2","renderPanel","ProductEditor","changedData","isNaN","savedData","setProductInfo","replaceAll","setProductImage","snapshot","getDownloadURL","url","saveChanges","html","handleChange","uploadFile","tagName","blankData","unitPerDeliveryCharge","add","addNewProduct","renderItem","renderSelector","Admin","getInfo","getAdminData","openOrders","odat","oldState","retData","oldArray","columnSettings","advanceOrder","saveSettings","pid","reason","setOrderRefunded","handleSettingsChange","href","dat2","advanceFullfillment","makeRefund","renderColumnSettings","ViewOrder","statusTitles","statusDescriptions","productInfo","getUserOrder","dateString","date","getMonth","getDate","toString","endsWith","getFullYear","itemData","MainApp","Auth","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9f82e1e4.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyD3EtMzgHnjYat2LbYjYGJi6goQ72UpqLQ\",\r\n\tauthDomain: \"storeexample-1c12e.firebaseapp.com\",\r\n\tdatabaseURL: \"https://storeexample-1c12e.firebaseio.com\",\r\n\tprojectId: \"storeexample-1c12e\",\r\n\tstorageBucket: \"storeexample-1c12e.appspot.com\",\r\n\tmessagingSenderId: \"113670337584\",\r\n\tappId: \"1:113670337584:web:837407a10474f3a3fea9f5\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React from \"react\";\r\nimport firebase from \"./Firebase\";\r\n\r\nexport const AuthContext = React.createContext(null);\r\n\r\nclass AuthProvider extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentUser : undefined,\r\n\t\t\tstoreData : undefined,\r\n\t\t\torderHistory : undefined,\r\n\t\t};\r\n\r\n\t\tthis.loadStoreData = this.loadStoreData.bind(this);\r\n\t\tthis.loadData = this.loadData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tfirebase.auth().onAuthStateChanged(user =>{\r\n\t\t\tthis.setState({currentUser : user});\r\n\t\t\tif(user === null) return;\r\n\t\t\tthis.loadData(user.uid).then(userData =>{\r\n\t\t\t\tthis.setState({userData});\r\n\t\t\t});\r\n\t\t\tthis.loadOrderHistory(user.uid).then(orderHistory =>{\r\n\t\t\t\tthis.setState({orderHistory : orderHistory})\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.loadStoreData().then(data =>{\r\n\t\t\tthis.setState({storeData : data});\r\n\t\t});\r\n\t}\r\n\r\n\tasync loadData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tasync loadOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadStoreData(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tasync loadProductList(){\r\n\t\tconst data = await firebase.firestore.collection(\"productList\").get();\r\n\t\tconst mainData = data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={this.state}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AuthProvider;"," import React from 'react';\r\n\r\nimport {Link, Redirect} from 'react-router-dom';\r\n\r\nclass StoreListItem extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {redirect : null};\r\n\t\tthis.props.data.quantity = 0;\r\n\t\tthis.props.data.displayPrice = (this.props.data.productPrice) / 100;\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true})\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.props.data.id){\r\n\t\t\t\t\tconsole.log(parseInt(basket[a].quantity) + 1);\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbasket.push(this.props.data);\r\n\t\tbasket[basket.length-1].quantity = 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect)\t\treturn <Redirect to=\"/basket\"/>\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"sliWrapper\">\r\n\t\t\t\t<Link to={`/products/${this.props.data.id}`} className=\"sli\">\r\n\t\t\t\t\t\t<img className=\"sliImage\" src={this.props.data.image} alt={this.props.data.productName}/>\r\n\t\t\t\t\t\t<div className=\"sliTitle\">{JSON.parse(this.props.data.productName)}</div>\r\n\t\t\t\t\t\t<div className=\"sliPrice\">£{this.props.data.displayPrice}</div>\r\n\t\t\t\t\t\t<button className=\"sliBuy\" onClick={()=>this.addToBasket()}>Buy Now</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default StoreListItem;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass NavigationBar extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 1,\r\n\t\t\tbasketAmount : this.getTotal(),\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotal(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\")), total = 0;\r\n\r\n\t\tfor(let x=0; x<basket.length; x++)\ttotal += parseInt(basket[x].quantity);\r\n\t\treturn total;\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn <div className=\"navWrapper\">Loading...</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"navWrapper\">\r\n\t\t\t\t<Link className=\"navLink\" to=\"/\">\r\n\t\t\t\t\t<button className=\"navButtonHome\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Home</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Home Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/HomeAlt.svg?alt=media&token=d71028d0-a3a6-491f-8690-7193f5289cb5\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t\r\n\t\t\t\t<Link className=\"navLink\" to=\"/products/\">\r\n\t\t\t\t\t<button className=\"navButtonCatagories\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Products</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\talt=\"Product Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/ProductsAlt.svg?alt=media&token=686777dc-56a5-4e92-9f13-25121f7b5030\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<span className=\"navTitle\">{this.context.storeData[1].StoreTitle}</span>\r\n\t\t\t\t{\r\n\t\t\t\t\t(this.context.userData === undefined || this.context.userData === null )? \r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/signin\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">Sign in</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\talt=\"Sign In Navigation Button\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Link className=\"navLink\" to=\"/account\">\r\n\t\t\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t\t\t<span className=\"navLinkButtonText\">{this.context.userData.displayName}'s account</span>\r\n\t\t\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \r\n\t\t\t\t\t\t\t\t\t\talt=\"Account Navigation Button\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/AccountAlt.svg?alt=media&token=37d726f9-dbf1-40a7-a342-aa6a3262ab61\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t<Link className=\"navLink\" to=\"/basket\">\r\n\t\t\t\t\t<button className=\"navButtonBasket\">\r\n\t\t\t\t\t\t<span className=\"navLinkButtonText\">Basket ({this.state.basketAmount})</span>\r\n\t\t\t\t\t\t<img \tclassName=\"navLinkButtonImage\" \t\r\n\t\t\t\t\t\t\t\talt=\"Basket Navigation Button\"\r\n\t\t\t\t\t\t\t\tsrc=\"https://firebasestorage.googleapis.com/v0/b/storeexample-1c12e.appspot.com/o/BasketAlt.svg?alt=media&token=9c8a999c-0278-4419-b5ea-111a69866065\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\t\r\n\t}\r\n}\r\n\r\nexport default NavigationBar;","import React from 'react';\r\n\r\nclass LoadingScreen extends React.Component{\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"LoadingScreenWrapper\">\r\n\t\t\t\t<span className=\"LoadingScreenMessage\">Loading...</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoadingScreen;","import React from 'react';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass Catagory extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\r\n\t\t\tlet keys = Object.keys(this.context.storeData[0]);\r\n\t\t\tlet vals = Object.values(this.context.storeData[0]);\r\n\r\n\t\t\tlet idkey= keys.indexOf(\"id\");\r\n\t\t\tkeys.splice(idkey,1);\r\n\t\t\tvals.splice(idkey,1);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tlistKeys : keys,\r\n\t\t\t\tlistValue : vals,\r\n\t\t\t\tstatus : 1\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log(vals);\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return (<div className=\"catWrapper\">Error</div>);\r\n\r\n\t\t\tcase 0: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"catWrapper\">\r\n\t\t\t\t\t<div className=\"catList\" >\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tObject.keys(this.state.listKeys).map((data,index) => {\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"catListTag\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={this.state.listKeys[index]} \r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"Catagorys\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"catCheck\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.props.handleSearch(e)}/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label \tclassName=\"catLabel\" htmlFor={this.state.listKeys[index]}>{this.state.listKeys[index]}</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Catagory;","import firebase from './Firebase';\r\n\r\nclass FirebaseAction{\r\n\r\n\tstatic async getProductInfo(id){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\tstatic async setProductInfo(id,info){\r\n\t\tfirebase.firestore().collection(\"productList\").doc(id).update(info);\r\n\t}\r\n\r\n\tstatic async getProductList(){\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async getUserData(user){\r\n\t\tconst data = await firebase.firestore().collection(\"userData\").doc(user);\r\n\t\tconst mainData = await data.get();\r\n\t\treturn mainData.data();\r\n\t}\r\n\r\n\tstatic async getUserOrderHistory(user){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").where(\"uid\",\"==\",user).get();\r\n\t\treturn data.docs.map(doc => doc.data());\r\n\t}\r\n\r\n\tstatic async getUserOrder(order){\r\n\t\tconst data = await firebase.firestore().collection(\"adminData\").doc(order).get();\r\n\t\treturn data.data();\r\n\t}\r\n\r\n\tstatic async getStoreSettings(){\r\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\r\n\t\tconst mainData = data.docs.map(doc => doc.data());\r\n\t\tconst idData = data.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async addOrderHistory(uid,orderData,gt,token){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<orderData.length; key++){\r\n\t\t\tuploadData.push(JSON.stringify({\r\n\t\t\t\t\"key\":orderData[key].id,\r\n\t\t\t\t\"quantity\" : orderData[key].quantity,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tconst adminData = {\r\n\t\t\tname : token.card.name,\r\n\t\t\t\r\n\t\t\temail : token.email,\r\n\r\n\t\t\taddress : {\r\n\t\t\t\tname : token.card.name,\r\n\t\t\t\tline1 : token.card.address_line1,\r\n\t\t\t\tline2 : token.card.address_line2,\r\n\t\t\t\tcity : token.card.address_city,\r\n\t\t\t\tpostcode : token.card.address_zip,\r\n\t\t\t},\r\n\r\n\t\t\tdata : uploadData,\r\n\t\t\tcreated : firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n\t\t\tstatus : 0,\r\n\r\n\t\t\tuid : uid,\r\n\t\t\ttoken : token.id,\r\n\r\n\t\t\tpaid : gt,\r\n\r\n\t\t};\r\n\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(token.id).set(adminData).catch((error) => {\r\n\t\t\twindow.alert(\"There was an issue placing this order, please contact support\");\r\n\t\t\tconsole.error(\"Unable to write to admin panel! (\"+error+\")\");\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async setOrderRefunded(id){\r\n\t\tawait firebase.firestore().collection(\"adminData\").doc(id).update({status : 4});\r\n\t}\r\n\r\n\tstatic async getAdminData(){\r\n\t\tconst adminData = await firebase.firestore().collection(\"adminData\").where(\"status\",\"<\",3).get().catch((error) => {alert(error); console.log(error)});\r\n\t\tconst mainData = adminData.docs.map(doc => doc.data());\r\n\t\tconst idData = adminData.docs.map(doc => doc.id);\r\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\r\n\t\tmainData.sort((a,b) => (a.created > b.created) ? 1 : ((b.created > a.created) ? -1 : 0));\r\n\t\treturn mainData;\r\n\t}\r\n\r\n\tstatic async setProductImage(id,event){\r\n\t\tconst ref = firebase.storage().ref();\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst meta = {contentType : file.type};\r\n\t\tconst name = id;\r\n\r\n\t\tconst task = ref.child(name).put(file,meta);\r\n\t\t\r\n\t\treturn await task;\r\n\t}\r\n\r\n\tstatic async advanceOrder(order){\r\n\t\tfirebase.firestore().collection(\"adminData\").doc(order.id).update({\r\n\t\t\tstatus : (order.status + 1)\r\n\t\t}).catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\t\r\n\t}\r\n\r\n\tstatic async saveSettings(e){\r\n\t\tfirebase.firestore().collection(\"storeSettings\").doc(\"StoreSettings\").update(e)\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async resetPassword(e){\r\n\t\tawait firebase.auth().sendPasswordResetEmail(e);\r\n\t}\r\n}\r\n\r\nexport default FirebaseAction;","import React from 'react';\r\n\r\nimport StoreListItem from './StoreListItem';\r\nimport NavigationBar from './NavigationBar';\r\nimport Catagory from './Catagory';\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\n\r\nclass SearchBox extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {status : 0};\r\n\t\tthis.serverData = [];\r\n\t\tthis.dataList = [];\r\n\r\n\t\tthis.searchInput = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.runCheck();\r\n\t}\r\n\r\n\trunCheck(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.serverData = data; \r\n\t\t\t\tthis.dataList = data;\r\n\t\t\t\r\n\t\t\t\tlet catagoryData = {};\r\n\t\t\t\tlet catKey;\r\n\r\n\t\t\t\tfor(catKey in this.context.storeData[0]){\r\n\t\t\t\t\tcatagoryData = {\r\n\t\t\t\t\t\t...catagoryData,\r\n\t\t\t\t\t\t[catKey] : false,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({dataList : catagoryData, status : 1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsearch(element){\r\n\t\tthis.setState({status : 0});\r\n\t\tconst searchterm = element.target.value.toLowerCase();\r\n\r\n\t\tif(!this.state.catagorys){\r\n\t\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.searchCatagory();\r\n\t\t\tthis.dataList = this.dataList.filter(function(data){\r\n\t\t\t\treturn data.productName.toLowerCase().includes(searchterm);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\tsearchCatagory(){\r\n\t\tthis.setState({status : 0});\r\n\r\n\t\tlet a = this;\r\n\r\n\t\tlet trueVals = Object.keys(this.state.dataList).filter(function(num){\r\n\t\t\treturn a.state.dataList[num];\r\n\t\t});\r\n\r\n\t\tif(trueVals.length === 0){\r\n\t\t\tthis.dataList = this.serverData;\r\n\t\t\tthis.setState({status : 1, catagorys : false});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.dataList = this.serverData.filter(function(data){\r\n\t\t\tlet prodCat = JSON.parse(data.Catagory).split(\"+\");\r\n\t\t\treturn prodCat.some(r=>trueVals.includes(r));\r\n\t\t});\r\n\t\t\r\n\t\tthis.setState({status : 1, catagorys : true});\r\n\t}\r\n\r\n\thandleCatagoryList(data){\r\n\t\tthis.setState({\r\n\t\t\tdataList : {\r\n\t\t\t\t...this.state.dataList,\r\n\t\t\t\t[data.target.id] : data.target.checked,\r\n\t\t\t}\r\n\t\t},()=>this.searchCatagory());\r\n\t}\r\n\t\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"schWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"schContainer\">\r\n\t\t\t\t\t\t<div className=\"schLeft\">\r\n\t\t\t\t\t\t\t<Catagory handleSearch={(e) => this.handleCatagoryList(e)}/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"schRight\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"schInput\" placeholder=\"Search...\" onChange={(e)=>this.search(e)}/><br/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"schResult\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.dataList.map((data,index) => (\r\n\t\t\t\t\t\t\t\t\t<StoreListItem key={index} data={data} />\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBox;","import React from 'react'\r\nimport { Redirect} from \"react-router\";\r\nimport firebase from './Firebase';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass StoreItemPage extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false};\r\n\t\tthis.openExpandedImage = this.openExpandedImage.bind(this);\r\n\t\tthis.addToBasket = this.addToBasket.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.props.id)\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\r\n\t\tthis.loadData().then(data => {\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.data.id = this.props.id;\r\n\t\t\tthis.data.quantity = 0;\r\n\t\t\tthis.data.displayPrice = this.data.productPrice / 100;\r\n\t\t\tconsole.log(this.data);\r\n\t\t\tthis.setState({status:1});\r\n\t\t});\r\n\t}\r\n\r\n\taddToBasket(){\r\n\t\tlet basket = JSON.parse(window.localStorage.getItem(\"basket\"));\r\n\t\tthis.addBasketItem(basket);\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify(basket));\r\n\t\tthis.setState({redirect : true});\r\n\t}\r\n\r\n\taddBasketItem(basket){\r\n\t\tfor(let a=0; a<basket.length; a++){\r\n\t\t\tif(basket[a] !== undefined){\r\n\t\t\t\tif(basket[a].id === this.data.id){\r\n\t\t\t\t\tbasket[a].quantity = parseInt(basket[a].quantity) + 1;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbasket.push(this.data);\r\n\t\tbasket[basket.length-1].quantity = parseInt(basket[basket.length-1].quantity) + 1;\r\n\t\treturn;\r\n\t}\r\n\r\n\tasync loadData(){\t\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").doc(this.props.id).get();\r\n\t\treturn (data.exists ? data.data() : null);\r\n\t}\r\n\r\n\topenExpandedImage(){\r\n\t\twindow.open(this.data.image);\r\n\t}\r\n\r\n\trender(){\r\n\t\tconsole.log(this.data);\r\n\t\tif(this.state.redirect)\treturn <Redirect to=\"/basket\" />\r\n\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPageWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t\t<div className=\"sipLeft\">\r\n\t\t\t\t\t\t\t\t<div contentEditable=\"true\" className=\"sipName\">{JSON.parse(this.data.productName)}</div><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<img \tonClick={()=>window.open(this.data.image,'popup','scrollbars=no')} \t\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sipImage\" \r\n\t\t\t\t\t\t\t\t\t\tsrc={this.data.image} \r\n\t\t\t\t\t\t\t\t\t\talt={`${this.data.productName}`} />\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"sipRight\">\r\n\t\t\t\t\t\t\t\t<div className=\"sipInfo\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipDesc\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tJSON.parse(this.data.productDescription).split(\"\\n\").map((data,index) =>(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{data}<br/></span>\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sipBoxPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipPrice\">£{this.data.displayPrice}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipItemPP\">(£{(this.data.deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"sipBuyButton\" onClick={this.addToBasket}>Add to basket</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default StoreItemPage;","import React from 'react';\r\n\r\nimport SearchBox from './SearchBox';\r\nimport StoreItemPage from './StoreItemPage';\r\n\r\nclass ProductList extends React.Component{\r\n\trender(){\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn <SearchBox />\r\n\t\t}else{\r\n\t\t\treturn <StoreItemPage id={this.props.match.params.id}/>\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductList;","import React from 'react'\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\t\r\nconst stripePromise = loadStripe('pk_test_51HHEl2HbWsI0wL0616xJL9FkVOSuvpDFAfYvYfwwmOv044YOH4npf2jEko9ISFcouW3Y5ETqkQMWxeizaDANXNTL0018qa39p8');\r\n\r\nclass Basket extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {storedItems : JSON.parse(window.localStorage.getItem(\"basket\")),};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tcalculateTotal(){\r\n\t\tlet total = 0;\r\n\r\n\t\tfor(let a=0; a<this.state.storedItems.length; a++){\r\n\t\t\ttotal = total + (this.state.storedItems[a].productPrice * this.state.storedItems[a].quantity);\r\n\t\t\ttotal = total + (this.state.storedItems[a].deliveryPrice * this.state.storedItems[a].quantity);\r\n\t\t}\r\n\r\n\t\tthis.setState({grandTotal:total});\r\n\t}\r\n\r\n\tremoveItem(e){\r\n\t\tif(window.confirm(\"This will remove all of this item from your basket, are you sure?\")){\r\n\t\t\tlet data = this.state.storedItems;\r\n\r\n\t\t\tfor(let a=0; a<data.length; a++){\r\n\t\t\t\tif(data[a].id === e.target.id)\tdata.splice(a,1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({storedItems : data}, () => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\t\tthis.calculateTotal();\r\n\t\t}\r\n\t}\r\n\r\n\tchangeBasketItemQuantity(e){\r\n\t\te.target.value = e.target.value.replace(\".\"\t,\"\");\r\n\t\te.target.value = e.target.value.replace(\",\",\"\");\r\n\t\te.target.value = e.target.value.replace(\" \",\"\");\r\n\r\n\r\n\t\tlet oldData = this.state.storedItems;\r\n\r\n\t\tfor(let a=0; a<oldData.length; a++){\r\n\t\t\tif(oldData[a].id === e.target.id){\r\n\t\t\t\toldData[a].quantity = e.target.value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({storedItems : oldData},() => {window.localStorage.setItem(\"basket\",JSON.stringify(this.state.storedItems))});\r\n\t\tthis.calculateTotal();\r\n\t}\r\n\r\n\tgetBasketData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"key\":this.state.storedItems[key].id,\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tparseData(){\r\n\t\tlet uploadData = [];\r\n\r\n\t\tfor(let key=0; key<this.state.storedItems.length; key++){\r\n\t\t\tuploadData.push({\r\n\t\t\t\t\"name\" : JSON.parse(this.state.storedItems[key].productName),\r\n\t\t\t\t\"quantity\" : this.state.storedItems[key].quantity,\r\n\t\t\t\t\"price\" : this.state.storedItems[key].productPrice,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconsole.log(uploadData);\r\n\r\n\t\treturn JSON.stringify(uploadData);\r\n\t}\r\n\r\n\tasync handleClick(event){\r\n\t\tconst stripe = await stripePromise;\r\n\t\tconst response = await fetch('http://localhost:4242/checkout-session', { method: 'POST', body:JSON.stringify({\r\n\t\t\tuid : btoa(this.context.currentUser.uid),\r\n\t\t\tdata : btoa(this.parseData()),\r\n\t\t\tthroughdata : btoa(this.getBasketData()),\r\n\t\t})});\t\t\r\n\r\n\t\tconst session = await response.json();\r\n\r\n\t\tconst result = await stripe.redirectToCheckout({\r\n\t\t\tsessionId: session.id,\r\n\t\t});\r\n\r\n\t\tif (result.error) {\r\n\t\t\tconsole.error(response.text());\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"basketWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"basketContainer\">\r\n\t\t\t\t\t<div className=\"basketTopBar\">\r\n\t\t\t\t\t\tMy Basket\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketList\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.storedItems.map((item,index) => (\r\n\t\t\t\t\t\t\t\t<div className=\"basketListItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemImageCont\"><img className=\"basketListItemImage\" alt=\"Store Item\" src={item.image}/></div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemName\">{JSON.parse(item.productName)}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPrice\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceMain\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.productPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"basketListItemPriceDelivery\">\r\n\t\t\t\t\t\t\t\t\t\t\t£{((item.deliveryPrice * item.quantity)/100).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemQuantity\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityInput\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.quantity} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.changeBasketItemQuantity(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"basketListItemRemove\">\r\n\t\t\t\t\t\t\t\t\t\t<input \ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"basketListItemQuantityRemove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"&#10007;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => this.removeItem(e)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"basketBottomBar\">\r\n\t\t\t\t\t\tYour total comes to £{(this.state.grandTotal/100).toFixed(2)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className=\"basketCheckoutButton\" role=\"link\" onClick={(e)=>this.handleClick(e)}>\r\n\t\t\t\t\t\t\tProceed to Checkout\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Basket;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth'\r\n\r\nclass CheckoutSuccess extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t\temail : atob(this.props.location.search.split(\"=\")[1]),\r\n\t\t};\r\n\r\n\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tHello, {this.state.email}!<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tSince this is an example store, no actual payment was taken.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutSuccess;","import React from 'react'\r\nimport {Redirect} from \"react-router\";\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth'\r\n\r\nclass CheckoutCancel extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tredirect : false,\r\n\t\t};\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect){\r\n\t\t\treturn <Redirect to=\"/\"/>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<div className=\"CheckoutSuccessWrapper\">\r\n\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"CheckoutSuccess\">\r\n\t\t\t\t\t\tUnfortunately an error has occured or the action was cancelled.<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tClick anywhere to return home.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CheckoutCancel;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport {AuthContext} from './Auth';\r\n\r\n\r\nclass MainPage extends React.Component{\r\n\t\r\n\tstatic contextType = AuthContext;\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tstatus : -1,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === -1)\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === -1)\t\tthis.setState({status : 0});\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <LoadingScreen />\r\n\t\t \r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"PageWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t<div className=\"MainPageColumnWrapper\">\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkLeft} className=\"MainPageColumnLeft\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundLeft}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageLeft} alt={this.context.storeData[1].ColumnAltLeft}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkCenter} className=\"MainPageColumnCenter\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundCenter}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageCenter} alt={this.context.storeData[1].ColumnAltCenter}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<Link to={this.context.storeData[1].ColumnLinkRight} className=\"MainPageColumnRight\">\r\n\t\t\t\t\t\t\t<div className=\"MainPageColumn\" style={{background:this.context.storeData[1].ColumnBackgroundRight}}>\r\n\t\t\t\t\t\t\t\t<img className=\"MainPageColumnImage\" src={this.context.storeData[1].ColumnImageRight} alt={this.context.storeData[1].ColumnAltRight}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport firebase from './Firebase'\r\nimport NavigationBar from './NavigationBar';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass SignIn extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect : null\r\n\t\t};\r\n\t\tthis.handleSignIn = this.handleSignIn.bind(this);\r\n\t}\r\n\r\n\tasync handleSignIn(event){\r\n\t\tevent.preventDefault();\r\n\t\tconst {email,password} = event.target.elements; \r\n\t\ttry{\r\n\t\t\tawait firebase.auth().signInWithEmailAndPassword(email.value,password.value);\r\n\t\t\tthis.setState({redirect : true})\r\n\t\t}catch(error){\r\n\t\t\talert(error);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.redirect !== null) return <Redirect to=\"/\"/>\r\n\t\treturn (\r\n\t\t\t<div className=\"SignInWrapper\">\r\n\t\t\t\t<NavigationBar />\r\n\t\t\t\t<form onSubmit={this.handleSignIn}>\r\n\t\t\t\t\t<label>Email<br/><input type=\"email\" name=\"email\" placeholder=\"example@example.com\"/></label><br/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<label>Password<br/><input type=\"password\" name=\"password\" placeholder=\"password\"/></label><br/>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\n\r\nclass PageNavigation extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage : 0,\r\n\t\t\tmaxPages : this.props.maxPages,\r\n\t\t};\r\n\t}\r\n\r\n\tprevPage(){\r\n\t\tif(this.state.currentPage - 1 >= 0){\r\n\t\t\tthis.setState({currentPage : this.state.currentPage - 1},\r\n\t\t\t() => {this.props.onPageChange(this.state.currentPage)});\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.state.currentPage + 1 < this.state.maxPages){\r\n\t\t\tthis.setState(\r\n\t\t\t\t{currentPage : this.state.currentPage + 1},\r\n\t\t\t\t()=>{this.props.onPageChange(this.state.currentPage)}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tlet returnValue = [];\r\n\r\n\t\treturnValue.push(<div key=\"leftCap\" onClick={()=>this.prevPage()} className=\"GlobalNavBallLeftCap\"></div>);\r\n\t\t\r\n\r\n\t\tfor(let a=0; a<this.state.maxPages; a++){\r\n\t\t\treturnValue.push(\r\n\t\t\t\t<div \tonClick={()=>this.setState({currentPage : a},() => {this.props.onPageChange(this.state.currentPage)})}\r\n\t\t\t\t\t\tkey={a} \r\n\t\t\t\t\t\tclassName={(a === this.state.currentPage ? \"GlobalNavBallFilled\" : \"GlobalNavBall\")}>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturnValue.push(<div key=\"rightCap\" onClick={() => this.nextPage()} className=\"GlobalNavBallRightCap\"></div>);\r\n\t\t\r\n\t\treturn (<div className=\"GlobalPageNavigation\">{returnValue}</div>);\r\n\t}\r\n}\r\n\r\nexport default PageNavigation;","import React from 'react';\r\n\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport {Link} from 'react-router-dom';\r\nimport NavigationBar from './NavigationBar';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport PageNavigation from './PageNavigation';\r\n\r\nclass Account extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tshowPage : 0,\r\n\r\n\t\t\tmaxPages : 2,\r\n\r\n\t\t\tresetSent : false,\r\n\t\t\torderHistory : undefined,\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context.currentUser !== undefined && this.context.storeData !== undefined && this.context.orderHistory !== undefined && this.context.userData !== undefined && this.state.orderHistory === undefined){\r\n\t\t\tthis.setState({orderHistory : []},()=>this.processOrderHistory());\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(this.context.currentUser !== undefined && this.context.storeData !== undefined && this.context.orderHistory !== undefined && this.context.userData !== undefined && this.state.orderHistory === undefined){\r\n\t\t\tthis.setState({orderHistory : []},()=>this.processOrderHistory());\r\n\t\t}\r\n\t}\r\n\r\n\tasync resetPassword(){\r\n\t\tFirebaseAction.resetPassword(this.context.currentUser.email)\r\n\t\tthis.setState({resetSent : true});\r\n\t}\r\n\r\n\tasync processOrderHistory(){\r\n\t\tfor(let order=0; order<this.context.orderHistory.length; order++){\t\t\t\r\n\t\t\tlet currentOrder = [];\r\n\r\n\t\t\tlet currentOrderData = this.context.orderHistory[order];\r\n\t\t\t\r\n\t\t\tfor(let item=0; item<currentOrderData.data.length; item++){\r\n\t\t\t\tlet info = JSON.parse(currentOrderData.data[item]);\r\n\r\n\t\t\t\tawait FirebaseAction.getProductInfo(info.key).then((data) => {\r\n\t\t\t\t\tcurrentOrder.push({\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\tproductName : JSON.parse(data.productName),\r\n\t\t\t\t\t\tsku : JSON.parse(data.sku),\r\n\t\t\t\t\t\tproductDescription : JSON.parse(data.productDescription),\r\n\t\t\t\t\t\tCatagory : JSON.parse(data.Catagory),\r\n\t\t\t\t\t\tquantity : info.quantity,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet array = this.state.orderHistory;\r\n\t\t\tarray.push(currentOrder);\r\n\t\t\tthis.setState({orderHistory : array});\r\n\t\t}\r\n\t\tthis.setState({status : 1});\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\t\t\tcase 0: default: \r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"accPanel\">\r\n\t\t\t\t\t\t<div className=\"accPanelTitle\">Display Settings</div>\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accDisplayName\">Display Name</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accDisplayName\" \r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.userData.displayName}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accEmail\">Email</label><br/>\r\n\t\t\t\t\t\t\t<input \tid=\"accEmail\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelInput\" \r\n\t\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"displayName\" \r\n\t\t\t\t\t\t\t\t\tdefaultValue={this.context.currentUser.email}/>\r\n\t\t\t\t\t\t</div>\r\n\t\r\n\t\t\t\t\t\t<div className=\"accPanelItem\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"accResetPassword\">Password</label><br/>\r\n\t\t\t\t\t\t\t<button id=\"accResetPassword\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"accPanelButton\" \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.resetSent} \r\n\t\t\t\t\t\t\t\t\tonClick={() => this.resetPassword()}>Change Password</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\tcase 1:\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accPanel\" style={{\"justify-content\":\"initial\"}}>\r\n\t\t\t\t\t<div className=\"accPanelTitle\">Order History</div><br/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.context.orderHistory.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link className=\"accPanelItem\" to={\"/account/order/\"+data.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"accPanelItem\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"GlobalSpacer\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemPlaced\">Placed: {data.created.toDate().toDateString()}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderHistory[index].map((item,index2) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"accOHItemInfo\" key={index2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tItem #{index2+1} - {item.productName}({item.quantity})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemStatus\">Status: {this.state.orderStatus[data.status]}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"accOHItemTotal\">Paid: £{data.paid/100}</span> \r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: default: return <span>Error!</span>;\r\n\r\n\t\tcase 0: return <LoadingScreen />\r\n\r\n\t\tcase 1: \r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"accWrapper\">\r\n\t\t\t\t\t<NavigationBar />\r\n\t\t\t\t\t{this.renderPanel()}\r\n\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Account;","import React from 'react';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport firebase from './Firebase';\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport ContentEditable from 'react-contenteditable'\r\n\r\n\r\nclass ProductEditor extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.data = [];\r\n\t\tthis.state = {status : 0, redirect : false, changedData : {}};\r\n\t\tthis.changedData = {};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\tthis.setState({status:0});\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\tFirebaseAction.getProductList().then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tFirebaseAction.getProductInfo(this.props.match.params.id).then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.data.id = this.props.match.params.id;\r\n\t\t\t\t\r\n\t\t\t\tif(isNaN(this.data.productPrice)){\r\n\t\t\t\t\tconsole.error(\"data.productPrice was NaN, reset to 0\");\r\n\t\t\t\t\tthis.data.productPrice = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.displayPrice = parseInt(this.data.productPrice) / 100;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({changedData : this.data});\r\n\t\t\t\tthis.setState({status:1});\r\n\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsaveChanges(){\r\n\t\tthis.savedData = this.state.changedData;\r\n\t\tthis.savedData.productPrice = parseInt(JSON.parse(this.savedData.productPrice));\r\n\t\tthis.savedData.deliveryPrice = parseInt(JSON.parse(this.savedData.deliveryPrice));\r\n\t\tFirebaseAction.setProductInfo(this.props.match.params.id,this.savedData);\r\n\t}\r\n\r\n\thandleChange(element,name){\r\n\t\tlet data;\r\n\r\n\t\tif(name === \"productDescription\"){\r\n\t\t\tdata = element.target.value;\r\n\t\t\tdata = data.replaceAll(\"<div>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"</div>\",\"\");\r\n\t\t\tdata = data.replaceAll(\"<br>\",\"\\n\");\r\n\t\t}else{\r\n\t\t\tdata = element.target.value;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tchangedData : {\r\n\t\t\t\t...this.state.changedData,\r\n\t\t\t\t[name] : JSON.stringify(data),\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tuploadFile(event){\r\n\r\n\t\tlet dat = FirebaseAction.setProductImage(this.props.match.params.id,event);\r\n\t\tdat.then(snapshot => snapshot.ref.getDownloadURL())\r\n\t\t\t.then((url) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangedData : {\r\n\t\t\t\t\t\t...this.state.changedData,\r\n\t\t\t\t\t\timage:url,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.data.image = this.state.changedData.image;\r\n\t\t\t\tthis.saveChanges();\r\n\t\t}).catch(console.error);\t\t\r\n\t}\r\n\r\n\trenderItem(){\r\n\t\tif(this.state.status === 1){\r\n\t\t\tif(this.data !== null){\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"storeItemPageWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t\t<div className=\"sipWrapper\">\r\n\t\t\t\t\t\t\t<div className=\"sipLeft\">\r\n\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productName)} \r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"productName\")}\r\n\t\t\t\t\t\t\t\t\tclassName=\"sipName\"/><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<img \tonClick={()=>window.open(this.state.changedData.image,'popup','scrollbars=no')} \t\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"sipImage\" \r\n\t\t\t\t\t\t\t\t\t\tsrc={this.state.changedData.image} \r\n\t\t\t\t\t\t\t\t\t\talt={`${this.state.changedData.productName}`} />\r\n\r\n\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.uploadFile(e)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"sipRight\">\r\n\t\t\t\t\t\t\t\t<div className=\"sipInfo\">\r\n\t\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"pedDesc\" \r\n\t\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleChange(e,\"productDescription\")}\r\n\t\t\t\t\t\t\t\t\t\thtml={JSON.parse(this.state.changedData.productDescription).replaceAll(\"\\n\",\"<br>\")}/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyBox\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"sipBoxPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipPrice\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t£<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml={\"\"+JSON.parse(this.state.changedData.productPrice)} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"productPrice\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"span\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sipItemPP\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t(£\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ContentEditable \r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml={\"\"+JSON.parse(this.state.changedData.deliveryPrice)} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleChange(e,\"deliveryPrice\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"span\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\tP&P)</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"sipBuyWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"sipBuyButton\" onClick={()=>this.saveChanges()}>Save Changes</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\t\tNo product found\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync addNewProduct(){\r\n\t\tconst blankData = {\r\n\t\t\tproductName : \"\\\"\\\"\",\r\n\t\t\tproductDescription : \"\\\"\\\"\",\r\n\t\t\tCatagory : \"\\\"\\\"\",\r\n\t\t\tdeliveryPrice : 0,\r\n\t\t\tproductPrice : 0,\r\n\t\t\tsku : \"\\\"\\\"\",\r\n\t\t\timage : \"\\\"\\\"\",\r\n\t\t\tunitPerDeliveryCharge : 0,\r\n\t\t};\r\n\r\n\t\tconst data = await firebase.firestore().collection(\"productList\").add(blankData);\r\n\t\treturn <Redirect to={`/editor/${data.id}`} />\r\n\t}\r\n\r\n\trenderSelector(){\r\n\t\treturn (\r\n\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t<NavigationBar/>\r\n\t\t\t\t<div className=\"productEditorPageWrapper\">\r\n\t\t\t\t\t<span className=\"productEditorListTitle\">Edit specific product</span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.data.map((data,index) => (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"productEditorListContainer\">\r\n\t\t\t\t\t\t\t\t\t<Link key={index} to={`/editor/${data.id}`}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"productEditorListName\">{data.productName}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"productEditorListID\">[{data.id}]</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<button className=\"productEditorListAddButton\" onClick={() => this.addNewProduct()}>Add new item</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender(){\r\n\t\tif(this.state.status === 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"productEditorPage\">\r\n\t\t\t\t\tLoading product information\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif(!this.props.match.params.id){\r\n\t\t\treturn this.renderSelector();\r\n\t\t}else{\r\n\t\t\treturn this.renderItem();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ProductEditor;","import React from 'react';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\nimport FirebaseAction from './FirebaseAction';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport PageNavigation from './PageNavigation';\r\n\r\nclass Admin extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\torderStatus : [\"Placed\",\"Dispatched\",\"Out for delivery\",\"Complete\",\"Returned\"],\r\n\t\t\tstatus : -1,\r\n\r\n\t\t\tshowPage : 0,\r\n\t\t\tmaxPages : 2\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tif(\tthis.context !== undefined && \r\n\t\t\tthis.context.currentUser !== undefined && \r\n\t\t\tthis.context !== null && \r\n\t\t\tthis.context.currentUser !== null && \r\n\t\t\tthis.context.storeData !== undefined && \r\n\t\t\tthis.context.storeData[0] !== undefined && \r\n\t\t\tthis.context.storeData[1] !== undefined && \r\n\t\t\tthis.state.status === -1){\r\n\t\t\tif(this.state.orderData === undefined) this.getInfo();\r\n\t\t}\r\n\t}\r\n\r\n\tasync getInfo(){\r\n\t\tif(\tthis.context !== undefined && this.context.currentUser !== undefined && this.context !== null && this.context.currentUser !== null && this.context.storeData !== undefined && this.context.storeData[0] !== undefined && this.context.storeData[1] !== undefined && this.state.status === -1){\r\n\t\t\tif(this.state.orderData !== undefined) return; \r\n\t\t}\r\n\r\n\t\tthis.setState({orderData : [], status : 0});\r\n\t\t\t\r\n\t\t\tawait FirebaseAction.getAdminData().then((data) => {\r\n\t\t\t\tthis.setState({openOrders : data},()=>{\r\n\r\n\t\t\t\t\tthis.state.openOrders.map(async (odat,index)=>{\r\n\t\t\t\t\t\tlet oldState = this.state.orderData;\r\n\t\t\t\t\t\toldState.push([]);\r\n\r\n\t\t\t\t\t\tthis.setState({orderData : oldState},()=>{\r\n\t\t\t\t\t\t\todat.data.map(async(order)=>{\r\n\t\t\t\t\t\t\t\tlet key = JSON.parse(order).key;\r\n\r\n\t\t\t\t\t\t\t\tawait FirebaseAction.getProductInfo(key).then((retData)=>{\r\n\t\t\t\t\t\t\t\t\tlet oldArray = this.state.orderData;\r\n\t\t\t\t\t\t\t\t\toldArray[index].push(retData);\r\n\t\t\t\t\t\t\t\t\tthis.setState({orderData : oldArray});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthis.setState({columnSettings : this.context.storeData[1], status : 1});\r\n\t}\r\n\t\r\n\tadvanceFullfillment(index){\r\n\t\tlet order = this.state.openOrders[index];\r\n\t\tif(order.status < 3){\r\n\t\t\tFirebaseAction.advanceOrder(order).then(() => {\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSettingsChange(e){\r\n\t\tthis.setState({\r\n\t\t\tcolumnSettings : {\r\n\t\t\t\t...this.state.columnSettings,\r\n\t\t\t\t[e.target.name] : e.target.value.replace(/\\n/g, '')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveSettings(){\r\n\t\tFirebaseAction.saveSettings(this.state.columnSettings);\r\n\t}\r\n\r\n\tasync makeRefund(id, pid){\r\n\t\tconst response = await fetch('http://localhost:4242/make-refund', { method: 'POST', body: btoa(pid) });\r\n\t\tconst data = await response.json();\r\n\r\n\t\tif(data.status === \"failed\"){\r\n\t\t\talert(\"Unable to refund, \"+data.reason);\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tFirebaseAction.setOrderRefunded(id).then(()=>{\r\n\t\t\t\tthis.setState({status : -1});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trenderColumnSettings(name){\r\n\t\treturn (\r\n\t\t\t<div className={\"admColumnSettings\"+name}>\r\n\t\t\t\t<span className=\"admColumnSettingsTitle\">{name} Column Settings</span><br/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"admColumnSettingImage\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnImage\"+name}>Image Link for {name} Column</label>\r\n\t\t\t\t\t<textarea \ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"admColumnSettingsInputLink\"\r\n\t\t\t\t\t\t\t\tname={\"ColumnImage\"+name}\r\n\t\t\t\t\t\t\t\tid={\"ColumnImage\"+name} \r\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnImage\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingAlt\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnAlt\"+name}>Alt text for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnAlt\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnAlt\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnAlt\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingLink\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnLink\"+name}>Link for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"text\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnLink\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnLink\"+name} \r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnLink\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"admColumnSettingColor\">\r\n\t\t\t\t\t<label htmlFor={\"ColumnBackground\"+name}>Background Color for {name} Column</label>\r\n\t\t\t\t\t<input \ttype=\"color\" \r\n\t\t\t\t\t\t\tclassName=\"admColumnSettingsInput\"\r\n\t\t\t\t\t\t\tname={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tid={\"ColumnBackground\"+name}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\tvalue={this.state.columnSettings[\"ColumnBackground\"+name]} /><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderPanel(){\r\n\t\tswitch(this.state.showPage){\r\n\r\n\t\t\tdefault: return (<LoadingScreen/>);\r\n\r\n\t\t\tcase 0: \r\n\t\t\t\tif(this.state.openOrders.length === 0){\r\n\t\t\t\t\treturn (<div className=\"admPanel\">No current open orders.</div>);\r\n\t\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.openOrders.map((data,index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"admOI\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOITitle\">Order #{index+1}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIBio\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIBioTitle\">Recipient Information</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIName\">Name: {data.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIEmail\"><a href={\"mailto:\"+data.email}>Email: {data.email}</a></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIAddress\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"admOIAddressTitle\">Shipping Address</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.line1}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t{data.address.line2 !== null && <span className=\"admOIAddressLine\">{data.address.line2}</span>}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.city}</span><br/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIAddressLine\">{data.address.postcode}</span><br/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.orderData[index].map((dat2)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"AdmOIItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{JSON.parse(dat2.productName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"admOIStatus\"> \r\n\t\t\t\t\t\t\t\t\t\t<span className=\"admOIStatusText\">Status: {this.state.orderStatus[data.status]}</span>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIAdvanceOrder\" disabled={data.status >= 3} onClick={() => this.advanceFullfillment(index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status >= 3 && <b>Completed Order</b>}\r\n\t\t\t\t\t\t\t\t\t\t\t{data.status < 3 && <b>Advance to {this.state.orderStatus[data.status+1]}</b>}\r\n\t\t\t\t\t\t\t\t\t\t</button><br/>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"admOIRefund\" onClick={()=>this.makeRefund(data.id, data.pid)}>Issue Refund</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"admPanel\">\r\n\t\t\t\t\t<div className=\"admPanelColumnSettings\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<label htmlFor=\"StoreTitle\">Store Title</label><br/>\r\n\t\t\t\t\t\t<input type=\"text\" \r\n\t\t\t\t\t\t\t\t\tname=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tid=\"StoreTitle\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e)=>this.handleSettingsChange(e)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.columnSettings.StoreTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"admColumnSettingsWrapper\">\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Left\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Center\")}\r\n\t\t\t\t\t\t\t{this.renderColumnSettings(\"Right\")}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button onClick={()=>this.saveSettings()}>Save Changes</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\t\t\tcase -1: case 0: default: return (<LoadingScreen />);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t\t<div className=\"admWrapper\">\r\n\t\t\t\t\t\t<NavigationBar/>\r\n\r\n\t\t\t\t\t\t{this.renderPanel()}\r\n\r\n\t\t\t\t\t\t<PageNavigation maxPages={this.state.maxPages} onPageChange={(e)=>this.setState({showPage : e})} />\r\n\t\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\n\r\nimport FirebaseAction from './FirebaseAction';\r\nimport LoadingScreen from './LoadingScreen';\r\nimport NavigationBar from './NavigationBar';\r\nimport {AuthContext} from './Auth';\r\n\r\nclass ViewOrder extends React.Component{\r\n\tstatic contextType = AuthContext;\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.statusTitles = [\r\n\t\t\t\"Placed\",\r\n\t\t\t\"Dispatched\",\r\n\t\t\t\"Out for delivery\",\r\n\t\t\t\"Complete\",\r\n\t\t\t\"Returned\"\r\n\t\t];\r\n\r\n\t\tthis.statusDescriptions = [\r\n\t\t\t\"Placed, in the system ready to be dispatched\",\r\n\t\t\t\"Dispatched, ready to be sent out for delivery\",\r\n\t\t\t\"Out for delivery, with our postal carrier\",\r\n\t\t\t\"Completed, order has been recieved\",\r\n\t\t\t\"Refunded, Sorry if there was a problem with your order\"\r\n\t\t];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus : 0,\r\n\t\t\tid : this.props.match.params.id,\r\n\t\t\tproductInfo : {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.context !== undefined && this.context.storeData !== undefined && this.state.status === 0){\r\n\t\t\tFirebaseAction.getUserOrder(this.state.id).then((data) => {\r\n\t\t\t\t\r\n\t\t\t\tif(data === undefined){\r\n\t\t\t\t\tthis.setState({status : -1});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet dateString = \"\";\r\n\t\t\t\t\tlet date = data.created.toDate();\r\n\r\n\t\t\t\t\tconst month = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\n\t\t\t\t\tdateString = month[date.getMonth()]+\" \"+date.getDate();\r\n\r\n\t\t\t\t\tif(date.getDate().toString().endsWith(\"1\")){\r\n\t\t\t\t\t\tdateString = dateString+\"st \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"2\")){\r\n\t\t\t\t\t\tdateString = dateString+\"nd \";\r\n\t\t\t\t\t}else if(date.getDate().toString().endsWith(\"3\")){\r\n\t\t\t\t\t\tdateString = dateString+\"rd \";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdateString = dateString+\"th \";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdateString = dateString + date.getFullYear();\r\n\r\n\t\t\t\t\tthis.setState({orderData : {...data,dateString : dateString}});\r\n\r\n\t\t\t\t\tfor(let a=0; a<data.data.length; a++){\r\n\t\t\t\t\t\tlet itemData = JSON.parse(data.data[a]);\r\n\r\n\t\t\t\t\t\tFirebaseAction.getProductInfo(itemData.key).then((info) => {\r\n\t\t\t\t\t\t\tlet productInfo = JSON.parse(JSON.stringify(this.state.productInfo));\r\n\t\t\t\t\t\t\tproductInfo = {\r\n\t\t\t\t\t\t\t\t...productInfo,\r\n\t\t\t\t\t\t\t\t[itemData.key] : {\r\n\t\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\t\tproductName : JSON.parse(info.productName),\r\n\t\t\t\t\t\t\t\t\tCatagory : JSON.parse(info.Catagory),\r\n\t\t\t\t\t\t\t\t\tproductDescription : JSON.parse(info.productDescription),\r\n\t\t\t\t\t\t\t\t\tsku : JSON.parse(info.sku),\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.setState({productInfo : productInfo},()=>{\r\n\t\t\t\t\t\t\t\tif(a === data.data.length-1){\r\n\t\t\t\t\t\t\t\t\tthis.setState({status : 1});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tswitch(this.state.status){\r\n\r\n\t\t\tcase -1: default: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelError\">Error loading order information</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 0: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<LoadingScreen />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcase 1: return (\r\n\t\t\t\t<div className=\"vopWrapper\">\r\n\t\t\t\t\t<NavigationBar/>\r\n\t\t\t\t\t<div className=\"vopPanelTitle\">About your order placed <span>{this.state.orderData.dateString}</span></div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelStatus\">\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusBig\">Your order is {this.statusTitles[this.state.orderData.status]}</span><br/>\r\n\t\t\t\t\t\t<span className=\"vopPanelStatusSmall\">{this.statusDescriptions[this.state.orderData.status]}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelShipping\">\r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Shipping Address</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.name}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.line1}</span><br/>\r\n\t\t\t\t\t\t{this.state.orderData.address.line2 !== null ? (<span>{this.state.orderData.address.line2}</span>) : <span></span>}<br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.city}</span><br/>\r\n\t\t\t\t\t\t<span>{this.state.orderData.address.postcode\t}</span><br/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"vopPanelItems\"> \r\n\t\t\t\t\t\t<span className=\"vopPanelInnerTitle\">Order Items</span>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.orderData.data.map((data,index) => {\r\n\t\t\t\t\t\t\t\tlet item = JSON.parse(data);\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className=\"vopPanelOrderItem\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemTitle\">(x{item.quantity}) {this.state.productInfo[item.key].productName}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"vopPanelOrderItemPrice\">£{this.state.productInfo[item.key].displayPrice} + (£{(this.state.productInfo[item.key].deliveryPrice/100).toFixed(2)} P&P)</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\t\r\n\r\n\t\t\t\t\t<div className=\"vopPanelTotal\">\r\n\t\t\t\t\t\tOrder Total: £{(this.state.orderData.paid/100).toFixed(2)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ViewOrder;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\n\nimport firebase from './Components/Firebase';\nimport AuthProvider from './Components/Auth'\n\nimport ProductList from './Components/ProductList';\nimport Basket from './Components/Basket';\nimport CheckoutSuccess from './Components/CheckoutSuccess';\nimport CheckoutCancel from './Components/CheckoutCancel';\nimport MainPage from './Components/MainPage';\nimport SignIn from './Components/SignIn';\nimport Account from './Components/Account';\nimport ProductEditor from './Components/ProductEditor';\nimport Admin from './Components/Admin';\nimport ViewOrder from './Components/ViewOrder';\n\nclass MainApp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.dataList = [];\n\t\tthis.state = {status : 0};\n\t\tif(window.localStorage.getItem(\"basket\") === null)\t\twindow.localStorage.setItem(\"basket\",JSON.stringify([]));\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({status : 0});\n\n\t\tthis.loadData().then(data => {\n\t\t\tthis.dataList = data;\n\t\t\tthis.setState({status : 1});\n\t\t});\n\t}\n\n\tasync loadData(){\n\t\tconst data = await firebase.firestore().collection(\"storeSettings\").get();\n\t\tconst mainData = data.docs.map(doc => doc.data());\n\t\tconst idData = data.docs.map(doc => doc.id);\n\t\tmainData.map((data,index) => mainData[index].id = idData[index]);\n\t\treturn mainData;\n\t}\n\n\trender(){\n\t\tif(this.state.status === 0 || this.context.storeData === null){\n\t\t\treturn <div className=\"Wrapper\">Loading data...</div>\n\t\t}\n\n\t\treturn (\n\t\t\t<AuthProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/\" exact component={MainPage} />\n\t\t\t\t\t<Route path=\"/basket\" exact component={Basket} />\n\t\t\t\t\t<Route path=\"/success\" exact component={CheckoutSuccess} />\n\t\t\t\t\t<Route path=\"/cancel\" exact component={CheckoutCancel} />\n\t\t\t\t\t<Route path=\"/products/:id?\" exact component={ProductList}/>\n\t\t\t\t\t<Route path=\"/signin\" exact component={SignIn}/>\n\t\t\t\t\t<Route path=\"/account\" exact component={Account}/>\n\t\t\t\t\t<Route path=\"/editor/:id?\" exact component={ProductEditor} />\n\t\t\t\t\t<Route path=\"/admin\" exact component={Admin} />\n\t\t\t\t\t<Route path=\"/account/order/:id?\" component={ViewOrder} />\n\t\t\t\t</Router>\n\t\t\t</AuthProvider>\n\t\t);\n\t}\n}\n\nReactDOM.render(<MainApp/>,document.getElementById('root'));"],"sourceRoot":""}